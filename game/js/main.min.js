function android_cb_showVideoAd(e){e.reward?(console.log("看视频成功!"),HclwAndroidUtil.getInstance().isVideoPlaying=!1,HclwAndroidUtil.getInstance().isCanRequestVideo=!0):(console.log("看视频失败!"),HclwAndroidUtil.getInstance().isVideoPlaying=!1,HclwAndroidUtil.getInstance().isCanRequestVideo=!0),game.EventManager.getInstance().trigger(e.event,e)}function android_cb_video_playing(){console.log("视频正在播放中"),HclwAndroidUtil.getInstance().isVideoPlaying=!0}function onBackPress(){console.log("接收原生返回键点击"),game.EventManager.getInstance().trigger(HclwAndroidNotify.BUTTON_BACK)}var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n},__awaiter=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,o){function s(e){try{h(i.next(e))}catch(t){o(t)}}function r(e){try{h(i["throw"](e))}catch(t){o(t)}}function h(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,r)}h((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(a)throw new TypeError("Generator is already executing.");for(;h;)try{if(a=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return h.label++,{value:n[1],done:!1};case 5:h.label++,o=n[1],n=[0];continue;case 7:n=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){h=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){h.label=n[1];break}if(6===n[0]&&h.label<s[1]){h.label=s[1],s=n;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(n);break}s[2]&&h.ops.pop(),h.trys.pop();continue}n=t.call(e,h)}catch(i){n=[6,i],o=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,s,r,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},GameSetting=function(e){function t(){var t=e.call(this)||this;return t.data=null,t.isclick_sound=!0,t.skinName="resource/eui_skins/GameSetting.exml",t.init(),t}return __extends(t,e),t.prototype.init=function(){this.setting_back.addEventListener(egret.TouchEvent.TOUCH_END,this.back,this),this.language_group.addEventListener(egret.TouchEvent.TOUCH_END,this.change,this),this.sound_group.addEventListener(egret.TouchEvent.TOUCH_END,this.sound,this),this.exit_group.addEventListener(egret.TouchEvent.TOUCH_END,this.exit,this),this.evaluate_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.evaluate,this),this.link_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.link,this),this.follow_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.follow,this),this.languageHandle(),game.EventManager.getInstance().addListener(EventNotify.Language_change,this.languageHandle,this),GameConst.platform==PlatformConst.ANDROID_MOBGI?(this.bottomBtnsGroup.visible=!1,this.language_group.visible=!1,this.language_group.includeInLayout=!1,this.exit_group.visible=!1,this.exit_group.includeInLayout=!1):(GameConst.platform==PlatformConst.H5||GameConst.platform==PlatformConst.H5noad)&&(this.bottomBtnsGroup.visible=!1)},t.prototype.setState=function(){UserInfo.Logintype==LoginTypestaus.touristLogin?this.exit_label.text=game.LanguageManager.getString("psetting_login"):this.exit_label.text=game.LanguageManager.getString("psetting_logout")},t.prototype.back=function(){game.PanelManager.getInstance().close(game.EPanelID.GameSetting,!0);var e=game.PanelManager.getInstance().getPanel(game.EPanelID.LoginMain);e.updateNumber()},t.prototype.change=function(){game.LanguageManager.changeLanguageAuto()},t.prototype.sound=function(){this.isclick_sound&&(this.isclick_sound=!1,game.SoundManager.getInstance().checkPlayEffect(),game.SoundManager.getInstance().PlayEffectStatus?(this.sound_label.text=game.LanguageManager.getString("psetting_music_off"),this.sound_on.visible=!1,this.sound_off.visible=!0):(this.sound_label.text=game.LanguageManager.getString("psetting_music_on"),this.sound_on.visible=!0,this.sound_off.visible=!1),this.isclick_sound=!0)},t.prototype.evaluate=function(){core.PlatUtils.isAndroid&&(console.log("--------------------------评价--------------------"),egret.ExternalInterface.call("sendToNative","native_evaluate"),console.log("----------------------------------------------"))},t.prototype.exit=function(){var e=game.LocalStorageUtils.getString("LoginTypestaus");null!=e&&game.LocalStorageUtils.deleteKey("LoginTypestaus"),UserInfo.Logintype==LoginTypestaus.facebookLogin?game.FacebookSDKMgr.getInstance().facebookSignOut():UserInfo.Logintype==LoginTypestaus.googleLogin&&game.GoogleSDKMgr.getInstance().googleSignOut();for(var t=[game.EPanelID.LoginMain,game.EPanelID.GameSetting],n=0;n<t.length;n++)game.PanelManager.getInstance().close(t[n],!0);game.PanelManager.getInstance().open(game.EPanelID.LoginType)},t.prototype.link=function(){core.PlatUtils.isAndroid?(console.log("--------------------------点赞--------------------"),egret.ExternalInterface.call("sendToNative","native_add_like"),console.log("----------------------------------------------")):window.open("https://www.facebook.com/BirdGoUss/")},t.prototype.follow=function(){core.PlatUtils.isAndroid?(console.log("--------------------------关注--------------------"),egret.ExternalInterface.call("sendToNative","native_add_notice"),console.log("----------------------------------------------")):window.open("https://www.instagram.com/bird_gogo/")},t.prototype.languageHandle=function(){console.log(game.LanguageManager.getString("psetting_language")),this.lab_settingTitle.text=game.LanguageManager.getString("psetting_title"),this.language_label.text=game.LanguageManager.getString("psetting_language"),game.SoundManager.getInstance().PlayEffectStatus?(this.sound_label.text=game.LanguageManager.getString("psetting_music_off"),this.sound_on.visible=!1,this.sound_off.visible=!0):(this.sound_label.text=game.LanguageManager.getString("psetting_music_on"),this.sound_on.visible=!0,this.sound_off.visible=!1),this.setState(),this.lab_rate.text=game.LanguageManager.getString("psetting_rate"),this.lab_likeus.text=game.LanguageManager.getString("psetting_likeus"),this.lab_follow.text=game.LanguageManager.getString("psetting_follow")},t}(eui.Component);__reflect(GameSetting.prototype,"GameSetting");var LoginType=function(e){function t(t,n){var i=e.call(this)||this;return i.width=t,i.height=n,i.skinName="resource/eui_skins/LoginType.exml",i.init(),i.languageHandle(),i}return __extends(t,e),t.prototype.init=function(){this.isclick=!0,this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.facebook_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.click_facebook,this),this.google_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.click_google,this),this.tourist_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.click_tourist,this),game.EventManager.getInstance().addListener(EventNotify.Language_change,this.languageHandle,this);var e=game.LocalStorageUtils.getString("touristStyle");null!=e?"hidden"==e&&(this.tourist_btn.visible=!1,this.tipImg1.visible=!1):(this.playAnim(),game.AutoLoginManager.getInstance().haveImeiData()||game.GetHttpData.getInstance().getImei()),GameConst.platform==PlatformConst.H5||GameConst.platform==PlatformConst.H5noad||GameConst.platform==PlatformConst.OVERSEAS?(this.facebook_btn.visible=!1,this.tipImg1.visible=!1,this.google_btn.visible=!1):GameConst.platform==PlatformConst.ANDROID_MOBGI&&(this.titleImg.source="birdtitle_png",this.facebook_btn.visible=!1,this.tipImg1.visible=!1,this.google_btn.visible=!1,this.tourist_btn.setImg("login_btn_bg_png"))},t.prototype.saveLoginStatus=function(e){game.LocalStorageUtils.saveString("LoginTypestaus",e)},t.prototype.click_facebook=function(){game.AutoLoginManager.getInstance().reportImei(LoginTypestaus.facebookLogin),this.saveLoginStatus(LoginTypestaus.facebookLogin.toString()),game.FacebookSDKMgr.getInstance().facebookSignIn()},t.prototype.click_google=function(){game.AutoLoginManager.getInstance().reportImei(LoginTypestaus.googleLogin),this.saveLoginStatus(LoginTypestaus.googleLogin.toString()),game.GoogleSDKMgr.getInstance().googleSignIn()},t.prototype.click_tourist=function(){console.log("click_tourist______000"),game.AutoLoginManager.getInstance().reportImei(LoginTypestaus.touristLogin),this.saveLoginStatus(LoginTypestaus.touristLogin.toString()),console.log("click_tourist______11111"),game.AutoLoginManager.getInstance().touristLogin(),console.log("click_tourist______22222")},t.prototype.playAnim=function(){this.tipImg1.visible=!0;var e=egret.Tween.get(this.tipImg1,{loop:!0});e.to({rotation:10},500,egret.Ease.sineOut).wait(500).to({rotation:-10},1e3,egret.Ease.sineOut).wait(500).to({rotation:0},500)},t.prototype.remove=function(){this.tipImg1.visible&&(this.tipImg1.rotation=0,egret.Tween.removeAllTweens()),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.facebook_btn.removeEventListener(egret.TouchEvent.TOUCH_END,this.click_facebook,this),this.google_btn.removeEventListener(egret.TouchEvent.TOUCH_END,this.click_google,this),this.tourist_btn.removeEventListener(egret.TouchEvent.TOUCH_END,this.click_tourist,this),game.EventManager.getInstance().removeListener(EventNotify.Language_change,this.languageHandle,this)},t.prototype.languageHandle=function(){this.tourist_btn.visible&&(GameConst.platform==PlatformConst.ANDROID_MOBGI?this.tourist_btn.setImg("login_btn_bg_png"):this.tourist_btn.setImg("guest_btn"))},t}(eui.Component);__reflect(LoginType.prototype,"LoginType");var ConnectLoadingPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/ConnectLoadingPanelSkin.exml",t.init(),t}return __extends(t,e),t.prototype.init=function(){var e=this;this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),egret.Tween.get(this.circle,{loop:!0}).to({rotation:360},2e3,egret.Ease.sineIn);var t=egret.Tween.get(this.dian,{loop:!0});t.set({source:"loadingImg_json.load_dian1"}).wait(800).set({source:"loadingImg_json.load_dian2"}).wait(800).set({source:"loadingImg_json.load_dian3"}).wait(800),this.AminTimeout=setTimeout(function(){e.data&&(clearTimeout(e.AminTimeout),e.showTip())},3e3)},t.prototype.showTip=function(){var e=game.LocalStorageUtils.getString("LoginTypestaus");null!=e&&GameConst.platform==PlatformConst.OVERSEAS&&game.PanelManager.getInstance().open(game.EPanelID.LoginType),game.PanelManager.getInstance().close(game.EPanelID.ConnectLoadingPanel,!0),game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_02"),type:TipsStyle.wordType})},t.prototype.loadingData=function(){console.log(this.data);var e=this.data;"资源加载"==e.name?this.loadSource(e):"网络加载"==e.name},t.prototype.loadSource=function(e){game.ResourceManager.getInstance().loadGroups(e.group).then(function(){game.PanelManager.getInstance().open(e.panelName)})["catch"](function(){console.log("加载失败")})},t.prototype.remove=function(){egret.Tween.removeAllTweens()},t}(eui.Component);__reflect(ConnectLoadingPanel.prototype,"ConnectLoadingPanel");var DefindPanel=function(e){function t(){var t=e.call(this)||this;return t.data=null,t.skinName="resource/eui_skins/DefindPanelSkin.exml",t.init(),t}return __extends(t,e),t.prototype.init=function(){this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.close_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.close,this),this.sure_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.sure,this)},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.languageHandle(),game.EventManager.getInstance().addListener(EventNotify.Language_change,this.languageHandle,this)},t.prototype.close=function(){game.PanelManager.getInstance().close(game.EPanelID.DefindPanel,!0)},t.prototype.sure=function(){var e={sid:UserInfo.curSid},t=HttpUtil.getURL(GameConst.GAME_BUYPROP,!0,e);game.GetHttpData.getInstance().GetUserProp(t)},t.prototype.remove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.close_btn.removeEventListener(egret.TouchEvent.TOUCH_END,this.close,this),this.sure_btn.removeEventListener(egret.TouchEvent.TOUCH_END,this.sure,this),game.EventManager.getInstance().removeListener(EventNotify.Language_change,this.languageHandle,this)},t.prototype.languageHandle=function(){this.title_label.text=game.LanguageManager.getString("tips_21"),this.content_label.text=game.LanguageManager.getString("tips_19")+this.data+game.LanguageManager.getString("tips_20"),this.close_btn.setTitle(game.LanguageManager.getString("tips_22")),this.sure_btn.setTitle(game.LanguageManager.getString("tips_21"))},t}(eui.Component);__reflect(DefindPanel.prototype,"DefindPanel");var ExitPanel=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/ExitPanelSkin.exml",t.init(),t}return __extends(t,e),t.prototype.init=function(){this.back_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.back,this),this.exit_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.exit,this),this.cuo_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.back,this),this.languageHandle(),game.EventManager.getInstance().addListener(EventNotify.Language_change,this.languageHandle,this)},t.prototype.back=function(){if(UserInfo.isGame){var e=game.PanelManager.getInstance().getPanel(game.EPanelID.GameMain);e.againEvent()}game.PanelManager.getInstance().close(game.EPanelID.ExitPanel)},t.prototype.exit=function(){game.PanelManager.getInstance().delectAllPanel(),GameConst.platform==PlatformConst.ANDROID_MOBGI?HclwAndroidUtil.getInstance().exitApp():game.AndroidUtil.getInstance().quitGame()},t.prototype.languageHandle=function(){this.text_label.text=game.LanguageManager.getString("exit_title"),this.back_btn.setTitle(game.LanguageManager.getString("exit_back")),this.exit_btn.setTitle(game.LanguageManager.getString("exit_quit"))},t}(eui.Component);__reflect(ExitPanel.prototype,"ExitPanel");var TipsShare=function(e){function t(){var t=e.call(this)||this;return t.skinName="TipsShareSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.btn_facebook.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFacebookBtnClick,this),this.btn_instagram.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onInstagramBtnClick,this),this.image_mask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMaskClick,this),egret.Tween.get(this.group_share).set({scaleX:0,scaleY:0}).to({scaleX:1,scaleY:1},300)},t.prototype.onFacebookBtnClick=function(){if(console.log("facebookBtnclick"),console.log(this.data),null!=this.data)switch(this.data){case game.ESharePosition.MainPlusDiamond:game.FacebookSDKMgr.getInstance().facebookShare(game.ESharePosition.MainPlusDiamond);break;case game.ESharePosition.GameBackLife:game.FacebookSDKMgr.getInstance().facebookShare(game.ESharePosition.GameBackLife)}},t.prototype.onInstagramBtnClick=function(){console.log("instagramBtnclick"),game.InstagramSDKMgr.getInstance().instagramShare()},t.prototype.onMaskClick=function(){var e=this;egret.Tween.get(this.group_share).set({scaleX:1,scaleY:1}).to({scaleX:0,scaleY:0},300).call(function(){game.PanelManager.getInstance().close(game.EPanelID.TipsShare,!0),e.btn_facebook.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onFacebookBtnClick,e),e.btn_instagram.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onInstagramBtnClick,e),e.image_mask.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.onMaskClick,e)})},t}(eui.Component);__reflect(TipsShare.prototype,"TipsShare",["eui.UIComponent","egret.DisplayObject"]);var LoadingMainUI=function(e){function t(){var t=e.call(this)||this;return t.PROGRESS_START=0,t.PROGRESS_LOAD_CONFIGTXT_COMPLETE=10,t.PROGRESS_LOGIN_PLATFORM=30,t.PROGRESS_LOGIN_HCLW=40,t.PROGRESS_LOAD_RES_CONFIG_COMPLETE=50,t.skinName="resource/eui_skins/LoadingMainUISkin.exml",t.init(),t}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.setProgress(this.PROGRESS_START),this.img1.mask=this.masking,GameConst.platform!=PlatformConst.DAYU?[3,2]:(window.ydChange=function(e){UserInfo.DiamondNumber+=parseInt(e),game.EventManager.getInstance().trigger(EventNotify.Update_eggNumber)},[4,RES.loadConfig("resource/extend.res.json","resource/")]);case 1:return e.sent(),this.setProgress(this.PROGRESS_LOAD_RES_CONFIG_COMPLETE),game.ResourceManager.getInstance().loadGroup(["common","login","loading","loginmain","mp3"],this,this.loadHallComplete,this.loadHallProgress),[3,15];case 2:return GameConst.platform!=PlatformConst.WEIXIN?[3,6]:[4,this.loadConfigTXT()];case 3:return e.sent(),WXProxy.instance.getLaunchOptions(),[4,WXProxy.instance.loginPlatform(null).then(this.loginWeixinPlatformCallback)];case 4:return e.sent(),this.setProgress(this.PROGRESS_LOGIN_PLATFORM),[4,RES.loadConfig("extend.res.json",WXConst.resFolderUrl)];case 5:return e.sent(),this.setProgress(this.PROGRESS_LOAD_RES_CONFIG_COMPLETE),game.ResourceManager.getInstance().loadGroup(["common","loading","loginmain","game","mp3"],this,this.loadHallComplete,this.loadHallProgress),[3,15];case 6:return GameConst.platform!=PlatformConst.TOUTIAO?[3,8]:(game.TouTiaoSDKMgr.getInstance().getLaunchOptions(),[4,this.loginTouTiao()]);case 7:return e.sent(),[3,15];case 8:return GameConst.platform!=PlatformConst.OVERSEAS?[3,10]:[4,RES.loadConfig("resource/extend.res.json","resource/")];case 9:return e.sent(),this.setProgress(this.PROGRESS_LOAD_RES_CONFIG_COMPLETE),game.ResourceManager.getInstance().loadGroup(["common","login","loading","mp3"],this,this.loadHallComplete,this.loadHallProgress),[3,15];case 10:return GameConst.platform!=PlatformConst.H5&&GameConst.platform!=PlatformConst.H5noad?[3,12]:[4,RES.loadConfig("resource/extend.res.json","resource/")];case 11:return e.sent(),this.setProgress(this.PROGRESS_LOAD_RES_CONFIG_COMPLETE),game.ResourceManager.getInstance().loadGroup(["common","login","loading","mp3"],this,this.loadHallComplete,this.loadHallProgress),[3,15];case 12:return GameConst.platform!=PlatformConst.ANDROID_MOBGI?[3,14]:[4,RES.loadConfig("resource/extend.res.json","resource/")];case 13:return e.sent(),this.setProgress(this.PROGRESS_LOAD_RES_CONFIG_COMPLETE),game.ResourceManager.getInstance().loadGroup(["common","login","loading","loginmain","mp3"],this,this.loadHallComplete,this.loadHallProgress),[3,15];case 14:console.log("初始化失败"),e.label=15;case 15:return[2]}})})},t.prototype.loadHallProgress=function(e){var t=this.PROGRESS_LOAD_RES_CONFIG_COMPLETE+Math.round((100-this.PROGRESS_LOAD_RES_CONFIG_COMPLETE)*e.itemsLoaded/e.itemsTotal);this.setProgress(t)},t.prototype.loadHallComplete=function(){var e=setTimeout(function(){clearTimeout(e),game.PanelManager.getInstance().close(game.EPanelID.LoadingMainUI),game.AutoLoginManager.getInstance().autoLogin()},1e3)},t.prototype.setProgress=function(e){console.log(e),this.masking.width=e/100*(this.loadbarBg.width-62),this.proslabel.text=e+"%"},t.prototype.loadConfigTXT=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n;return __generator(this,function(i){switch(i.label){case 0:return GameConst.platform!=PlatformConst.WEIXIN?[3,2]:(e=WXConst.wxConfigUrl+"?"+(new Date).getTime(),[4,HttpUtil.loadGet(e,null)]);case 1:t=i.sent(),t&&(n=JSON.parse(t+""),WXConst.showWXJumpMiniProgramBtn=n.wx.showWXJumpMiniProgramBtn,WXConst.giftPackage=n.wx.gift,WXConst.mainshare=n.wx.mainshare),this.setProgress(this.PROGRESS_LOAD_CONFIGTXT_COMPLETE),i.label=2;case 2:return[2]}})})},t.prototype.loginWeixinPlatformCallback=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,i,a,o;return __generator(this,function(s){switch(s.label){case 0:return t=RoleInfo.getInstance(),n={code:e.code,appId:WXProxy.instance.appId},t.inviteUid&&""!=t.inviteUid&&(n.invite=t.inviteUid),i=HttpUtil.getURL(GameConst.GAME_LOGIN,!1,n),[4,HttpUtil.loadGet(i,null)];case 1:return a=s.sent(),o=JSON.parse(a+""),t.openId=o.data.openid,HttpUtil.sessionKey=o.data.sessionKey,game.LocalStorageUtils.saveString("sessionKey",o.data.sessionKey),UserInfo.userID=o.data.uid,UserInfo.isNew=o.data.isNew,[2]}})})},t.prototype.loginTouTiao=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,game.TouTiaoSDKMgr.getInstance().loginPlatform(!1).then(this.loginTouTiaoSuccess.bind(this))["catch"](this.loginTouTiaoFail.bind(this))];case 1:return e.sent(),[2]}})})},t.prototype.loginTouTiaoSuccess=function(e){return __awaiter(this,void 0,void 0,function(){var t,n,i,a,o,s=this;return __generator(this,function(r){switch(r.label){case 0:return this.setProgress(this.PROGRESS_LOGIN_PLATFORM),t=RoleInfo.getInstance(),n={channel:"tt"},e.code&&(n.code=e.code),e.anonymousCode&&(n.anonymous_code=e.anonymousCode),t.inviteUid&&""!=t.inviteUid&&(n.invite=t.inviteUid),i=HttpUtil.getURL(GameConst.GAME_LOGIN,!1,n),[4,HttpUtil.loadGet(i,null)["catch"](function(){s.loginTouTiaoFail.bind(s)})];case 1:return a=r.sent(),o=JSON.parse(a+""),t.openId=o.data.openid,HttpUtil.sessionKey=o.data.sessionKey,game.LocalStorageUtils.saveString("sessionKey",o.data.sessionKey),UserInfo.userID=o.data.uid,UserInfo.isNew=o.data.isNew,this.setProgress(this.PROGRESS_LOGIN_HCLW),[4,this.loadTouTiaoExtRes()];case 2:return r.sent(),[2]}})})},t.prototype.loadTouTiaoExtRes=function(){return __awaiter(this,void 0,void 0,function(){var e=this;return __generator(this,function(t){return RES.loadConfig("extend.res.json",WXConst.resFolderUrl).then(function(){e.setProgress(e.PROGRESS_LOAD_RES_CONFIG_COMPLETE),game.ResourceManager.getInstance().loadGroup(["common","loading","loginmain","game","mp3"],e,e.loadHallComplete,e.loadHallProgress)})["catch"](this.loadTouTiaoExtResFail.bind(this)),[2]})})},t.prototype.loadTouTiaoExtResFail=function(){var e=this;game.TouTiaoSDKMgr.getInstance().showModal("加载资源失败,请重试","","确定",function(){e.loadTouTiaoExtRes()},!0,"取消",function(){game.TouTiaoSDKMgr.getInstance().exitMiniProgram()})},t.prototype.loginTouTiaoFail=function(){var e=this;game.TouTiaoSDKMgr.getInstance().showModal("登录失败,请重试","","确定",function(){e.loginTouTiao()},!0,"取消",function(){game.TouTiaoSDKMgr.getInstance().exitMiniProgram()})},t}(eui.Component);__reflect(LoadingMainUI.prototype,"LoadingMainUI");var LoginMain=function(e){function t(t,n){var i=e.call(this)||this;return i.uinum=0,i.scrollIndex=0,i.selectIndex=0,i.startRecordSeconds=0,i.isFinishRecordByEnterGame=!1,i.width=t,i.height=n,i.skinName="resource/eui_skins/LoginMainSkin.exml",i.judgePlatform(),i.init(),i}return __extends(t,e),t.prototype.judgePlatform=function(){PlatformManager.changeUI(this.DayuGroup,this.OverseaGroup),GameConst.platform==PlatformConst.WEIXIN?(WXConst.giftPackage||(this.gift_group.visible=!1),this.Title_Img.source="bean_png",this.Title_Img.y=120,this.daminds.x=10,this.daminds.y=60,this.setting_btn.visible=!1,this.adddamindnum.visible=!1,WXProxy.instance.createBannerAd()):GameConst.platform==PlatformConst.TOUTIAO?(this.Title_Img.source="bean_png",this.Title_Img.y=120,this.daminds.x=10,this.daminds.y=60,this.setting_btn.visible=!1,this.adddamindnum.visible=!1,game.TouTiaoSDKMgr.getInstance().createBannerAd()):GameConst.platform==PlatformConst.DAYU?(this.OverseaBtns.removeChildAt(3),this.Title_Img.source="birdtitle_png",this.Title_Img.y=90,game.EventManager.getInstance().addListener(EventNotify.Update_eggNumber,this.updateNumber,this)):GameConst.platform==PlatformConst.H5?(this.gift_group.visible=!1,this.adddamindnum.visible=!1,console.log("show bannerad"),document.getElementById("banneradbox")&&(document.getElementById("banneradbox").style.display="block")):GameConst.platform==PlatformConst.H5noad?(this.gift_group.visible=!1,this.adddamindnum.visible=!1):GameConst.platform==PlatformConst.ANDROID_MOBGI&&(this.OverseaBtns.removeChildAt(3),this.Title_Img.source="birdtitle_png",this.Title_Img.y=90,this.gift_group.visible=!1,this.adddamindnum.visible=!1)},t.prototype.Anim=function(){this.turntabletan_img.visible&&(this.turntabletan_img.scaleX=1,this.turntabletan_img.scaleY=1,this.tw=egret.Tween.get(this.turntabletan_img,{loop:!0}),this.tw.to({scaleX:.9,scaleY:.9},800,egret.Ease.sineIn).to({scaleX:1,scaleY:1},800,egret.Ease.sineOut))},t.prototype.playAnimation=function(){this.award_group.visible&&(this.award_group.rotation=0,this.tw1=egret.Tween.get(this.award_group,{loop:!0}),this.tw1.to({rotation:3},500,egret.Ease.sineOut).wait(500).to({rotation:-3},1e3,egret.Ease.sineOut).wait(500).to({rotation:0},500))},t.prototype.giftAnim=function(){this.gift_group.scaleX=1,this.gift_group.scaleY=1,this.tw3=egret.Tween.get(this.gift_group,{loop:!0}),this.tw3.to({scaleX:.9,scaleY:.9},1e3,egret.Ease.sineIn).wait(200).to({scaleX:1,scaleY:1},1e3,egret.Ease.sineOut)},t.prototype.gift=function(){game.GetHttpData.getInstance().h5GetBury(UserInfo.buryName.Limited_Skin_Click,0),this.getInviteTaskInfos(function(){game.PanelManager.getInstance().open(game.EPanelID.FriendHelp,"FriendHelp")})},t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.initSkin(),this.getUserinfo(),this.getTaskInfos(),this.getInviteTaskInfos(),this.setUid(),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.buyskinbtn.addEventListener(egret.TouchEvent.TOUCH_END,this.buyskin,this),this.shareBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.shareBtnClick,this),this.gift_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.gift,this),GameConst.platform==PlatformConst.DAYU?UserInfo.RankType=2:UserInfo.RankType=1,this.rankBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.rankingListBtnClick,this),this.turntable_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.OpenReward,this),this.adddamindnum.addEventListener(egret.TouchEvent.TOUCH_END,this.show_store,this),this.start_game_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.startGameBtnClick,this),this.video_play_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.startgame,this),this.btn_pve.addEventListener(egret.TouchEvent.TOUCH_TAP,this.pveBtnClick,this),this.btn_pve_video.addEventListener(egret.TouchEvent.TOUCH_TAP,this.pveVideoBtnClick,this),this.award.addEventListener(egret.TouchEvent.TOUCH_END,this.gainDaimondByVideo,this),this.setting_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.click_setting,this),this.sign_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.clickSign,this),this.task_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.clickTask,this),this.scrollSkin.addEventListener(eui.UIEvent.CHANGE_START,this.onChangeStart,this),this.scrollSkin.addEventListener(eui.UIEvent.CHANGE_END,this.onChangeEnd,this),this.scrollSkin.addEventListener(egret.TouchEvent.CHANGE,this.onChange,this),this.scrollSkin.bounces=!0,game.GoogleSDKMgr.getInstance().initComplete(),game.GoogleAdsSDKMgr.getInstance().showBanner(),this.languageHandle(),game.EventManager.getInstance().addListener(EventNotify.Language_change,this.languageHandle,this),[2]})})},t.prototype.setUid=function(){game.GoogleAdsSDKMgr.getInstance().initVideoEnv(UserInfo.userID)},t.prototype.initSkin=function(){if(0!=UserInfo.curSid){var e=this.scrollSkin;e.viewport.scrollH=UserInfo.SkinPosition,this.selectIndex=SkinInfoManager.getInstance().getSkinIndex(UserInfo.curSid)}else SnakeConst.INIT_BODY_LENGTH=5,this.effectGroup.visible=!1,UserInfo.curSid=0,this.selectIndex=0},t.prototype.playAnim=function(e){void 0===e&&(e=!1),this.updateNumber(),e&&(this.awardRedPoint.visible=!1,this.award_group.visible=!1,this.award_group.rotation=0,egret.Tween.removeTweens(this.tw1))},t.prototype.updateNumber=function(){this.giftAnim(),this.Anim(),this.playAnimation(),GameConst.platform==PlatformConst.ANDROID_MOBGI||GameConst.platform==PlatformConst.OVERSEAS||GameConst.platform==PlatformConst.WEIXIN||GameConst.platform==PlatformConst.TOUTIAO||GameConst.platform==PlatformConst.H5||GameConst.platform==PlatformConst.H5noad?this.numbers.text=UserInfo.DiamondNumber.toString():GameConst.platform==PlatformConst.DAYU&&(this.eggNum_label.text=UserInfo.DiamondNumber.toString(),this.eggbg_width(this.eggNum_label.text))},t.prototype.setSignUI=function(){if(SignManager.getInstance().isIn7Days())if(SignManager.getInstance().getSignInCount()<7){this.signGroup.visible=!0;var e=SignManager.getInstance().getNextReward();this.daysLabel.text=game.LanguageManager.getString("day_"+SignManager.getInstance().getNextSignDaysCount()),e&&(this.sign_btn.setImg(e.getLoginViewImg()),e.isRewardDiamond()?this.sign_btn.setTitle(e.num.toString()):e.isRewardSkin()&&this.sign_btn.setTitle("")),game.DateUtil.isSameDayNow(1e3*SignManager.getInstance().getLastSignTime())?this.signRedPoint.visible=!1:this.signRedPoint.visible=!0,game.DateUtil.need7DaysTipsToday()&&(game.PanelManager.getInstance().open(game.EPanelID.GameSignInDays,"GameSignInDays"),game.DateUtil.save7DaysTipsLastTime())}else this.signGroup.visible=!1;else{if(this.signGroup.visible=!1,SignManager.getInstance().getIsLoginReward()){if(SignManager.getInstance().getRewardEveryDay()>0){var t="+"+SignManager.getInstance().getRewardEveryDay();game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:t,type:TipsStyle.getDiamond})}return}game.ResourceManager.getInstance().loadResource("signIn").then(function(){game.PanelManager.getInstance().open(game.EPanelID.GameSignIn,SignManager.getInstance().getRewardEveryDay())})["catch"](function(){console.log("加载失败")})}},t.prototype.getUserinfo=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n=this;return __generator(this,function(i){return e=HttpUtil.getURL(GameConst.USER_GETINFO,!0),console.log("getUserinfo___"+e),t=this,HttpManager.httpGET(e,function(e){if(e&&e.target&&e.target.response){console.log("getUserinfo___"+e.target.response);var t=JSON.parse(e.target.response),i=t.code;i=game.GetHttpData.getInstance().judgeCode(i,t),200==i?(GameConst.platform==PlatformConst.DAYU&&(UserInfo.Nick=t.data.nick),n.userInfoData(t),n.initSkinInfos(t),n.setSkinsView()):MsgUtil.GetInstance().CodeExplain(i)}},function(e){game.PanelManager.getInstance().open(game.EPanelID.ConnectLoadingPanel,"异常")},this),[2]})})},t.prototype.userInfoData=function(e){if(GameConst.platform==PlatformConst.DAYU)UserInfo.DiamondNumber=e.data.ydNum,this.turntabletan_dayu_img.visible=e.data.do_zp,UserInfo.AnimStatus.StopFoxAnim=!0;else{UserInfo.DiamondNumber=e.data.diamond,this.turntabletan_img.visible=e.data.do_zp;var t=e.data.share.limit;this.show_numLabel.text="+"+e.data.share.award;var n=e.data.share.maxLimit;t>=n?(this.shareReward_group.visible=!1,UserInfo.AnimStatus.StopShareAnim=!0):(UserInfo.AnimStatus.StopShareAnim=!1,WXConst.mainshare||GameConst.platform!=PlatformConst.WEIXIN?GameConst.platform==PlatformConst.H5||GameConst.platform==PlatformConst.H5noad?this.shareReward_group.visible=!1:this.shareReward_group.visible=!0:this.shareReward_group.visible=!1);var i=e.data.ad.getCount;this.free_label.text="+"+i;var a=e.data.ad.limit,o=e.data.ad.limitMax;a>=o?UserInfo.AnimStatus.StopFoxAnim=!0:UserInfo.AnimStatus.StopFoxAnim=!1}this.playAnim(UserInfo.AnimStatus.StopFoxAnim),SignManager.getInstance().initSignInfo(e),this.setSignUI(),UserInfo.isQAD=e.data.isQAD,UserInfo.isQAD?game.GoogleAdsSDKMgr.getInstance().hideBanner():game.GoogleAdsSDKMgr.getInstance().showBanner()},t.prototype.initSkinInfos=function(e){var t=[],n=[],i=[],a=[];if(e&&e.data){if(e.data.propList&&e.data.propList.length>0)for(var o=0;o<e.data.propList.length;o++){var s=SkinInfo.convert(e.data.propList[o]);t.push(s)}if(e.data.zpPropList&&e.data.zpPropList.length>0)for(var o=0;o<e.data.zpPropList.length;o++){var s=SkinInfo.convert(e.data.zpPropList[o]);n.push(s),s.isGet&&s.isValid()&&!this.isInSkinInfoArray(t,s)&&t.push(s)
}if(e.data.signPropList&&e.data.signPropList.length>0)for(var o=0;o<e.data.signPropList.length;o++){var s=SkinInfo.convert(e.data.signPropList[o]);i.push(s),s.isGet&&s.isValid()&&!this.isInSkinInfoArray(t,s)&&t.push(s)}if(e.data.invitePropList&&e.data.invitePropList.length>0)for(var o=0;o<e.data.invitePropList.length;o++){var s=SkinInfo.convert(e.data.invitePropList[o]);a.push(s),s.isGet&&s.isValid()&&!this.isInSkinInfoArray(t,s)&&t.push(s)}}SkinInfoManager.getInstance().setSkinInfos(t),SkinInfoManager.getInstance().setLotterySkinInfos(n),SkinInfoManager.getInstance().setSignSkinInfos(i),SkinInfoManager.getInstance().setInviteSkinInfos(a)},t.prototype.isInSkinInfoArray=function(e,t){for(var n=0;n<e.length;n++)if(t.sid==e[n].sid)return!0;return!1},t.prototype.setSkinsView=function(){this.skinlists(SkinInfoManager.getInstance().getSkinInfos()),this.skinitem(),this.setSelectSkinInfoUI()},t.prototype.gainDaimondByVideo=function(){if(GameConst.platform==PlatformConst.ANDROID_MOBGI)this.invokeMobgiAdWhenGainDaimond();else if(GameConst.platform==PlatformConst.DAYU||GameConst.platform==PlatformConst.H5||GameConst.platform==PlatformConst.H5noad){game.GetHttpData.getInstance().h5GetBury("Bird_Ad",0);game.H5externalAndroid.getInstance().showVideo();window.showVideoAd=function(e){e?(console.log("freead success"),game.GetHttpData.getInstance().h5GetBury("Bird_Ad",1),game.GetHttpData.getInstance().GetAdData(1)):game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})}}else console.log("gainDaimondByVideo_______000"),game.GetHttpData.getInstance().h5GetBury(UserInfo.buryName.freeClick,0),GameConst.platform==PlatformConst.OVERSEAS?(console.log("gainDaimondByVideo_______111"),game.GoogleAdsSDKMgr.getInstance().showVideo(game.EVideoPosition.GetDiamond,function(e){game.GetHttpData.getInstance().GetAdData(1)},function(e){game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})})):GameConst.platform==PlatformConst.WEIXIN?game.GetHttpData.getInstance().wxShowAd(1):GameConst.platform==PlatformConst.TOUTIAO&&game.GetHttpData.getInstance().ttShowAd(1)},t.prototype.invokeMobgiAdWhenGainDaimond=function(){function e(i){var a=i.data;game.EventManager.getInstance().removeListener(n,e,t),a.reward?game.GetHttpData.getInstance().GetAdData(1):game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})}var t=this,n=HclwAndroidNotify.VIDEO_GAIN_DAIMOND;HclwAndroidUtil.getInstance().showVideoAd(n,e)},t.prototype.eggbg_width=function(e){var t=e.length,n=53*t;n>this.egg_bgImage.width&&(this.egg_bgImage.width=n/2+100)},t.prototype.skinlists=function(e){console.log("skinlists datas____"+JSON.stringify(e));for(var t=0;t<e.length&&!(e[t].sid>7);t++){var n=new eui.Image;n.scaleX=.35,n.scaleY=.35,n.source=SkinInfo.getSkinImgName(e[t].sid),this.listSkin.addChild(n)}var i=this.listSkin.getChildAt(this.selectIndex);this.selectSkin(i),this.leftArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.previouslist,this),this.rightArrow.addEventListener(egret.TouchEvent.TOUCH_TAP,this.nextlist,this)},t.prototype.setSelectSkinInfoUI=function(){var e=SkinInfoManager.getInstance().getSkinInfos()[this.selectIndex];e.hasEffect(EffectInfo.EFFECT_TAIL)?(SnakeConst.INIT_BODY_LENGTH=e.getEffect(EffectInfo.EFFECT_TAIL),this.effectGroup.visible=!0,this.effectBg.source="skintipbg1_png",this.effectIcon.source=SkinInfo.getEffectImgName(e.sid),this.effectIcon.visible=!0,this.effectLabel1.text="+"+e.getEffect(EffectInfo.EFFECT_TAIL),this.effectLabel1.visible=!0,this.effectLabel2.visible=!1):(SnakeConst.INIT_BODY_LENGTH=5,this.effectGroup.visible=!1),e.isGet?e.isForever()||(this.effectGroup.visible=!0,this.effectBg.source="skintipbg1_png",this.effectIcon.visible=!1,this.effectLabel1.visible=!1,this.effectLabel2.visible=!0,this.effectLabel2.text=game.DateUtil.leftMinites(e.getValidPeriod())):(this.skin_paynumber.text=e.price.toString(),e.gainByAd>0&&(this.effectGroup.visible=!0,this.effectBg.source="skintipbg_png",this.effectIcon.source="skinvideo_png",this.effectIcon.visible=!0,this.effectLabel1.text="X"+e.getLeftAdTimes(),this.effectLabel1.visible=!0,this.effectLabel2.visible=!1))},t.prototype.selectSkin=function(e){console.log("selectSkin_________"),e.scaleX=.5,e.scaleY=.5,e.x=0,e.y=0,this.setSelectSkinInfoUI()},t.prototype.unselectSkin=function(e){console.log("unselectSkin_________"),e.scaleX=.35,e.scaleY=.35,e.x=.1*e.width/2,e.y=.1*e.height/2},t.prototype.move=function(){return},t.prototype.nextlist=function(){console.log("nextlist_________000");var e=this.scrollSkin;if(console.log("nextlist_____sc.viewport.scrollH____"+e.viewport.scrollH+"_sc.width_"+e.width+"_sc.viewport.contentWidth_"+e.viewport.contentWidth),!(e.viewport.scrollH+e.width>=e.viewport.contentWidth-50)&&(e.viewport.scrollH+=170,this.selectIndex<this.listSkin.numChildren-1)){var t=this.listSkin.getChildAt(this.selectIndex);this.unselectSkin(t),this.selectIndex+=1;var n=this.listSkin.getChildAt(this.selectIndex);this.selectSkin(n),this.skinitem(),UserInfo.curSid=SkinInfoManager.getInstance().getSkinInfos()[this.selectIndex].sid,UserInfo.SkinPosition=e.viewport.scrollH}},t.prototype.previouslist=function(){console.log("previouslist_________000");var e=this.scrollSkin;if(e.viewport.scrollH>=150&&(e.viewport.scrollH-=170),this.selectIndex-1>=0){var t=this.listSkin.getChildAt(this.selectIndex);if(this.unselectSkin(t),this.selectIndex-=1,this.selectIndex<0)return;var n=this.listSkin.getChildAt(this.selectIndex);this.selectSkin(n),this.skinitem(),UserInfo.curSid=SkinInfoManager.getInstance().getSkinInfos()[this.selectIndex].sid,UserInfo.SkinPosition=e.viewport.scrollH}},t.prototype.skinitem=function(){this.selectIndex<SkinInfoManager.getInstance().getSkinInfos().length&&(SkinInfoManager.getInstance().getSkinInfos()[this.selectIndex].isGet?(this.buyskinbtn.visible=!1,this.have.visible=!0,this.start_game_btn.visible=!0,this.video_play_btn.visible=!1,this.btn_pve.visible=!0,this.btn_pve_video.visible=!1):(this.buyskinbtn.visible=!0,this.have.visible=!1,this.skin_paynumber.text=SkinInfoManager.getInstance().getSkinInfos()[this.selectIndex].price.toString(),this.start_game_btn.visible=!1,this.video_play_btn.visible=!0,this.btn_pve.visible=!1,this.btn_pve_video.visible=!0))},t.prototype.startgame=function(){if(UserInfo.curSid=SkinInfoManager.getInstance().getSkinInfos()[this.selectIndex].sid,GameConst.platform==PlatformConst.ANDROID_MOBGI)this.invokeMobgiAdWhenGainSkin(UserInfo.curSid);else if(GameConst.platform==PlatformConst.DAYU||GameConst.platform==PlatformConst.H5||GameConst.platform==PlatformConst.H5noad){game.GetHttpData.getInstance().h5GetBury("Bird_Experience_Skin_Click",UserInfo.curSid);game.H5externalAndroid.getInstance().showVideo();window.showVideoAd=function(e){e?game.GetHttpData.getInstance().GetAdData(4,UserInfo.curSid):game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})}}else game.GetHttpData.getInstance().h5GetBury(UserInfo.buryName.Classic_Ad_click,0),GameConst.platform==PlatformConst.OVERSEAS?game.GoogleAdsSDKMgr.getInstance().showVideo(game.EVideoPosition.FreeSkin,function(e){game.GetHttpData.getInstance().GetAdData(4,UserInfo.curSid)},function(e){game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})}):GameConst.platform==PlatformConst.WEIXIN?game.GetHttpData.getInstance().wxShowAd(2):GameConst.platform==PlatformConst.TOUTIAO&&game.GetHttpData.getInstance().ttShowAd(2)},t.prototype.invokeMobgiAdWhenGainSkin=function(e,t){function n(e){var o=e.data;game.EventManager.getInstance().removeListener(a,n,i),o.reward?game.GetHttpData.getInstance().GetAdData(4,UserInfo.curSid,t):game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})}void 0===t&&(t=!1);var i=this,a=HclwAndroidNotify.VIDEO_GAIN_SKIN;HclwAndroidUtil.getInstance().showVideoAd(a,n)},t.prototype.startGameBtnClick=function(e){GameConst.platform!=PlatformConst.DAYU&&game.GetHttpData.getInstance().h5GetBury(UserInfo.buryName.Classic_click,0),UserInfo.curSid=SkinInfoManager.getInstance().getSkinInfos()[this.selectIndex].sid,game.GetHttpData.getInstance().GameStart()},t.prototype.pveBtnClick=function(){switch(GameConst.platform){case PlatformConst.DAYU:game.GetHttpData.getInstance().h5GetBury(UserInfo.buryName.Pve_click,0);break;case PlatformConst.TOUTIAO:}UserInfo.curSid=SkinInfoManager.getInstance().getSkinInfos()[this.selectIndex].sid,game.GetHttpData.getInstance().pveStart()},t.prototype.pveVideoBtnClick=function(){if(UserInfo.curSid=SkinInfoManager.getInstance().getSkinInfos()[this.selectIndex].sid,GameConst.platform==PlatformConst.ANDROID_MOBGI)this.invokeMobgiAdWhenGainSkin(UserInfo.curSid,!0);else if(GameConst.platform==PlatformConst.DAYU||GameConst.platform==PlatformConst.H5||GameConst.platform==PlatformConst.H5noad){game.GetHttpData.getInstance().h5GetBury("Bird_Experience_Skin_Click",UserInfo.curSid);game.H5externalAndroid.getInstance().showVideo();window.showVideoAd=function(e){e?game.GetHttpData.getInstance().GetAdData(4,UserInfo.curSid,!0):game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})}}else game.GetHttpData.getInstance().h5GetBury(UserInfo.buryName.Pve_Ad_click,0),GameConst.platform==PlatformConst.OVERSEAS?game.GoogleAdsSDKMgr.getInstance().showVideo(game.EVideoPosition.FreeSkin,function(e){game.GetHttpData.getInstance().GetAdData(4,UserInfo.curSid,!0)},function(e){game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})}):GameConst.platform==PlatformConst.WEIXIN?game.GetHttpData.getInstance().wxShowAd(8):GameConst.platform==PlatformConst.TOUTIAO&&game.GetHttpData.getInstance().ttShowAd(8)},t.prototype.recordBtnClick=function(){},t.prototype.OpenReward=function(){GameConst.platform==PlatformConst.DAYU?game.GetHttpData.getInstance().h5GetBury("Bird_Lottery",4):game.GetHttpData.getInstance().h5GetBury(UserInfo.buryName.Lottery_click,0),game.GetHttpData.getInstance().lotteryData()},t.prototype.rankingListBtnClick=function(e){GameConst.platform==PlatformConst.H5&&document.getElementById("banneradbox")&&(document.getElementById("banneradbox").style.display="none"),GameConst.platform!=PlatformConst.DAYU&&game.GetHttpData.getInstance().h5GetBury(UserInfo.buryName.Rank_click,0),GameConst.platform===PlatformConst.WEIXIN?this.wxRankingListBtnClick():GameConst.platform==PlatformConst.TOUTIAO?this.ttRankingListBtnClick():game.GetHttpData.getInstance().GetGameRankList(1,UserInfo.RankType,!0)},t.prototype.ttRankingListBtnClick=function(){game.TouTiaoSDKMgr.getInstance().hideBannerAd(),game.GetHttpData.getInstance().GetGameRankList(1,UserInfo.RankType,!0)},t.prototype.wxRankingListBtnClick=function(){WXProxy.instance.hideBannerAd(),game.ResourceManager.getInstance().loadResource("ranklist").then(function(){game.PanelManager.getInstance().open(game.EPanelID.RankList)})["catch"](function(){console.log("加载失败")})},t.prototype.buyskin=function(){var e=this.skin_paynumber.text;game.PanelManager.getInstance().open(game.EPanelID.DefindPanel,e)},t.prototype.buyskin_success=function(e){this.effectGroup.visible=!1,UserInfo.DiamondNumber=e.sumCount,this.updateNumber(),game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_04"),type:TipsStyle.wordType}),this.buyskinbtn.visible=!1,this.have.visible=!0,this.start_game_btn.visible=!0,this.video_play_btn.visible=!1,this.btn_pve.visible=!0,this.btn_pve_video.visible=!1,SkinInfoManager.getInstance().getSkinBySid(e.sid).isGet=1},t.prototype.shareBtnClick=function(){if(GameConst.platform==PlatformConst.OVERSEAS)game.PanelManager.getInstance().open(game.EPanelID.TipsShare,game.ESharePosition.MainPlusDiamond);else if(GameConst.platform==PlatformConst.WEIXIN){WXProxy.instance.share(!1);var e=setTimeout(function(){clearTimeout(e),game.GetHttpData.getInstance().GetShareData(!0,1)},2e3)}else if(GameConst.platform==PlatformConst.TOUTIAO)game.TouTiaoSDKMgr.getInstance().share(!1,"article",function(){game.GetHttpData.getInstance().GetShareData(!0,1)});else if(GameConst.platform==PlatformConst.H5){if(console.log("fuzhi"),!document.getElementById("fuzhibox")){var t=document.createElement("div");t.setAttribute("data-clipboard-text",game.LanguageManager.getString("tips_37")),t.setAttribute("id","fuzhibox"),t.style.display="none",document.body.appendChild(t);var n=new window.ClipboardJS("#fuzhibox");n.on("success",function(e){game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_369"),type:TipsStyle.wordType}),e.clearSelection()}),n.on("error",function(e){alert("浏览器不支持复制")})}document.getElementById("fuzhibox").click()}},t.prototype.show_store=function(){game.GetHttpData.getInstance().GetStoreData()},t.prototype.click_setting=function(){game.ResourceManager.getInstance().loadResource("setting").then(function(){game.PanelManager.getInstance().open(game.EPanelID.GameSetting,"setting")})["catch"](function(){console.log("加载失败")})},t.prototype.clickSign=function(){GameConst.platform!=PlatformConst.DAYU&&game.GetHttpData.getInstance().h5GetBury(UserInfo.buryName.Seven_Day_click,0),game.PanelManager.getInstance().open(game.EPanelID.GameSignInDays,"GameSignInDays")},t.prototype.remove=function(){game.EventManager.getInstance().removeListener(EventNotify.Language_change,this.languageHandle,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.shareBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.shareBtnClick,this),this.rankBtn.removeEventListener(egret.TouchEvent.TOUCH_END,this.rankingListBtnClick,this),this.adddamindnum.removeEventListener(egret.TouchEvent.TOUCH_END,this.show_store,this),this.start_game_btn.removeEventListener(egret.TouchEvent.TOUCH_END,this.startGameBtnClick,this),this.video_play_btn.removeEventListener(egret.TouchEvent.TOUCH_END,this.startgame,this),this.btn_pve.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.pveBtnClick,this),this.btn_pve_video.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.pveVideoBtnClick,this),this.award.removeEventListener(egret.TouchEvent.TOUCH_END,this.gainDaimondByVideo,this),this.setting_btn.removeEventListener(egret.TouchEvent.TOUCH_END,this.click_setting,this),this.scrollSkin.removeEventListener(eui.UIEvent.CHANGE_START,this.onChangeStart,this),this.scrollSkin.removeEventListener(eui.UIEvent.CHANGE_END,this.onChangeEnd,this),this.scrollSkin.removeEventListener(egret.TouchEvent.CHANGE,this.onChange,this)},t.prototype.languageHandle=function(){},t.prototype.onChangeStart=function(e){var t=this.scrollSkin;this.startPos=t.viewport.scrollH,this.effectGroup.visible=!1},t.prototype.onChange=function(e){var t=this.scrollSkin,n=t.viewport.scrollH;if(!(-10>=n)){var i=190,a=140.5,o=(i-a)/2,s=(i+a)/2,r=n%s,h=Math.round(n/s);if(o>=r||Math.abs(n-s*h)<=o||Math.abs(n-s)<=o){Math.abs(n-s)<=o?this.scrollIndex=1:Math.abs(n-s*h)<=o?this.scrollIndex=Math.round(n/((i+a)/2)):this.scrollIndex=n/((i+a)/2)|0,this.scrollIndex>=this.listSkin.numChildren&&(this.scrollIndex-=1);var g=this.listSkin.getChildAt(this.scrollIndex);g.scaleX=.5,g.scaleY=.5}else this.unselectAllSkin()}},t.prototype.onChangeEnd=function(e){var t=this,n=0,i=this.scrollSkin,a=i.viewport.scrollH;this.endPos=a;var o=190,s=140.5,r=(o-s)/2;if(r>=a%((o+s)/2)){var h=a/((o+s)/2)|0;h>=this.listSkin.numChildren&&(h-=1),this.selectIndex=h,n=(o+s)/2*h}else{var h=Math.round(a/((o+s)/2));h>=this.listSkin.numChildren&&(h-=1),n=(o+s)/2*h,this.selectIndex=h}var g=egret.Tween.get(i.viewport,{loop:!1});g.to({scrollH:n},50).call(function(){egret.Tween.removeTweens(i.viewport),t.unselectAllSkin();var e=t.listSkin.getChildAt(t.selectIndex);t.selectSkin(e),t.skinitem(),UserInfo.curSid=SkinInfoManager.getInstance().getSkinInfos()[t.selectIndex].sid,UserInfo.SkinPosition=n})},t.prototype.unselectAllSkin=function(){for(var e=0;e<this.listSkin.numChildren;e++){var t=this.listSkin.getChildAt(e);t.scaleX=.35,t.scaleY=.35}},t.prototype.getTaskInfos=function(e){return __awaiter(this,void 0,void 0,function(){var t,n=this;return __generator(this,function(i){return t=HttpUtil.getURL(GameConst.TASK_GET_DAILY_TASK,!0),HttpManager.httpGET(t,function(t){if(t&&t.target&&t.target.response){var i=JSON.parse(t.target.response),a=i.code;a=game.GetHttpData.getInstance().judgeCode(a,i),200==a?(TaskManager.getInstance().convert(i.data),n.setTaskUI(),null!=e&&e.apply(n)):MsgUtil.GetInstance().CodeExplain(a)}},function(e){game.PanelManager.getInstance().open(game.EPanelID.ConnectLoadingPanel,"异常")},this),[2]})})},t.prototype.getInviteTaskInfos=function(e){return __awaiter(this,void 0,void 0,function(){var t,n=this;return __generator(this,function(i){return t=HttpUtil.getURL(GameConst.GET_DAILY_INVITE_TASK,!0),HttpManager.httpGET(t,function(t){if(t&&t.target&&t.target.response){var i=JSON.parse(t.target.response),a=i.code;a=game.GetHttpData.getInstance().judgeCode(a,i),200==a?(TaskManager.getInstance().convert(i.data.inviteTask,TaskInfo.TASK_TYPE_INVITE),UserInfo.DiamondNumber=i.data.sumCount,null!=e&&e.apply(n)):MsgUtil.GetInstance().CodeExplain(a)}},function(e){game.PanelManager.getInstance().open(game.EPanelID.ConnectLoadingPanel,"异常")},this),[2]})})},t.prototype.setTaskUI=function(){},t.prototype.clickTask=function(){GameConst.platform!=PlatformConst.DAYU&&game.GetHttpData.getInstance().h5GetBury(UserInfo.buryName.Task_click,0),this.getTaskInfos(function(){game.PanelManager.getInstance().open(game.EPanelID.GameTask,"GameTask")}),GameConst.platform==PlatformConst.TOUTIAO&&game.TouTiaoSDKMgr.getInstance().hideBannerAd(),GameConst.platform==PlatformConst.H5&&(document.getElementById("banneradbox").style.display="none")},t}(eui.Component);__reflect(LoginMain.prototype,"LoginMain");var FriendHelp=function(e){function t(){var t=e.call(this)||this;return t.imgArray=new Array,t.getImgArray=new Array,t.labelArray=new Array,t.ishaveSkin=!1,t.TypeStatus={GETSTATUS:2,UNSTATUS:0},t.skinName="resource/eui_skins/FriendHelp.exml",t.init(),t}return __extends(t,e),t.prototype.init=function(){this.imgArray=[this.img1,this.img2,this.img3,this.img4,this.img5,this.img6,this.skin_img],this.getImgArray=[this.get_img1,this.get_img2,this.get_img3,this.get_img4,this.get_img5,this.get_img6,this.get_img7],this.labelArray=[this.number_label1,this.number_label2,this.number_label3,this.number_label4,this.number_label5,this.number_label6],this.back_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.back,this),this.invitation_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.invitation,this),this.invitation_btn.setTitle("邀请好友",50,8863744,!0),console.log("start.."),this.getData(),this.lightAnim()},t.prototype.getData=function(){var e=TaskManager.getInstance().getTaskInfos(TaskInfo.TASK_TYPE_INVITE);console.log(e.length);for(var t=0;t<e.length;t++){var n=e[t].state,i=e[t].reward.type;if(i==this.TypeStatus.GETSTATUS){this.skin_img.source=SkinInfo.getSkinImgName(e[t].reward.sid);var a=e[t].state;a!=this.TypeStatus.UNSTATUS&&(this.ishaveSkin=!0)}else{var o=e[t].reward.num;this.labelArray[t].text=o.toString()}console.log(n+"..."+t),n==this.TypeStatus.UNSTATUS?(this.getImgArray[t].visible=!1,this.imgArray[t].alpha=1):(this.getImgArray[t].visible=!0,this.imgArray[t].alpha=.5)}},t.prototype.lightAnim=function(){var e=this;this.light_img.alpha=1,this.light_img.x=15,this.tw=egret.Tween.get(this.light_img,{loop:!0}),this.tw.to({x:220},1e3).call(function(){e.light_img.alpha=0}).wait(100).to({x:15},1e3).call(function(){e.light_img.alpha=1})},t.prototype.back=function(){egret.Tween.removeTweens(this.tw),game.PanelManager.getInstance().close(game.EPanelID.FriendHelp,!0);var e=game.PanelManager.getInstance().getPanel(game.EPanelID.LoginMain);e.updateNumber(),this.ishaveSkin&&(e.listSkin.removeChildren(),e.getUserinfo())},t.prototype.invitation=function(){GameConst.platform==PlatformConst.WEIXIN?WXProxy.instance.share(!1):GameConst.platform==PlatformConst.TOUTIAO&&game.TouTiaoSDKMgr.getInstance().share(!1,"article",null),game.GetHttpData.getInstance().h5GetBury(UserInfo.buryName.Invite_Button_Click,0)},t}(eui.Component);__reflect(FriendHelp.prototype,"FriendHelp");var GameLotteryDraw=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/GameLotteryDrawSkin.exml",t.init(),t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.getLotteryData(this.data)},t.prototype.getLotteryData=function(e){var t=e.limit,n=t.light_star,i=t.diamond_box_limit;this.boxData(n,i),this.init_award();var a=t.free.free_zp_limit,o=t.free.free_zp_max_limit,s=t.ad.ad_zp_limit,r=t.ad.ad_zp_max_limit,h=t.zs.zs_zp_limit,g=t.zs.zs_zp_max_limit;o>a?(this.typeNumber=1,this.Free_group.visible=!0):r>s?(this.typeNumber=2,this.play_number.text=(r-s).toString()+"/"+r,this.ad_group.visible=!0):g>h||GameConst.platform==PlatformConst.DAYU?(this.typeNumber=3,this.consumeStyle(!0),this.consumeLabel().text=t.consume_diamond):this.unreward_group.visible=!0,this.tools(e.list)},t.prototype.consumeStyle=function(e){GameConst.platform==PlatformConst.DAYU?this.yudan_group.visible=e:this.diamond_group.visible=e},t.prototype.consumeLabel=function(){return GameConst.platform==PlatformConst.DAYU?this.yudan_number:this.diamond_number},t.prototype.init_award=function(){this.Free_group.visible=!1,this.ad_group.visible=!1,this.diamond_group.visible=!1,this.yudan_group.visible=!1},t.prototype.boxData=function(e,t,n){if(void 0===n&&(n=!1),e>=t?(this.isopenBox=!0,this.box_img.source="new_treasurebox2_png"):this.box_img.source="new_treasurebox1_png",!(0>=e||e>t))if(n){var i=new eui.Image;i.source="new_yellow_box_png",this.boxgroup.addChild(i)}else for(var a=0;e>a;a++){var i=new eui.Image;i.source="new_yellow_box_png",this.boxgroup.addChild(i)}},t.prototype.tools=function(e){this.boxListArr1=[],this.boxListArr2=[],this.boxListArr3=[],this.boxListArr4=[];for(var t=0;4>t;t++){var n=e[t],i=n.type,a=!1,o=0;1==i?o=n.num:2==i&&(o=n.sid,a=SkinInfoManager.getInstance().haveSkin(o));var s={type:i,number:o,ishave:a,expire:n.expire};4>t&&this.boxListArr1.push(s)}for(var r=e.length-1;r>=4;r--){var n=e[r],i=n.type,o=0,a=!1;1==i?o=n.num:2==i&&(o=n.sid,a=SkinInfoManager.getInstance().haveSkin(o));var s={type:i,number:o,ishave:a,expire:n.expire};4==r||r==e.length-1?this.boxListArr2.push(s):5==r||r==e.length-2?this.boxListArr3.push(s):r>5&&r<e.length-2&&this.boxListArr4.push(s)}for(var h=[this.boxListArr1,this.boxListArr2,this.boxListArr3,this.boxListArr4],g=[this.boxList1,this.boxList2,this.boxList3,this.boxList4],l=0;l<h.length;l++){var c=new eui.ArrayCollection(h[l]);g[l].dataProvider=c,g[l].itemRenderer=lotteryData}},t.prototype.init=function(){this.ishaveSKin=!1,this.rewardDatas={type:0,number:0},this.isstartReward=!0,this.rewardIndex=0,this.isopenBox=!1,this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.Free_group.addEventListener(egret.TouchEvent.TOUCH_END,this.run,this),GameConst.platform==PlatformConst.DAYU?this.yudan_group.addEventListener(egret.TouchEvent.TOUCH_END,this.diamondRun,this):this.diamond_group.addEventListener(egret.TouchEvent.TOUCH_END,this.diamondRun,this),this.ad_group.addEventListener(egret.TouchEvent.TOUCH_END,this.adrun,this),this.back_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.back,this),this.lightAni(),this.languageHandle(),game.EventManager.getInstance().addListener(EventNotify.Language_change,this.languageHandle,this)},t.prototype.lightAni=function(){var e=egret.Tween.get(this.light_img,{loop:!0});e.set({source:"light1_png"}).wait(800).set({source:"light2_png"}).wait(800)},t.prototype.adrun=function(){var e=this;if(this.isstartReward)if(this.isstartReward=!1,GameConst.platform==PlatformConst.ANDROID_MOBGI)this.invokeMobgiAdWhenLotteryReward(this.typeNumber);else if(GameConst.platform==PlatformConst.DAYU||GameConst.platform==PlatformConst.H5||GameConst.platform==PlatformConst.H5noad){game.GetHttpData.getInstance().h5GetBury("Bird_Lottery",1);game.H5externalAndroid.getInstance().showVideo();window.showVideoAd=function(t){t?game.GetHttpData.getInstance().getLotteryReward(e.typeNumber):(e.isstartReward=!0,game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType}))}}else game.GetHttpData.getInstance().h5GetBury(UserInfo.buryName.Lottery_Ad_click,0),GameConst.platform==PlatformConst.OVERSEAS?game.GoogleAdsSDKMgr.getInstance().showVideo(game.EVideoPosition.GetDiamond,function(t){game.GetHttpData.getInstance().getLotteryReward(e.typeNumber)},function(t){e.isstartReward=!0,game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})}):GameConst.platform==PlatformConst.WEIXIN?game.GetHttpData.getInstance().wxShowAd(3):GameConst.platform==PlatformConst.TOUTIAO&&game.GetHttpData.getInstance().ttShowAd(3)},t.prototype.invokeMobgiAdWhenLotteryReward=function(e){function t(a){var o=a.data;game.EventManager.getInstance().removeListener(i,t,n),o.reward?game.GetHttpData.getInstance().getLotteryReward(e):(n.isstartReward=!0,game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType}))}var n=this,i=HclwAndroidNotify.VIDEO_LOTTERY_REWARD;HclwAndroidUtil.getInstance().showVideoAd(i,t)},t.prototype.diamondRun=function(){var e=this;if(this.isstartReward){this.isstartReward=!1,GameConst.platform==PlatformConst.DAYU?game.GetHttpData.getInstance().h5GetBury("Bird_Lottery",3):game.GetHttpData.getInstance().h5GetBury(UserInfo.buryName.Lottery_diamond_click,0);var t=parseInt(this.consumeLabel().text);if(UserInfo.DiamondNumber<t){var n=[game.EPanelID.GameLotteryDraw];MsgUtil.GetInstance().CodeExplain(304,n),setTimeout(function(){e.isstartReward=!0},2e3)}else game.GetHttpData.getInstance().getLotteryReward(this.typeNumber)}},t.prototype.run=function(){this.isstartReward&&(this.isstartReward=!1,game.GetHttpData.getInstance().getLotteryReward(this.typeNumber))},t.prototype.timerFunc=function(e){var t=egret.Tween.get(this.choose_img);t.to({x:200,y:39},10),t.wait(100),t.to({x:353,y:39},10),t.wait(100),t.to({x:506,y:39},10),t.wait(100),t.to({x:506,y:193},10),t.wait(100),t.to({x:506,y:347},10),t.wait(100),t.to({x:506,y:501},10),t.wait(100),t.to({x:353,y:501},10),t.wait(100),t.to({x:200,y:501},10),t.wait(100),t.to({x:47,y:501},10),t.wait(100),t.to({x:47,y:347},10),t.wait(100),t.to({x:47,y:193},10),t.wait(100),t.to({x:47,y:39},10),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.Continue,this)},t.prototype.Continue=function(){this.newtimer=new egret.Timer(1200,1),this.newtimer.addEventListener(egret.TimerEvent.TIMER,this.NewtimerFunc,this),this.newtimer.start()},t.prototype.NewtimerFunc=function(e){var t=egret.Tween.get(this.choose_img);1==this.rewardIndex?(t.to({x:47,y:39},10),t.wait(100),t.to({x:244,y:39},10)):2==this.rewardIndex?(t.to({x:47,y:39},10),t.wait(100),t.to({x:244,y:39},10),t.wait(100),t.to({x:353,y:39},10)):3==this.rewardIndex?(t.to({x:47,y:39},10),t.wait(100),t.to({x:244,y:39},10),t.wait(100),t.to({x:353,y:39},10),t.wait(100),t.to({x:506,y:39},10)):4==this.rewardIndex?(t.to({x:47,y:39},10),t.wait(100),t.to({x:244,y:39},10),t.wait(100),t.to({x:353,y:39},10),t.wait(100),t.to({x:506,y:39},10),t.wait(100),t.to({x:506,y:193},10)):5==this.rewardIndex?(t.to({x:47,y:39},10),t.wait(100),t.to({x:244,y:39},10),t.wait(100),t.to({x:353,y:39},10),t.wait(100),t.to({x:506,y:39},10),t.wait(100),t.to({x:506,y:193},10),t.wait(100),t.to({x:506,y:318},10)):6==this.rewardIndex?(t.to({x:47,y:39},10),t.wait(100),t.to({x:244,y:39},10),t.wait(100),t.to({x:353,y:39},10),t.wait(100),t.to({x:506,y:39},10),t.wait(100),t.to({x:506,y:193},10),t.wait(100),t.to({x:506,y:318},10),t.wait(100),t.to({x:506,y:501},10)):7==this.rewardIndex?(t.to({x:47,y:39},10),t.wait(100),t.to({x:244,y:39},10),t.wait(100),t.to({x:353,y:39},10),t.wait(100),t.to({x:506,y:39},10),t.wait(100),t.to({x:506,y:193},10),t.wait(100),t.to({x:506,y:318},10),t.wait(100),t.to({x:506,y:501},10),t.wait(100),t.to({x:353,y:501},10)):8==this.rewardIndex?(t.to({x:47,y:39},10),t.wait(100),t.to({x:244,y:39},10),t.wait(100),t.to({x:353,y:39},10),t.wait(100),t.to({x:506,y:39},10),t.wait(100),t.to({x:506,y:193},10),t.wait(100),t.to({x:506,y:318},10),t.wait(100),t.to({x:506,y:501},10),t.wait(100),t.to({x:353,y:501},10),t.wait(100),t.to({x:244,y:501},10)):9==this.rewardIndex?(t.to({x:47,y:39},10),t.wait(100),t.to({x:244,y:39},10),t.wait(100),t.to({x:353,y:39},10),t.wait(100),t.to({x:506,y:39},10),t.wait(100),t.to({x:506,y:193},10),t.wait(100),t.to({x:506,y:318},10),t.wait(100),t.to({x:506,y:501},10),t.wait(100),t.to({x:353,y:501},10),t.wait(100),t.to({x:244,y:501},10),t.wait(100),t.to({x:47,y:501},10)):10==this.rewardIndex?(t.to({x:47,y:39},10),t.wait(100),t.to({x:244,y:39},10),t.wait(100),t.to({x:353,y:39},10),t.wait(100),t.to({x:506,y:39},10),t.wait(100),t.to({x:506,y:193},10),t.wait(100),t.to({x:506,y:318},10),t.wait(100),t.to({x:506,y:501},10),t.wait(100),t.to({x:353,y:501},10),t.wait(100),t.to({x:244,y:501},10),t.wait(100),t.to({x:47,y:501},10),t.wait(100),t.to({x:47,y:318},10)):11==this.rewardIndex&&(t.to({x:47,y:39},10),t.wait(100),t.to({x:244,y:39},10),t.wait(100),t.to({x:353,y:39},10),t.wait(100),t.to({x:506,y:39},10),t.wait(100),t.to({x:506,y:193},10),t.wait(100),t.to({x:506,y:318},10),t.wait(100),t.to({x:506,y:501},10),t.wait(100),t.to({x:353,y:501},10),t.wait(100),t.to({x:244,y:501},10),t.wait(100),t.to({x:47,y:501},10),t.wait(100),t.to({x:47,y:318},10),t.wait(100),t.to({x:47,y:193},10)),this.newtimer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.Shownotice,this)},t.prototype.Shownotice=function(){var e=100*(this.rewardIndex+5);this.showTips(e)},t.prototype.showTips=function(e,t){var n=this;void 0===t&&(t=!1),this.back_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.back,this);var i=setTimeout(function(){if(clearTimeout(i),n.isopenBox?n.isopenBox&&(n.isopenBox=!1,game.GetHttpData.getInstance().openBoxReward(),n.boxgroup.removeChildren(),n.box_img.source="treasurebox1_png"):n.isstartReward=!0,1==n.rewardDatas.type){var e="+"+n.rewardDatas.number;game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:e,type:TipsStyle.getDiamond})}else if(2==n.rewardDatas.type){n.isSkin();var t=SkinInfo.getHeadImgName(n.rewardDatas.getProp);game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{type:TipsStyle.getSKin,img:t}),n.ishaveSKin=!0}},e)},t.prototype.isSkin=function(){if(this.rewardIndex<4){this.boxListArr1[this.rewardIndex].ishave=!0;var e=new eui.ArrayCollection(this.boxListArr1);this.boxList1.dataProvider=e,this.boxList1.itemRenderer=lotteryData}else if(4==this.rewardIndex||11==this.rewardIndex){4==this.rewardIndex?this.boxListArr2[1].ishave=!0:11==this.rewardIndex&&(this.boxListArr2[0].ishave=!0);var e=new eui.ArrayCollection(this.boxListArr2);this.boxList2.dataProvider=e,this.boxList2.itemRenderer=lotteryData}else if(5==this.rewardIndex||10==this.rewardIndex){5==this.rewardIndex?this.boxListArr3[1].ishave=!0:10==this.rewardIndex&&(this.boxListArr3[0].ishave=!0);var e=new eui.ArrayCollection(this.boxListArr3);this.boxList3.dataProvider=e,this.boxList3.itemRenderer=lotteryData}else if(this.rewardIndex>5&&this.rewardIndex<10){var t=this.boxListArr4.length-1-this.rewardIndex%6;this.boxListArr4[t].ishave=!0;var e=new eui.ArrayCollection(this.boxListArr4);this.boxList4.dataProvider=e,this.boxList4.itemRenderer=lotteryData}},t.prototype.runAnim=function(){this.startRun(),this.timer=new egret.Timer(1200,4),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer.start()},t.prototype.startRun=function(){this.back_btn.removeEventListener(egret.TouchEvent.TOUCH_END,this.back,this),this.choose_img.visible||(this.choose_img.visible=!0);
var e=egret.Tween.get(this.choose_img);e.to({x:200,y:39},10),e.wait(100),e.to({x:353,y:39},10),e.wait(100),e.to({x:506,y:39},10),e.wait(100),e.to({x:506,y:193},10),e.wait(100),e.to({x:506,y:347},10),e.wait(100),e.to({x:506,y:501},10),e.wait(100),e.to({x:353,y:501},10),e.wait(100),e.to({x:200,y:501},10),e.wait(100),e.to({x:47,y:501},10),e.wait(100),e.to({x:47,y:347},10),e.wait(100),e.to({x:47,y:193},10),e.wait(100),e.to({x:47,y:39},10)},t.prototype.startReward=function(e){var t=e.limit;if(this.Free_group.visible){var n=t.free.free_zp_limit,i=t.free.free_zp_max_limit;n>=i&&(this.Free_group.visible=!1,this.ad_group.visible=!0,this.typeNumber=2)}else if(this.ad_group.visible){var a=t.ad.ad_zp_limit,o=t.ad.ad_zp_max_limit;this.play_number.text=(o-a).toString()+"/"+o,a>=o&&(this.ad_group.visible=!1,this.consumeStyle(!0),this.consumeLabel().text=e.list.consume_diamond,this.typeNumber=3)}else if(this.diamond_group.visible||this.yudan_group.visible){var s=t.zs.zs_zp_limit,r=t.zs.zs_zp_max_limit;if(this.consumeLabel().text=e.list.consume_diamond,(GameConst.platform==PlatformConst.OVERSEAS||GameConst.platform==PlatformConst.WEIXIN||GameConst.platform==PlatformConst.TOUTIAO)&&s>=r){this.consumeStyle(!1),this.unreward_group.visible=!0;var h=game.PanelManager.getInstance().getPanel(game.EPanelID.LoginMain);h.turntabletan_img.visible=!1}}var g=t.light_star,l=t.diamond_box_limit;this.boxData(g,l,!0);var c=e.list;this.rewardIndex=c.position,UserInfo.DiamondNumber=c.get.diamond,1==c.reward.type?this.rewardDatas={type:c.reward.type,number:c.reward.num}:2==c.reward.type&&(this.rewardDatas={type:c.reward.type,getProp:c.get.getProp})},t.prototype.back=function(){game.PanelManager.getInstance().close(game.EPanelID.GameLotteryDraw,!0);var e=game.PanelManager.getInstance().getPanel(game.EPanelID.LoginMain);e.updateNumber(),this.ishaveSKin&&(e.listSkin.removeChildren(),e.getUserinfo())},t.prototype.openAnim=function(e){var t=this;this.boxClip?(this.boxClip.visible=!0,this.boxClip.gotoAndPlay(1,1)):this.boxClip=MoviceClipManager.getInstance().createMoviceClipByRes("BaoXiangAnim_json","BaoXiangAnim_png","action"),this.boxClip.scaleX=1,this.boxClip.scaleY=1,this.boxClip.anchorOffsetX=100,this.boxClip.anchorOffsetY=100,this.boxClip.x=this.width/2-250,this.boxClip.y=100,this.boxClip.$setTouchEnabled(!1),this.boxClip.play(1),this.Reward_group.addChild(this.boxClip);var n=setTimeout(function(){clearTimeout(n),game.TipsManager.getInstance().show(game.ETipsID.TipsDemond,{title:e}),setTimeout(function(){t.boxClip.visible=!1},1500)},1500)},t.prototype.remove=function(){game.EventManager.getInstance().removeListener(EventNotify.Language_change,this.languageHandle,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.ad_group.removeEventListener(egret.TouchEvent.TOUCH_END,this.adrun,this),this.back_btn.removeEventListener(egret.TouchEvent.TOUCH_END,this.back,this),GameConst.platform==PlatformConst.DAYU?this.yudan_group.removeEventListener(egret.TouchEvent.TOUCH_END,this.diamondRun,this):this.diamond_group.removeEventListener(egret.TouchEvent.TOUCH_END,this.diamondRun,this),egret.Tween.removeAllTweens()},t.prototype.languageHandle=function(){this.free_title.text=game.LanguageManager.getString("tips_23"),this.reward_title.text=game.LanguageManager.getString("tips_24")},t}(eui.Component);__reflect(GameLotteryDraw.prototype,"GameLotteryDraw");var GameMain=function(e){function t(){var t=e.call(this)||this;return t.isGameFinsh=!1,t.initSpeed=8,t.frozenSpeed=6,t.upSpeed=12,t.speed=t.initSpeed,t.lineWidth=0,t.clearObstacleTimeConst=3,t.staticSnakeY=0,t.snakeBodyArray=[],t.obstacleArray=[],t.pointArray=[],t.separateShortArr=[],t.obstacleImg="",t.propMagnetArr=[],t.propRocketArr=[],t.propBombArr=[],t.scrollLengthTemp=0,t.isSnakeMoving=!1,t.clearObstacleTime=0,t.propMagnetEffectTime=0,t.propRocketEffectTime=0,t.propFrozenEffectTime=0,t.propShieldEffectTime=0,t.lastMouseMovingX=0,t.firstHit=!0,t.lineTypeArr=[],t.route=new eui.ArrayCollection,t.snakeBodyRoute=new eui.ArrayCollection,t.firstLineCount=[1,2,1,2,1],t.rowCount=0,t.mouceTouchStageX=0,t.hitBlock=0,t.calcPointTimer=new egret.Timer(15,0),t.speedAddTimer=new egret.Timer(1e3,0),t.data=null,t.isRecording=!1,t.startRecordSeconds=0,t.finishRecordSeconds=0,t.skinName="resource/eui_skins/GameMainSkin.exml",t.width=game.StageUtils.getInstance().stageWidth,t.height=game.StageUtils.getInstance().stageHeight,GameConst.platform==PlatformConst.WEIXIN?WXProxy.instance.hideBannerAd():GameConst.platform==PlatformConst.TOUTIAO?game.TouTiaoSDKMgr.getInstance().hideBannerAd():GameConst.platform==PlatformConst.H5&&(document.getElementById("banneradbox").style.display="none"),t.init(),t}return __extends(t,e),t.prototype.init=function(){UserInfo.isGame=!0,this.rowCount=0,GameLogic.getInstance().currentScore=0,GameLogic.getInstance().currentBeanCount=SnakeConst.INIT_BODY_LENGTH,this.isGameFinsh=!1,this.speed=this.initSpeed,this.lineWidth=0,this.staticSnakeY=0,this.snakeBodyArray=[],this.obstacleArray=[],this.pointArray=[],this.separateShortArr=[],this.propMagnetArr=[],this.propRocketArr=[],this.propBombArr=[],this.scrollLengthTemp=0,this.isSnakeMoving=!1,this.lastMouseMovingX=0,this.propMagnetEffectTime=0,this.propRocketEffectTime=0,this.propFrozenEffectTime=0,this.propShieldEffectTime=0,this.lineTypeArr=[],this.route=new eui.ArrayCollection,this.snakeBodyRoute=new eui.ArrayCollection,this.firstLineCount=[1,1,1,1,1],this.lineWidth=this.width/5,this.addBg(),this.wrapperBlocView=new egret.Sprite,this.wrapperBlocView.width=this.width,this.wrapperBlocView.height=this.height,this.addChild(this.wrapperBlocView),this.wrapperEffectView=new egret.Sprite,this.wrapperEffectView.width=this.width,this.wrapperEffectView.height=this.height,this.addChild(this.wrapperEffectView),this.wrapperView=new egret.Sprite,this.wrapperView.width=this.width,this.wrapperView.height=this.height,this.addChild(this.wrapperView),this.wrapperHeadView=new egret.Sprite,this.wrapperHeadView.width=this.width,this.wrapperHeadView.height=this.height,this.addChild(this.wrapperHeadView),this.initScoreView(),this.obstacleImg=this.ObstacleType(),this.addSnake(),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.clickEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.move,this),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.cancleEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.cancleEvent,this),this.calcPointTimer.addEventListener(egret.TimerEvent.TIMER,this.updatePointList,this),this.calcPointTimer.start(),this.speedAddTimer.addEventListener(egret.TimerEvent.TIMER,this.addSpeed,this),this.speedAddTimer.start(),this.startGame(),GameConst.platform==PlatformConst.TOUTIAO&&(this.updateTTUI(),this.btn_record.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTTRecordBtnClick,this))},t.prototype.ObstacleType=function(){var e=Math.round(2*Math.random()),t="game_square_";switch(e){case 0:t="game_square_",UserInfo.gameBoxType=0;break;case 1:t="game_square1_",UserInfo.gameBoxType=0;break;case 2:t="game_square2_",UserInfo.gameBoxType=1}return t},t.prototype.startGame=function(){game.SoundManager.getInstance().playBGM(game.SoundManager.game),this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this),this.addEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this)},t.prototype.reStartGame=function(){this.removeChild(this.backGroundImage),this.removeChild(this.backGroundImage1),this.removeChild(this.wrapperBlocView),this.removeChild(this.wrapperEffectView),this.removeChild(this.wrapperView),this.wrapperHeadView.removeChild(this.snake),this.removeChild(this.wrapperHeadView),this.removeChild(this.scoreText),this.init()},t.prototype.againStartGame=function(){game.SoundManager.getInstance().playBGM(game.SoundManager.game),GameConst.platform==PlatformConst.WEIXIN?WXProxy.instance.hideBannerAd():GameConst.platform==PlatformConst.TOUTIAO?game.TouTiaoSDKMgr.getInstance().hideBannerAd():GameConst.platform==PlatformConst.H5&&(document.getElementById("banneradbox").style.display="none"),GameLogic.getInstance().currentBeanCount=SnakeConst.RELIFE_BODY_LENGTH,this.snake.updateCount(GameLogic.getInstance().currentBeanCount);for(var e=SnakeConst.MAX_BODY_LENGTH>GameLogic.getInstance().currentBeanCount?GameLogic.getInstance().currentBeanCount:SnakeConst.MAX_BODY_LENGTH,t=0;e>t;t++){var n=new SnakeBodyView(60,60,SnakeConst.getColorType(null,null),UserInfo.curSid);this.snakeBodyArray.push(n),this.wrapperView.addChild(n);var i=new egret.Point(n.x,n.y);this.route.addItem(i),this.snakeBodyRoute.addItem(i)}this.snake.showShield(!0),this.propShieldEffectTime=0,this.isGameFinsh=!1,this.addEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.clickEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.move,this),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.cancleEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.cancleEvent,this),this.calcPointTimer.addEventListener(egret.TimerEvent.TIMER,this.updatePointList,this),this.speedAddTimer.addEventListener(egret.TimerEvent.TIMER,this.addSpeed,this),GameConst.platform==PlatformConst.TOUTIAO&&this.btn_record.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTTRecordBtnClick,this)},t.prototype.addBg=function(){var e=["boxbg_png","skybg_png","startbg_png"],t=e.length,n=Math.random()*t|0,i=e[n];this.imgBg.source=i;var a=RES.getRes(i);this.backGroundImage=new eui.Image(a),this.backGroundImage.fillMode=egret.BitmapFillMode.REPEAT,this.backGroundImage.x=0,this.backGroundImage.y=-this.height,this.backGroundImage.width=this.width,this.backGroundImage.height=2*this.height,this.addChild(this.backGroundImage),this.backGroundImage1=new eui.Image(a),this.backGroundImage1.fillMode=egret.BitmapFillMode.REPEAT,this.backGroundImage1.x=0,this.backGroundImage1.y=3*-this.height,this.backGroundImage1.width=this.width,this.backGroundImage1.height=2*this.height,this.addChild(this.backGroundImage1)},t.prototype.initScoreView=function(){var e=RES.getRes("text_score_png"),t=new eui.Image(e);t.x=10,t.y=60,t.width=106,t.height=40,this.addChild(t),this.scoreText=new eui.Label,this.scoreText.x=15+t.width+15,this.scoreText.y=t.y,this.scoreText.height=t.height,this.scoreText.width=400,this.scoreText.text="0",this.scoreText.textColor=0,this.scoreText.size=44,this.scoreText.bold=!0,this.addChild(this.scoreText)},t.prototype.addSnake=function(){this.snake=new SnakeView(80,80,SnakeConst.Type_Red,UserInfo.curSid),this.staticSnakeY=2*this.height/3,this.snake.y=2*this.height/3,this.snake.x=this.width/2;for(var e=SnakeConst.MAX_BODY_LENGTH>GameLogic.getInstance().currentBeanCount?GameLogic.getInstance().currentBeanCount:SnakeConst.MAX_BODY_LENGTH,t=0;e>t;t++){var n=new SnakeBodyView(60,60,SnakeConst.getColorType(null,null),UserInfo.curSid);this.snakeBodyArray.push(n),this.wrapperView.addChild(n);var i=new egret.Point(n.x,n.y);this.route.addItem(i),this.snakeBodyRoute.addItem(i)}this.wrapperHeadView.addChild(this.snake)},t.prototype.createNewRow=function(){if(this.rowCount%20==0)this.createNewLine(LineType.OBSTACLE,LineType.OBSTACLE,LineType.OBSTACLE,LineType.OBSTACLE,LineType.OBSTACLE);else{var e=GameLogic.getInstance().getRandomLine();this.createNewLine(e.row1,e.row2,e.row3,e.row4,e.row5)}},t.prototype.createPoint=function(e){var t=.3,n=SnakeConst.getRandomNumRange(1,6),i=new PointView(this.lineWidth*t,this.lineWidth*t,SnakeConst.getColorType(n,2),n,UserInfo.curSid);i.y=-this.lineWidth,i.x=.5*this.lineWidth+e*this.lineWidth,this.pointArray.push(i),this.wrapperBlocView.addChild(i)},t.prototype.createObstacle=function(e){var t,n=.93,i=this.firstLineCount.pop();if(null!=i)t=new ObstacleView(this.lineWidth*n,this.lineWidth*n,SnakeConst.getColorType(i,1,UserInfo.gameBoxType),i,this.obstacleImg);else{var a=SnakeConst.getRandomNumRange(1,GameLogic.getInstance().currentBeanCount+10);t=new ObstacleView(this.lineWidth*n,this.lineWidth*n,SnakeConst.getColorType(a,1,UserInfo.gameBoxType),a,this.obstacleImg)}t.y=-this.lineWidth,t.x=.5*this.lineWidth+e*this.lineWidth,this.obstacleArray.push(t),this.wrapperBlocView.addChild(t)},t.prototype.createMagnet=function(e){var t=.9,n=new PropMagnetView(this.lineWidth*t,this.lineWidth*t);n.y=-this.lineWidth,n.x=this.lineWidth*(1-t)/2+e*this.lineWidth,this.propMagnetArr.push(n),this.wrapperBlocView.addChild(n)},t.prototype.createRocket=function(e){var t=.9,n=new PropRocketView(this.lineWidth*t,this.lineWidth*t);n.y=-this.lineWidth,n.x=this.lineWidth*(1-t)/2+e*this.lineWidth,this.propRocketArr.push(n),this.wrapperBlocView.addChild(n)},t.prototype.createBomb=function(e){var t=.9,n=new PropBombView(this.lineWidth*t,this.lineWidth*t);n.y=-this.lineWidth,n.x=this.lineWidth*(1-t)/2+e*this.lineWidth,this.propBombArr.push(n),this.wrapperBlocView.addChild(n)},t.prototype.createLine=function(e){var t=1,n=new SeparateShortView(12,this.lineWidth*t);n.y=-this.lineWidth,n.x=this.lineWidth+e*this.lineWidth,this.separateShortArr.push(n),this.wrapperBlocView.addChild(n)},t.prototype.createNewLine=function(e,t,n,i,a){this.createNewLineCell(0,e),this.createNewLineCell(1,t),this.createNewLineCell(2,n),this.createNewLineCell(3,i),this.createNewLineCell(4,a)},t.prototype.createNewLineCell=function(e,t){switch(t){case LineType.OBSTACLE:this.createObstacle(e);break;case LineType.POINT:this.createPoint(e);break;case LineType.LINE:this.createLine(e);break;case LineType.MAGENT:this.createMagnet(e);break;case LineType.ROCKET:this.createRocket(e);break;case LineType.BOMB:this.createBomb(e)}},t.prototype.start=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this),this.addEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this)},t.prototype.enterFrameHandler=function(e){(new Date).getTime();if(!this.isGameFinsh){if(!this.isGameFinsh&&GameLogic.getInstance().currentBeanCount<=0&&(this.isGameFinsh=!0,this.clearEvent(),UserInfo.isGame=!1,this.stopTTRecord(),game.SoundManager.getInstance().stopBGM(),game.GetHttpData.getInstance().GameStop(this.data,GameLogic.getInstance().currentScore)),this.snake.isMagnetOpen&&(this.propMagnetEffectTime>=300?this.snake.showMagnetLight(!1):this.propMagnetEffectTime++),this.snake.isFrozenOpen&&(this.propFrozenEffectTime>=300?(this.snake.showFrozen(!1),this.speed=this.initSpeed+1):(this.propFrozenEffectTime++,this.speed=this.frozenSpeed)),this.snake.isRocketOpen&&(this.propRocketEffectTime>=300?(this.snake.showRocketEffect(!1),this.speed=this.initSpeed+1):(this.propRocketEffectTime++,this.speed=this.upSpeed)),this.snake.isShieldOpen&&(this.propShieldEffectTime>=150?this.snake.showShield(!1):this.propShieldEffectTime++),this.explodeCheck()&&game.SoundManager.getInstance().playEffect(game.SoundManager.explode,0,1),0!=this.hitCheck())return 1==this.hitBlock?game.SoundManager.getInstance().playEffect(game.SoundManager.hit,0,1):2==this.hitBlock&&game.SoundManager.getInstance().playEffect(game.SoundManager.frozen,0,1),this.snakeMoving(),void this.snakeBodyMoving();if(this.hitBlock=0,this.eatCheck()&&game.SoundManager.getInstance().playEffect(game.SoundManager.eating,0,1),!this.hitLineCheck()){this.eatMagnetCheck()&&game.SoundManager.getInstance().playEffect(game.SoundManager.effect,0,1),this.eatRocketCheck()&&game.SoundManager.getInstance().playEffect(game.SoundManager.effect,0,1),this.eatBombCheck()&&game.SoundManager.getInstance().playEffect(game.SoundManager.effect,0,1),this.scrollLengthTemp+=this.speed,this.scrollLengthTemp>this.lineWidth&&(this.scrollLengthTemp=0,this.createNewRow(),this.rowCount++);(new Date).getTime();this.scrollBg(),this.removeObstacleWhenNotInScreen(),this.removePointWhenNotInScreen(),this.removeSeparateShortWhenNotInScreen(),this.removeMagnetWhenNotInScreen(),this.removeRocketWhenNotInScreen(),this.removeBoomdWhenNotInScreen(),this.snake.y=this.snake.y-this.speed,this.snakeMoving(),this.snakeBodyMoving();(new Date).getTime()}}},t.prototype.scrollBg=function(){this.backGroundImage.y+=this.speed,this.backGroundImage1.y+=this.speed;var e=this.backGroundImage.y-2*this.height,t=this.backGroundImage1.y-2*this.height,n=0;e>0&&(n=e),t>0&&(n=t),this.backGroundImage.y>=this.height?this.backGroundImage.y=2*-this.height+n:this.backGroundImage1.y>=this.height&&(this.backGroundImage1.y=2*-this.height+n+3),this.wrapperView.y+=this.speed,this.wrapperHeadView.y+=this.speed},t.prototype.snakeMoving=function(){if(this.isSnakeMoving&&this.mouceTouchStageX-this.lastMouseMovingX!=0){var e=this.sideHideCheck(),t=this.sideHideLineCheck();if(1e4==e&&1e4==t){var n=this.mouceTouchStageX-this.lastMouseMovingX;this.mouceTouchStageX=this.lastMouseMovingX,this.snake.x-n<=this.snake.width/2?this.snake.x=0+this.snake.width/2:this.width-this.snake.width/2<=this.snake.x-n?this.snake.x=this.width-this.snake.width/2:this.snake.x-=n}else 1e4!=e&&1e4==t?this.snake.x=e:1e4==e&&1e4!=t&&(this.snake.x=t)}},t.prototype.snakeBodyMoving=function(){for(var e=(this.snake.x,this.snake.y,1),t=SnakeConst.MAX_BODY_LENGTH>GameLogic.getInstance().currentBeanCount?GameLogic.getInstance().currentBeanCount:SnakeConst.MAX_BODY_LENGTH,n=t-1;n>=0;n--){var i=this.snakeBodyArray[n],a=this.snakeBodyRoute.getItemAt(e);i.x=null==a?0:a.x,i.y=null==a?0:a.y,e++}},t.prototype.removeObstacleWhenNotInScreen=function(){for(var e=[];this.obstacleArray.length>0;){var t=this.obstacleArray.pop();t.y+=this.speed,t.y>this.height+t.height?this.wrapperBlocView.removeChild(t):e.push(t)}this.obstacleArray=e},t.prototype.removePointWhenNotInScreen=function(){for(var e=[];this.pointArray.length>0;){var t=this.pointArray.pop();t.y+=this.speed,t.y>this.height+t.height?this.wrapperBlocView.removeChild(t):e.push(t)}this.pointArray=e},t.prototype.removeSeparateShortWhenNotInScreen=function(){for(var e=[];this.separateShortArr.length>0;){var t=this.separateShortArr.pop();t.y+=this.speed,t.y>this.height+t.height?this.wrapperBlocView.removeChild(t):e.push(t)}this.separateShortArr=e},t.prototype.removeMagnetWhenNotInScreen=function(){for(var e=[];this.propMagnetArr.length>0;){var t=this.propMagnetArr.pop();t.y+=this.speed,t.y>this.height+t.height?this.wrapperBlocView.removeChild(t):e.push(t)}this.propMagnetArr=e},t.prototype.removeRocketWhenNotInScreen=function(){for(var e=[];this.propRocketArr.length>0;){var t=this.propRocketArr.pop();t.y+=this.speed,t.y>this.height+t.height?this.wrapperBlocView.removeChild(t):e.push(t)}this.propRocketArr=e},t.prototype.removeBoomdWhenNotInScreen=function(){for(var e=[];this.propBombArr.length>0;){var t=this.propBombArr.pop();t.y+=this.speed,t.y>this.height+t.height?this.wrapperBlocView.removeChild(t):e.push(t)}this.propBombArr=e},t.prototype.sideHideCheck=function(){for(var e=this.mouceTouchStageX-this.lastMouseMovingX,t=[],n=[],i=0;i<this.obstacleArray.length;i++){var a=this.obstacleArray[i];if(this.staticSnakeY<a.y+a.height/2+this.snake.height/2&&this.staticSnakeY>a.y-a.height/2-this.snake.height/2)if(this.snake.x-e>a.x-a.width/2-this.snake.width/2&&this.snake.x<a.x-a.width/2-this.snake.width/2){var o=a.x-a.width/2-this.snake.width/2-1;n.push(o)}else if(this.snake.x-e<a.x+a.width/2+this.snake.width/2&&this.snake.x>a.x+a.width/2+this.snake.width/2){var s=a.x+a.width/2+this.snake.width/2+1;t.push(s)}}return n.sort(function(e,t){return t-e}),t.sort(function(e,t){return e-t}),n.length>0?n.pop():t.length>0?t.pop():1e4},t.prototype.sideHideLineCheck=function(){for(var e=this.mouceTouchStageX-this.lastMouseMovingX,t=[],n=[],i=0;i<this.separateShortArr.length;i++){var a=this.separateShortArr[i];if(this.staticSnakeY<a.y+a.height/2+this.snake.height/2&&this.staticSnakeY>a.y-a.height/2-this.snake.height/2)if(this.snake.x-e>a.x-a.width/2-this.snake.width/2&&this.snake.x<a.x-a.width/2-this.snake.width/2){var o=a.x-a.width/2-this.snake.width/2-1;n.push(o)}else if(this.snake.x-e<a.x+a.width/2+this.snake.width/2&&this.snake.x>a.x+a.width/2+this.snake.width/2){var s=a.x+a.width/2+this.snake.width/2+1;t.push(s)}}return n.sort(function(e,t){return t-e}),t.sort(function(e,t){return e-t}),n.length>0?n.pop():t.length>0?t.pop():1e4},t.prototype.eatMagnetCheck=function(){for(var e=!1,t=[];this.propMagnetArr.length>0;){var n=this.propMagnetArr.pop();this.staticSnakeY<n.y+n.height/2+this.snake.height/2&&this.staticSnakeY>n.y-n.height/2-this.snake.height/2&&this.snake.x>n.x-this.snake.width/2&&this.snake.x<n.x+n.width+this.snake.width/2?(this.wrapperBlocView.removeChild(n),e=!0,this.propMagnetEffectTime=0,this.snake.showMagnetLight(!0)):t.push(n)}return this.propMagnetArr=t,e},t.prototype.eatRocketCheck=function(){for(var e=!1,t=[];this.propRocketArr.length>0;){var n=this.propRocketArr.pop();this.staticSnakeY<n.y+n.height/2+this.snake.height/2&&this.staticSnakeY>n.y-n.height/2-this.snake.height/2&&this.snake.x>n.x-this.snake.width/2&&this.snake.x<n.x+n.width+this.snake.width/2?(this.wrapperBlocView.removeChild(n),e=!0,this.propRocketEffectTime=0,this.snake.showRocketEffect(!0)):t.push(n)}return this.propRocketArr=t,e},t.prototype.eatBombCheck=function(){for(var e=!1,t=[];this.propBombArr.length>0;){var n=this.propBombArr.pop();this.staticSnakeY<n.y+n.height/2+this.snake.height/2&&this.staticSnakeY>n.y-n.height/2-this.snake.height/2&&this.snake.x>n.x-this.snake.width/2&&this.snake.x<n.x+n.width+this.snake.width/2?(this.wrapperBlocView.removeChild(n),e=!0,this.snake.showBombEffect(!0)):t.push(n)}return this.propBombArr=t,e},t.prototype.addScore=function(e){GameLogic.getInstance().currentScore+=e,this.scoreText.text=""+GameLogic.getInstance().currentScore},t.prototype.updatePointList=function(){this.route.addItemAt(new egret.Point(this.snake.x,this.snake.y),0);for(var e=this.route.length-1;e>=0&&this.route.getItemAt(e).y-this.route.getItemAt(0).y>400;e--)this.route.removeItemAt(e);this.snakeBodyRoute=CaculatePointUtil.caculatePointList(this.route,40),this.snakeBodyRoute.length>200&&this.snakeBodyRoute.removeItemAt(this.snakeBodyRoute.length-1)},t.prototype.addSpeed=function(){this.speed=this.initSpeed+1},t.prototype.explodeCheck=function(){var e=!1;if(this.snake.isBombOpen&&(e=this.snake.calcBombTime()),e){for(var t=[];this.obstacleArray.length>0;){var n=this.obstacleArray.pop();n.boomObstacle(),this.wrapperBlocView.removeChild(n)}this.obstacleArray=t}return e},t.prototype.hitCheck=function(){this.hitBlock=0;for(var e=[];this.obstacleArray.length>0;){var t=this.obstacleArray.pop();if(this.staticSnakeY<t.y+t.height/2+this.snake.height/2&&this.staticSnakeY>t.y-t.height/2-this.snake.height/2&&this.snake.x>t.x-t.width/2-this.snake.width/2&&this.snake.x<t.x+t.width/2+this.snake.width/2)if(this.snake.isRocketOpen||this.snake.isShieldOpen)this.addScore(t.obstacleCount),this.wrapperBlocView.removeChild(t);else{if(null==this.bumpClip&&(this.bumpClip=EffectHelper.getInstance().createHitEffect(224,224,new egret.Point(this.snake.x,this.staticSnakeY),0),this.addChild(this.bumpClip),this.bumpClip.play(1),this.bumpClip.addEventListener(egret.Event.COMPLETE,this.bumpClipComplete,this)),t.isFrozen()&&(this.snake.showFrozen(!0),this.propFrozenEffectTime=0,this.hitBlock=2),this.clearObstacleTime++,this.firstHit||this.clearObstacleTime>this.clearObstacleTimeConst){if(this.firstHit=!1,t.reduceNumber()?(this.wrapperBlocView.removeChild(t),this.firstHit=!0):e.push(t),GameLogic.getInstance().currentBeanCount>0&&(this.snake.addCount(-1),this.addScore(1),GameLogic.getInstance().currentBeanCount<SnakeConst.MAX_BODY_LENGTH&&this.snakeBodyArray.length>0)){var n=this.snakeBodyArray.pop();this.wrapperView.removeChild(n)}this.clearObstacleTime=0}else e.push(t);0==this.hitBlock&&(this.hitBlock=1)}else e.push(t)}return this.obstacleArray=e,this.hitBlock},t.prototype.bumpClipComplete=function(e){this.removeChild(this.bumpClip),this.bumpClip=null},t.prototype.eatCheck=function(){for(var e=!1,t=[];this.pointArray.length>0;){var n=this.pointArray.pop();this.snake.isMagnetOpen?n.y<2*this.lineWidth+this.staticSnakeY&&n.y>this.staticSnakeY-3*this.lineWidth&&n.x>this.snake.x-2*this.lineWidth&&n.x<this.snake.x+2*this.lineWidth?(n.animateAndRemove(this.snake.x,this.staticSnakeY),e=!0,this.addBody(n.roundCount,n.colorType)):t.push(n):this.staticSnakeY<n.y+n.height/2+this.snake.height/2&&this.staticSnakeY>n.y-n.height/2-this.snake.height/2&&this.snake.x>n.x-n.width/2-this.snake.width/2&&this.snake.x<n.x+n.width/2+this.snake.width/2?(this.wrapperBlocView.removeChild(n),e=!0,this.addBody(n.roundCount,n.colorType)):t.push(n)}return this.pointArray=t,e},t.prototype.addBody=function(e,t){var n=GameLogic.getInstance().currentBeanCount,i=0;if(this.snake.addCount(e),!(n>=SnakeConst.MAX_BODY_LENGTH)&&(i=n+e<=SnakeConst.MAX_BODY_LENGTH?e:SnakeConst.MAX_BODY_LENGTH-n,i>0)){var a=this.snakeBodyRoute.getItemAt(this.snakeBodyRoute.length-1);this.route.addItem(a),this.snakeBodyRoute.addItem(a);for(var o=0;i>o;o++){var s=new SnakeBodyView(60,60,t,this.snake.curSid);this.snakeBodyArray.push(s),this.wrapperView.addChild(s)}}},t.prototype.hitLineCheck=function(){for(var e=!1,t=[],n=this.snake.x;this.separateShortArr.length>0;){var i=this.separateShortArr.pop();this.staticSnakeY<i.y+i.height/2+this.snake.height/2&&this.staticSnakeY>i.y-i.height/2-this.snake.height/2&&this.snake.x>i.x-i.width/2-this.snake.width/2&&this.snake.x<i.x+i.width/2+this.snake.width/2?(n=this.snake.x>i.x?i.x+i.width+this.snake.width/2:i.x-i.width-this.snake.width/2,e=!0,t.push(i)):t.push(i)}return this.snake.x=n,this.separateShortArr=t,e},t.prototype.pause=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this),this.calcPointTimer.removeEventListener(egret.TimerEvent.TIMER,this.updatePointList,this)},t.prototype.clickEvent=function(e){this.isSnakeMoving=!0,this.lastMouseMovingX=this.mouceTouchStageX=e.stageX},t.prototype.cancleEvent=function(e){this.isSnakeMoving=!1},t.prototype.move=function(e){this.isSnakeMoving=!0,this.lastMouseMovingX=e.stageX},t.prototype.clearEvent=function(){try{this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.clickEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.move,this),this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.cancleEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.cancleEvent,this),this.calcPointTimer.removeEventListener(egret.TimerEvent.TIMER,this.updatePointList,this),this.speedAddTimer.removeEventListener(egret.TimerEvent.TIMER,this.addSpeed,this),GameConst.platform==PlatformConst.TOUTIAO&&this.btn_record.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTTRecordBtnClick,this)}catch(e){}},t.prototype.againEvent=function(){try{this.addEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this),this.calcPointTimer.addEventListener(egret.TimerEvent.TIMER,this.updatePointList,this)}catch(e){}},t.prototype.updateTTUI=function(){var e=this;GameConst.platform==PlatformConst.TOUTIAO&&(this.isRecording?this.lab_recording.visible=!0:this.lab_recording.visible=!1,this.group_TouTiao.visible=!0,this.setChildIndex(this.group_TouTiao,this.numChildren),UserInfo.ttClassicUsableShareTimes>0?(this.group_shareReward.visible=!0,egret.setTimeout(function(){e.group_shareReward.visible=!1},this,3e3),this.lab_record_diamond.text=""+UserInfo.ttClassicShareGetDiamondNum):this.group_shareReward.visible=!1)},t.prototype.getRecordSeconds=function(){return this.finishRecordSeconds-this.startRecordSeconds},t.prototype.ttStartRecord=function(e){var t=this;GameConst.platform==PlatformConst.TOUTIAO&&(this.isRecording?(this.finishRecordSeconds=egret.getTimer(),this.getRecordSeconds()<3e3&&game.TipsManager.getInstance().show(game.ETipsID.TipsToutiao,{title:"录屏失败：录屏时长低于 3 秒",type:TipsStyle.wordType}),console.log("停止录屏"),this.btn_record.setImg("btn_record_start_png"),this.lab_recording.visible=!1,this.isRecording=!1,game.TouTiaoSDKMgr.getInstance().stopRecordVideo()):(console.log("开始录屏"),this.btn_record.setImg("btn_record_ing_png"),this.lab_recording.visible=!0,this.isRecording=!0,this.startRecordSeconds=egret.getTimer(),game.TouTiaoSDKMgr.getInstance().recordVideo(e,function(){t.btn_record.setImg("btn_record_start_png"),t.lab_recording.visible=!1,t.isRecording=!1,t.finishRecordSeconds=egret.getTimer()},function(e){t.btn_record.setImg("btn_record_start_png"),t.lab_recording.visible=!1,t.isRecording=!1,t.finishRecordSeconds=egret.getTimer(),t.getRecordSeconds()<3e3&&game.TipsManager.getInstance().show(game.ETipsID.TipsToutiao,{title:"录屏失败：录屏时长低于 3 秒",type:TipsStyle.wordType})})))},t.prototype.stopTTRecord=function(){GameConst.platform==PlatformConst.TOUTIAO&&this.isRecording&&game.TouTiaoSDKMgr.getInstance().stopRecordVideo()},t.prototype.onTTRecordBtnClick=function(){console.log("录屏按钮点击"),this.ttStartRecord(30)},t}(eui.Component);__reflect(GameMain.prototype,"GameMain");var GameFight=function(e){function t(){var t=e.call(this)||this;return t.isGameFinsh=!1,t.initSpeed=8,t.speed=t.initSpeed,t.lineWidth=0,t.clearObstacleTimeConst=3,t.moveShowBeanCount=9,t.createRowCountOneTime=5,t.obstacleArray=[],t.pointArray=[],t.separateShortArr=[],t.obstacleImg="",t.propMagnetArr=[],t.propRocketArr=[],t.propBombArr=[],t.playerScrollLengthTemp=0,t.enemyScrollLengthTemp=0,t.isSnakeMoving=!1,t.clearObstacleTime=0,t.playerClearObstacleTime=0,t.enemyClearObstacleTime=0,t.lastMouseMovingX=0,t.firstHit=!0,t.playerFirstHit=!0,t.enemyFirstHit=!0,t.lineTypeArr=[],t.firstLineCount=[1,2,1,2,1],t.rowCount=0,t.mouceTouchStageX=0,t.calcPointTimer=new egret.Timer(15,0),t.speedAddTimer=new egret.Timer(1e3,0),t.data=null,t.perRowPropDic={},t.perRowPosDic={},t.isUsedAdsRevive=!1,t.isPlayerDead=!1,t.isScoreGroupAniming=!1,t.isRecording=!1,t.startRecordSeconds=0,t.finishRecordSeconds=0,t.preLineNum=1,t.lineSpace=1.2,t.robotCheckPropRow=0,t.skinName="GameFightSkin",t.width=game.StageUtils.getInstance().stageWidth,t.height=game.StageUtils.getInstance().stageHeight,t.judgeType(),t.init(),t}return __extends(t,e),t.prototype.judgeType=function(){GameConst.platform==PlatformConst.WEIXIN?(this.group_top.y=50,WXProxy.instance.hideBannerAd()):GameConst.platform==PlatformConst.TOUTIAO?(this.group_top.y=50,game.TouTiaoSDKMgr.getInstance().hideBannerAd()):GameConst.platform==PlatformConst.H5&&(document.getElementById("banneradbox").style.display="none")},t.prototype.createChildren=function(){this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeFromStage,this)},t.prototype.removeFromStage=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeFromStage,this),this.clearEvent()},t.prototype.init=function(){UserInfo.isPveGame=!0,this.rowCount=0,this.lab_time.text="100",this.lab_score_red.text="0",this.lab_score_blue.text="0",this.icon_enemy_dead.visible=!1,this.perRowPropDic={},this.perRowPosDic={},this.robotCheckPropRow=0,this.isPlayerDead=!1,this.isScoreGroupAniming=!1,GameLogic.getInstance().currPlayerScore=0,GameLogic.getInstance().currPlayerBeanCount=20,GameLogic.getInstance().currEnemyScore=0,GameLogic.getInstance().currEnemyBeanCount=20;var e=game.LocalStorageUtils.getNumber("GameFightTimes");void 0!=e?6>e&&(e+=1):e=1,game.LocalStorageUtils.saveNumber("GameFightTimes",e),this.isGameFinsh=!1,this.lineWidth=0,this.obstacleArray=[],this.pointArray=[],this.separateShortArr=[],this.propMagnetArr=[],this.propRocketArr=[],this.propBombArr=[],this.playerScrollLengthTemp=0,this.enemyScrollLengthTemp=0,this.isSnakeMoving=!1,this.lastMouseMovingX=0,this.lineTypeArr=[],this.firstLineCount=[1,1,1,1,1],this.lineWidth=this.width/5,this.addBg(),this.wrapperBlocView=new egret.Sprite,this.wrapperBlocView.width=this.width,this.wrapperBlocView.height=this.height,this.addChild(this.wrapperBlocView),this.initScoreView(),this.obstacleImg=this.ObstacleType(),this.addEnemy(),this.addPlayer(),this.speed=this.player.initSpeed,this.clearEvent(),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.clickEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.move,this),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.cancleEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.cancleEvent,this),this.calcPointTimer.addEventListener(egret.TimerEvent.TIMER,this.updatePointList,this),this.calcPointTimer.start(),this.speedAddTimer.addEventListener(egret.TimerEvent.TIMER,this.addSpeed,this),this.speedAddTimer.start(),this.startGame(),this.setChildIndex(this.group_top,this.numChildren),this.setPkCountdown(1e5),GameConst.platform==PlatformConst.TOUTIAO&&(this.updateTTUI(),this.btn_record.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTTRecordBtnClick,this))
},t.prototype.ObstacleType=function(){var e=Math.round(2*Math.random()),t="game_square_";switch(e){case 0:t="game_square_",UserInfo.gameBoxType=0;break;case 1:t="game_square1_",UserInfo.gameBoxType=0;break;case 2:t="game_square2_",UserInfo.gameBoxType=1}return t},t.prototype.startGame=function(){game.SoundManager.getInstance().playBGM(game.SoundManager.game),this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this),this.addEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this)},t.prototype.reStartGame=function(){GameConst.platform==PlatformConst.WEIXIN?WXProxy.instance.hideBannerAd():GameConst.platform==PlatformConst.TOUTIAO?game.TouTiaoSDKMgr.getInstance().hideBannerAd():GameConst.platform==PlatformConst.H5&&(document.getElementById("banneradbox").style.display="none"),this.removeChild(this.backGroundImage),this.removeChild(this.backGroundImage1),this.removeChild(this.wrapperBlocView),this.removeChild(this.player.wrapperEffectView),this.removeChild(this.player.wrapperHeadView),this.removeChild(this.player.wrapperView),this.removeChild(this.enemy.wrapperEffectView),this.removeChild(this.enemy.wrapperHeadView),this.removeChild(this.enemy.wrapperView),this.player.wrapperHeadView.removeChild(this.player),this.enemy.wrapperHeadView.removeChild(this.enemy),this.isUsedAdsRevive=!1,this.clearEvent(),game.PanelManager.getInstance().close(game.EPanelID.GameFight,!0),game.GetHttpData.getInstance().pveStart()},t.prototype.againStartGame=function(){GameConst.platform==PlatformConst.WEIXIN?WXProxy.instance.hideBannerAd():GameConst.platform==PlatformConst.TOUTIAO?game.TouTiaoSDKMgr.getInstance().hideBannerAd():GameConst.platform==PlatformConst.H5&&(document.getElementById("banneradbox").style.display="none"),game.SoundManager.getInstance().playBGM(game.SoundManager.game),this.player.currentBeanCount=SnakeConst.RELIFE_BODY_LENGTH;for(var e=SnakeConst.MAX_BODY_LENGTH>this.player.currentBeanCount?this.player.currentBeanCount:SnakeConst.MAX_BODY_LENGTH,t=0;e>t;t++){var n=new SnakeBodyView(60,60,SnakeConst.getColorType(null,null),UserInfo.curSid);this.player.snakeBodyArray.push(n),this.player.wrapperView.addChild(n);var i=new egret.Point(n.x,n.y);this.player.route.addItem(i),this.player.snakeBodyRoute.addItem(i)}this.isGameFinsh=!1,this.icon_enemy_dead.visible=!1,this.isPlayerDead=!1,this.player.showShield(!0),this.player.propShieldEffectTime=0,this.addPlayerEvent()},t.prototype.addBg=function(){var e=["pve_bg_01_png","pve_bg_02_png","pve_bg_03_png"],t=["pve_bg_011_png","pve_bg_021_png","pve_bg_031_png"],n=3*Math.random()|0,i=e[n],a=t[n];this.imgBg.source=i;var o=RES.getRes(i);this.backGroundImage=new eui.Image(o),this.backGroundImage.fillMode=egret.BitmapFillMode.SCALE,this.backGroundImage.y=0,this.backGroundImage.width=this.width,this.backGroundImage.height=this.height,this.backGroundImage.x=0,this.backGroundImage.source=i,this.addChild(this.backGroundImage);var s=RES.getRes(a);this.backGroundImage1=new eui.Image(s),this.backGroundImage1.fillMode=egret.BitmapFillMode.SCALE,this.backGroundImage1.x=0,this.backGroundImage.y=-this.height,this.backGroundImage1.width=this.width,this.backGroundImage1.height=this.height,this.backGroundImage1.source=a,this.addChild(this.backGroundImage1)},t.prototype.initScoreView=function(){var e=RES.getRes("text_score_png"),t=new eui.Image(e);t.x=15,t.y=15,t.width=106,t.height=40,this.addChild(t)},t.prototype.addPlayer=function(){this.player=new SnakePlayer(80,80,SnakeConst.Type_Red,UserInfo.curSid),this.addChild(this.player.wrapperView),this.addChild(this.player.wrapperHeadView),this.addChild(this.player.wrapperEffectView),this.icon_blue.source=SkinInfo.getHeadImgName(UserInfo.curSid)},t.prototype.addEnemy=function(){var e=Math.floor(10*Math.random());e==UserInfo.curSid&&e++,this.enemy=new SnakeEnemy(80,80,SnakeConst.Type_Blue,e),this.addChild(this.enemy.wrapperView),this.addChild(this.enemy.wrapperHeadView),this.addChild(this.enemy.wrapperEffectView),this.icon_red.source=SkinInfo.getHeadImgName(e)},t.prototype.addMap=function(e){for(var t=this.rowCount;e>=t;t++)this.createNewRow()},t.prototype.createNewRow=function(){if(this.rowCount%20==0)this.createNewLine(LineType.OBSTACLE,LineType.OBSTACLE,LineType.OBSTACLE,LineType.OBSTACLE,LineType.OBSTACLE);else{var e=GameLogic.getInstance().getRandomLine();this.createNewLine(e.row1,e.row2,e.row3,e.row4,e.row5)}this.isNeedUpdateSpeed(this.rowCount),this.rowCount++},t.prototype.createObstacle=function(e){var t,n=.93,i=this.firstLineCount.pop();if(null!=i)t=new ObstacleView(this.lineWidth*n,this.lineWidth*n,SnakeConst.getColorType(i,1,UserInfo.gameBoxType),i,this.obstacleImg,!1),this.perRowPropDic[this.rowCount][e]=-i;else{var a=(this.player.currentBeanCount<this.enemy.currentBeanCount?this.player.currentBeanCount:this.enemy.currentBeanCount,game.RobotMgr.getInstance().getRandomObstacleValue(this.rowCount));t=new ObstacleView(this.lineWidth*n,this.lineWidth*n,SnakeConst.getColorType(a,1,UserInfo.gameBoxType),a,this.obstacleImg,!1),this.perRowPropDic[this.rowCount][e]=-a}t.y=-this.lineWidth*this.lineSpace*this.rowCount,t.pos=-this.lineWidth*this.lineSpace*this.rowCount,t.x=.5*this.lineWidth+e*this.lineWidth,t.rowCount=this.rowCount,this.obstacleArray.push(t),this.wrapperBlocView.addChild(t)},t.prototype.createPoint=function(e){var t=.3,n=game.RobotMgr.getInstance().getRandomPointValue(this.rowCount),i=new PointView(this.lineWidth*t,this.lineWidth*t,SnakeConst.getColorType(n,2),n,UserInfo.curSid);i.y=-this.lineWidth*this.lineSpace*this.rowCount,i.pos=-this.lineWidth*this.lineSpace*this.rowCount,i.rowCount=this.rowCount,i.x=.5*this.lineWidth+e*this.lineWidth,this.perRowPropDic[this.rowCount][e]=n,this.pointArray.push(i),this.wrapperBlocView.addChild(i)},t.prototype.createMagnet=function(e){var t=.9,n=new PropMagnetView(this.lineWidth*t,this.lineWidth*t);n.y=-this.lineWidth*this.lineSpace*this.rowCount,n.pos=-this.lineWidth*this.lineSpace*this.rowCount,n.rowCount=this.rowCount,n.x=this.lineWidth*(1-t)/2+e*this.lineWidth,this.perRowPropDic[this.rowCount][e]=SnakeConst.Prop_Magnet,this.propMagnetArr.push(n),this.wrapperBlocView.addChild(n)},t.prototype.createBomb=function(e){var t=.9,n=new PropBombView(this.lineWidth*t,this.lineWidth*t);n.y=-this.lineWidth*this.lineSpace*this.rowCount,n.pos=-this.lineWidth*this.lineSpace*this.rowCount,n.rowCount=this.rowCount,n.x=this.lineWidth*(1-t)/2+e*this.lineWidth,this.perRowPropDic[this.rowCount][e]=SnakeConst.Prop_Bomb,this.propBombArr.push(n),this.wrapperBlocView.addChild(n)},t.prototype.createRocket=function(e){var t=.9,n=new PropRocketView(this.lineWidth*t,this.lineWidth*t);n.y=-this.lineWidth*this.lineSpace*this.rowCount,n.pos=-this.lineWidth*this.lineSpace*this.rowCount,n.rowCount=this.rowCount,n.x=this.lineWidth*(1-t)/2+e*this.lineWidth,this.perRowPropDic[this.rowCount][e]=SnakeConst.Prop_Rocket,this.propRocketArr.push(n),this.wrapperBlocView.addChild(n)},t.prototype.createLine=function(e){var t=1,n=new SeparateShortView(12,this.lineWidth*t);n.y=-this.lineWidth*this.lineSpace*this.rowCount,n.pos=-this.lineWidth*this.lineSpace*this.rowCount,n.rowCount=this.rowCount,n.x=this.lineWidth+e*this.lineWidth,this.perRowPropDic[this.rowCount][e]=SnakeConst.Prop_Wall,this.separateShortArr.push(n),this.wrapperBlocView.addChild(n)},t.prototype.createNewLine=function(e,t,n,i,a){this.perRowPosDic[this.rowCount]=-this.lineWidth*this.lineSpace*this.rowCount,this.perRowPropDic[this.rowCount]=[0,0,0,0,0];for(var o=game.RobotMgr.getInstance().createLineTypeArrByrowCount(this.rowCount),s=0;5>s;s++)this.createNewLineCell(s,o[s])},t.prototype.createNewLineCell=function(e,t){switch(t){case LineType.OBSTACLE:this.createObstacle(e);break;case LineType.POINT:this.createPoint(e);break;case LineType.LINE:this.createLine(e);break;case LineType.MAGENT:this.createMagnet(e);break;case LineType.ROCKET:this.createRocket(e);break;case LineType.BOMB:this.createBomb(e)}},t.prototype.start=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this),this.addEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this)},t.prototype.enterFrameHandler=function(e){if(this.player.currentBeanCount<=0&&this.enemy.currentBeanCount<=0&&(this.isGameFinsh=!0,UserInfo.isPveGame=!1),this.player.currentBeanCount<=0&&!this.isPlayerDead&&(this.isPlayerDead=!0,this.clearPlayerEvent(),game.SoundManager.getInstance().stopBGM(),console.error("game over.......pve"),game.GetHttpData.getInstance().pveGameStop(this.data)),!this.isGameFinsh)if((this.player.y<=(this.rowCount-this.createRowCountOneTime)*this.lineSpace*-this.lineWidth||this.enemy.y<=(this.rowCount-this.createRowCountOneTime)*this.lineSpace*-this.lineWidth)&&this.addMap(this.rowCount+this.createRowCountOneTime),this.player.checkPropState(),this.enemy.currentBeanCount>0?(this.enemy.checkPropState(),this.icon_enemy_dead.visible&&(this.icon_enemy_dead.visible=!1)):this.icon_enemy_dead.visible||(this.icon_enemy_dead.visible=!0),this.hitCheck(this.player,this.enemy),this.player.currentBeanCount>0&&this.playerPerFrameCheck(),this.enemy.currentBeanCount>0&&this.eneryPerFrameCheck(),this.playerScrollLengthTemp>this.lineWidth+10){this.playerScrollLengthTemp=0,this.enemyScrollLengthTemp=0;var t=Math.floor((this.player.y-this.enemy.y)/this.lineWidth)+1;t>this.preLineNum&&(this.preLineNum=t)}else if(this.enemyScrollLengthTemp>this.lineWidth+10){this.playerScrollLengthTemp=0,this.enemyScrollLengthTemp=0;var t=Math.floor((this.player.y-this.enemy.y)/this.lineWidth)+1;t>this.preLineNum?this.preLineNum=t:this.preLineNum>1&&this.preLineNum--}},t.prototype.playerPerFrameCheck=function(){return this.explodeCheck(this.player),this.eatCheck(this.player),this.eatMagnetCheck(this.player),this.eatRocketCheck(this.player),this.eatBombCheck(this.player),this.player.isHitBolck?(game.SoundManager.getInstance().playEffect(game.SoundManager.hit,0,1),this.snakeMoving(this.player),void this.snakeBodyMoving(this.player)):void(this.hitLineCheck(this.player)||(this.playerScrollLengthTemp+=this.player.speed,this.scrollBg(),this.removeObstacleWhenNotInScreen(),this.removePointWhenNotInScreen(),this.removeSeparateShortWhenNotInScreen(),this.removeMagnetWhenNotInScreen(),this.removeRocketWhenNotInScreen(),this.wrapperBlocView.y+=this.player.speed,this.player.y=this.player.y-this.player.speed,this.snakeMoving(this.player),this.snakeBodyMoving(this.player)))},t.prototype.eneryPerFrameCheck=function(){return this.explodeCheck(this.enemy),this.eatCheck(this.enemy),this.eatMagnetCheck(this.enemy),this.eatRocketCheck(this.enemy),this.eatBombCheck(this.enemy),this.enemy.isHitBolck?(game.SoundManager.getInstance().playEffect(game.SoundManager.hit,0,1),this.snakeMoving(this.enemy),void this.snakeBodyMoving(this.enemy)):void(this.hitLineCheck(this.enemy)||(this.enemyScrollLengthTemp+=this.enemy.speed,this.enemy.y=this.enemy.y-this.enemy.speed,this.getRobotNextMoveColumn(),this.snakeMoving(this.enemy),this.snakeBodyMoving(this.enemy)))},t.prototype.scrollBg=function(){this.backGroundImage.y+=this.player.speed,this.backGroundImage1.y+=this.player.speed;var e=this.backGroundImage.y-this.height,t=this.backGroundImage1.y-this.height,n=0;e>0&&(n=e),t>0&&(n=t),this.backGroundImage.y>=this.height?this.backGroundImage.y=-this.height+n+Math.ceil(this.height/this.width):this.backGroundImage1.y>=this.height&&(this.backGroundImage1.y=-this.height+n+Math.ceil(this.height/this.width)),this.player.wrapperView.y+=this.player.speed,this.player.wrapperHeadView.y+=this.player.speed,this.enemy.wrapperView.y+=this.player.speed,this.enemy.wrapperHeadView.y+=this.player.speed},t.prototype.snakeMoving=function(e){if(e.isSnakeMoving&&e.mouceTouchStageX-e.lastMouseMovingX!=0){var t=this.sideHideCheck(e),n=this.sideHideLineCheck(e);if(1e4==t&&1e4==n)if(e==this.enemy);else{var i=e.mouceTouchStageX-e.lastMouseMovingX;e.mouceTouchStageX=e.lastMouseMovingX,e.x-i<=e.width/2?e.x=0+e.width/2:this.width-e.width/2<=e.x-i?e.x=this.width-e.width/2:e.x-=i}else 1e4!=t&&1e4==n?e.x=t:1e4==t&&1e4!=n&&(e.x=n)}},t.prototype.snakeBodyMoving=function(e){for(var t=(e.x,e.y,1),n=e.snakeBodyArray.length>=SnakeConst.MAX_BODY_LENGTH?SnakeConst.MAX_BODY_LENGTH:e.snakeBodyArray.length,i=n-1;i>=0;i--){var a=e.snakeBodyArray[i],o=e.snakeBodyRoute.getItemAt(t);a.x=null==o?0:o.x,a.y=null==o?0:o.y,t++}},t.prototype.removeObstacleWhenNotInScreen=function(){for(var e=[];this.obstacleArray.length>0;){var t=this.obstacleArray.pop();t.y>this.player.y+1*this.height/3+t.height&&t.y>this.enemy.y+t.height?this.wrapperBlocView.removeChild(t):e.push(t)}this.obstacleArray=e},t.prototype.removePointWhenNotInScreen=function(){for(var e=[];this.pointArray.length>0;){var t=this.pointArray.pop();t.y>this.player.y+1*this.height/3+t.height&&t.y>this.enemy.y+t.height?this.wrapperBlocView.removeChild(t):e.push(t)}this.pointArray=e},t.prototype.removeSeparateShortWhenNotInScreen=function(){for(var e=[];this.separateShortArr.length>0;){var t=this.separateShortArr.pop();t.y>this.player.y+1*this.height/3+t.height&&t.y>this.enemy.y+t.height?this.wrapperBlocView.removeChild(t):e.push(t)}this.separateShortArr=e},t.prototype.removeMagnetWhenNotInScreen=function(){for(var e=[];this.propMagnetArr.length>0;){var t=this.propMagnetArr.pop();t.y>this.player.y+1*this.height/3+t.height&&t.y>this.enemy.y+t.height?this.wrapperBlocView.removeChild(t):e.push(t)}this.propMagnetArr=e},t.prototype.removeBoomdWhenNotInScreen=function(){for(var e=[];this.propBombArr.length>0;){var t=this.propBombArr.pop();t.y>this.player.y+1*this.height/3+t.height&&t.y>this.enemy.y+t.height?this.wrapperBlocView.removeChild(t):e.push(t)}this.propBombArr=e},t.prototype.removeRocketWhenNotInScreen=function(){for(var e=[];this.propRocketArr.length>0;){var t=this.propRocketArr.pop();t.y>this.player.y+1*this.height/3+t.height&&t.y>this.enemy.y+t.height?this.wrapperBlocView.removeChild(t):e.push(t)}this.propRocketArr=e},t.prototype.sideHideCheck=function(e){if(e==this.player){for(var t=e.mouceTouchStageX-e.lastMouseMovingX,n=[],i=[],a=0;a<this.obstacleArray.length;a++){var o=this.obstacleArray[a];if(e.y<o.pos+o.height/2+e.height/2&&e.y>o.pos-o.height/2-e.height/2)if(e.x-t>o.x-o.width/2-e.width/2&&e.x<o.x-o.width/2-e.width/2){var s=o.x-o.width/2-e.width/2-1;i.push(s)}else if(e.x-t<o.x+o.width/2+e.width/2&&e.x>o.x+o.width/2+e.width/2){var r=o.x+o.width/2+e.width/2+1;n.push(r)}}return i.sort(function(e,t){return t-e}),n.sort(function(e,t){return e-t}),i.length>0?i.pop():n.length>0?n.pop():1e4}for(var t=e.mouceTouchStageX-e.lastMouseMovingX,n=[],i=[],a=0;a<this.obstacleArray.length;a++){var o=this.obstacleArray[a];if(e.y<o.pos+o.height/2+e.height/2&&e.y>o.pos-o.height/2-e.height/2)if(e.x-t>o.x-o.width/2-e.width/2&&e.x<o.x-o.width/2-e.width/2){var s=o.x-o.width/2-e.width/2-1;i.push(s)}else if(e.x-t<o.x+o.width/2+e.width/2&&e.x>o.x+o.width/2+e.width/2){var r=o.x+o.width/2+e.width/2+1;n.push(r)}}return i.sort(function(e,t){return t-e}),n.sort(function(e,t){return e-t}),i.length>0?i.pop():n.length>0?n.pop():1e4},t.prototype.sideHideLineCheck=function(e){if(e==this.player){for(var t=e.mouceTouchStageX-e.lastMouseMovingX,n=[],i=[],a=0;a<this.separateShortArr.length;a++){var o=this.separateShortArr[a];if(e.y<o.pos+o.height/2+e.height/2&&e.y>o.pos-o.height/2-e.height/2)if(e.x-t>o.x-o.width/2-e.width/2&&e.x<o.x-o.width/2-e.width/2){var s=o.x-o.width/2-e.width/2-1;i.push(s)}else if(e.x-t<o.x+o.width/2+e.width/2&&e.x>o.x+o.width/2+e.width/2){var r=o.x+o.width/2+e.width/2+1;n.push(r)}}return i.sort(function(e,t){return t-e}),n.sort(function(e,t){return e-t}),i.length>0?i.pop():n.length>0?n.pop():1e4}for(var t=e.mouceTouchStageX-e.lastMouseMovingX,n=[],i=[],a=0;a<this.separateShortArr.length;a++){var o=this.separateShortArr[a];if(e.y<o.pos+o.height/2+e.height/2&&e.y>o.pos-o.height/2-e.height/2)if(e.x-t>o.x-o.width/2-e.width/2&&e.x<o.x-o.width/2-e.width/2){var s=o.x-o.width/2-e.width/2-1;i.push(s)}else if(e.x-t<o.x+o.width/2+e.width/2&&e.x>o.x+o.width/2+e.width/2){var r=o.x+o.width/2+e.width/2+1;n.push(r)}}return i.sort(function(e,t){return t-e}),n.sort(function(e,t){return e-t}),i.length>0?i.pop():n.length>0?n.pop():1e4},t.prototype.eatMagnetCheck=function(e){if(e==this.player){for(var t=!1,n=[];this.propMagnetArr.length>0;){var i=this.propMagnetArr.pop();e.y<i.pos+i.height/2+e.height/2&&e.y>i.pos-i.height/2-e.height/2&&e.x>i.x-e.width/2&&e.x<i.x+i.width+e.width/2?(this.wrapperBlocView.removeChild(i),t=!0,e.propMagnetEffectTime=0,e.showMagnetLight(!0)):n.push(i)}return this.propMagnetArr=n,t&&game.SoundManager.getInstance().playEffect(game.SoundManager.effect,0,1),t}for(var t=!1,n=[];this.propMagnetArr.length>0;){var i=this.propMagnetArr.pop();e.y<i.pos+i.height/2+e.height/2&&e.y>i.pos-i.height/2-e.height/2&&e.x>i.x-e.width/2&&e.x<i.x+i.width+e.width/2?(this.wrapperBlocView.removeChild(i),t=!0,e.propMagnetEffectTime=0,e.showMagnetLight(!0)):n.push(i)}return this.propMagnetArr=n,t&&game.SoundManager.getInstance().playEffect(game.SoundManager.effect,0,1),t},t.prototype.eatBombCheck=function(e){for(var t=!1,n=[];this.propBombArr.length>0;){var i=this.propBombArr.pop();e.y<i.y+i.height/2+e.height/2&&e.y>i.y-i.height/2-e.height/2&&e.x>i.x-e.width/2&&e.x<i.x+i.width+e.width/2?(this.wrapperBlocView.removeChild(i),t=!0,e.showBombEffect(!0)):n.push(i)}return this.propBombArr=n,t},t.prototype.explodeCheck=function(e){var t=!1;if(e.isBombOpen&&(t=e.calcBombTime()),t){for(var n=[];this.obstacleArray.length>0;){var i=this.obstacleArray.pop();i.y<e.y&&i.y>e.y-this.height?(i.boomObstacle(),this.wrapperBlocView.removeChild(i)):n.push(i)}this.obstacleArray=n,game.SoundManager.getInstance().playEffect(game.SoundManager.explode,0,1)}return t},t.prototype.eatRocketCheck=function(e){if(e==this.player){for(var t=!1,n=[];this.propRocketArr.length>0;){var i=this.propRocketArr.pop();e.y<i.pos+i.height/2+e.height/2&&e.y>i.pos-i.height/2-e.height/2&&e.x>i.x-e.width/2&&e.x<i.x+i.width+e.width/2?(this.wrapperBlocView.removeChild(i),t=!0,e.propRocketEffectTime=0,e.showRocketEffect(!0)):n.push(i)}return this.propRocketArr=n,t&&game.SoundManager.getInstance().playEffect(game.SoundManager.effect,0,1),t}for(var t=!1,n=[];this.propRocketArr.length>0;){var i=this.propRocketArr.pop();e.y<i.pos+i.height/2+e.height/2&&e.y>i.pos-i.height/2-e.height/2&&e.x>i.x-e.width/2&&e.x<i.x+i.width+e.width/2?(this.wrapperBlocView.removeChild(i),t=!0,e.propRocketEffectTime=0,e.showRocketEffect(!0)):n.push(i)}return this.propRocketArr=n,t&&game.SoundManager.getInstance().playEffect(game.SoundManager.effect,0,1),t},t.prototype.hitLineCheck=function(e){for(var t=!1,n=[],i=e.x;this.separateShortArr.length>0;){var a=this.separateShortArr.pop();e.y<a.pos+a.height/2+e.height/2&&e.y>a.pos-a.height/2-e.height/2&&e.x>a.x-a.width/2-e.width/2&&e.x<a.x+a.width/2+e.width/2?(i=e.x>a.x?a.x+a.width+e.width/2:a.x-a.width-e.width/2,t=!0,n.push(a)):n.push(a)}return e.x=i,this.separateShortArr=n,t},t.prototype.addScore=function(e,t){e.currentScore+=t},t.prototype.updateFightScoreUI=function(e,t){e.eatBeansNum+=t,e==this.player?this.lab_score_blue.text=""+e.eatBeansNum:this.lab_score_red.text=""+e.eatBeansNum,this.isNeedScoreGroupAnim()},t.prototype.isPlayerWin=function(){return this.pkCountdownNum<=0?this.player.eatBeansNum>=this.enemy.eatBeansNum:this.enemy.currentBeanCount<=0?this.player.eatBeansNum>=this.enemy.eatBeansNum:!1},t.prototype.updatePointList=function(){this.updatePoint(this.player),this.updatePoint(this.enemy)},t.prototype.updatePoint=function(e){e.route.addItemAt(new egret.Point(e.x,e.y),0);for(var t=e.route.length-1;t>=0&&e.route.getItemAt(t).y-e.route.getItemAt(0).y>400;t--)e.route.removeItemAt(t);e.snakeBodyRoute=CaculatePointUtil.caculatePointList(e.route,40),e.snakeBodyRoute.length>200&&e.snakeBodyRoute.removeItemAt(e.snakeBodyRoute.length-1)},t.prototype.addSpeed=function(){this.speed=this.initSpeed+1},t.prototype.hitCheck=function(e,t){e.isHitBolck=!1,t.isHitBolck=!1;for(var n=[];this.obstacleArray.length>0;){var i=this.obstacleArray.pop(),a=!0;if(t.y<i.pos+i.height/2+t.height/2&&t.y>i.pos-i.height/2-t.height/2&&t.x>i.x-i.width/2-t.width/2&&t.x<i.x+i.width/2+t.width/2)if((t.isRocketOpen||t.isShieldOpen)&&null!=i)this.addScore(t,i.obstacleCount),i.obstacleCount=0,this.wrapperBlocView.contains(i)&&this.wrapperBlocView.removeChild(i),a=!1;else{if(this.enemyClearObstacleTime++,this.enemyFirstHit||this.enemyClearObstacleTime>this.clearObstacleTimeConst){if(this.enemyFirstHit=!1,t.currentBeanCount>0&&(i.reduceNumber()&&(this.wrapperBlocView.contains(i)&&this.wrapperBlocView.removeChild(i),i.obstacleCount=0,this.enemyFirstHit=!0,a=!1),null==this.enemyBumpClip&&(this.enemyBumpClip=EffectHelper.getInstance().createHitEffect(224,224,new egret.Point(t.x,t.y),0),this.addChild(this.enemyBumpClip),this.enemyBumpClip.play(1),this.enemyBumpClip.addEventListener(egret.Event.COMPLETE,this.enemyBumpClipComplete,this)),t.addCount(-1),this.addScore(t,1),t.currentBeanCount<SnakeConst.MAX_BODY_LENGTH&&t.snakeBodyArray.length>0)){var o=t.snakeBodyArray.pop();t.wrapperView.removeChild(o)}this.enemyClearObstacleTime=0}t.isHitBolck=!0}if(i.obstacleCount>=0&&e.y<i.pos+i.height/2+e.height/2&&e.y>i.pos-i.height/2-e.height/2&&e.x>i.x-i.width/2-e.width/2&&e.x<i.x+i.width/2+e.width/2)if((e.isRocketOpen||e.isShieldOpen)&&null!=i)this.addScore(e,i.obstacleCount),i.obstacleCount=0,this.wrapperBlocView.contains(i)&&this.wrapperBlocView.removeChild(i),a=!1;else{if(this.playerClearObstacleTime++,this.playerFirstHit||this.playerClearObstacleTime>this.clearObstacleTimeConst){if(this.playerFirstHit=!1,e.currentBeanCount>0&&(i.reduceNumber()&&(this.wrapperBlocView.removeChild(i),this.playerFirstHit=!0,a=!1),null==this.playerBumpClip&&(this.playerBumpClip=EffectHelper.getInstance().createHitEffect(224,224,new egret.Point(e.x,e.staticSnakeY),0),this.addChild(this.playerBumpClip),this.playerBumpClip.play(1),this.playerBumpClip.addEventListener(egret.Event.COMPLETE,this.playerBumpClipComplete,this)),e.addCount(-1),this.addScore(e,1),e.currentBeanCount<SnakeConst.MAX_BODY_LENGTH&&e.snakeBodyArray.length>0)){var o=e.snakeBodyArray.pop();e.wrapperView.removeChild(o)}this.playerClearObstacleTime=0}e.isHitBolck=!0}a&&n.push(i)}this.obstacleArray=n},t.prototype.playerHitCheck=function(e){e.isHitBolck=!1;for(var t=[];this.obstacleArray.length>0;){var n=this.obstacleArray.pop();if(e.staticSnakeY<n.y+n.height/2+e.height/2&&e.staticSnakeY>n.y-n.height/2-e.height/2&&e.x>n.x-n.width/2-e.width/2&&e.x<n.x+n.width/2+e.width/2)if(e.isRocketOpen||e.isShieldOpen)this.addScore(e,n.obstacleCount),this.wrapperBlocView.removeChild(n);else{if(null==this.bumpClip&&(this.bumpClip=EffectHelper.getInstance().createHitEffect(224,224,new egret.Point(e.x,e.staticSnakeY),0),this.addChild(this.bumpClip),this.bumpClip.play(1),this.bumpClip.addEventListener(egret.Event.COMPLETE,this.bumpClipComplete,this)),this.clearObstacleTime++,this.firstHit||this.clearObstacleTime>this.clearObstacleTimeConst){if(this.firstHit=!1,n.reduceNumber()?(this.wrapperBlocView.removeChild(n),this.firstHit=!0):t.push(n),e.currentBeanCount>0&&(e.addCount(-1),this.addScore(e,1),e.currentBeanCount<=SnakeConst.MAX_BODY_LENGTH&&e.snakeBodyArray.length>0)){var i=e.snakeBodyArray.pop();e.wrapperView.removeChild(i)}this.clearObstacleTime=0}else t.push(n);e.isHitBolck=!0}else t.push(n)}return this.obstacleArray=t,e.isHitBolck},t.prototype.enemyHitCheck=function(e){e.isHitBolck=!1;for(var t=[];this.obstacleArray.length>0;){var n=this.obstacleArray.pop();if(e.y<n.pos+n.height/2+e.height/2&&e.y>n.pos-n.height/2-e.height/2&&e.x>n.x-n.width/2-e.width/2&&e.x<n.x+n.width/2+e.width/2)if(e.isRocketOpen||e.isShieldOpen)this.addScore(e,n.obstacleCount),this.wrapperBlocView.removeChild(n);else{if(null==this.bumpClip&&(this.bumpClip=EffectHelper.getInstance().createHitEffect(224,224,new egret.Point(e.x,e.y),0),this.addChild(this.bumpClip),this.bumpClip.play(1),this.bumpClip.addEventListener(egret.Event.COMPLETE,this.bumpClipComplete,this)),this.clearObstacleTime++,this.firstHit||this.clearObstacleTime>this.clearObstacleTimeConst){if(this.firstHit=!1,n.reduceNumber()?(this.wrapperBlocView.removeChild(n),this.firstHit=!0):t.push(n),e.currentBeanCount>0&&(e.addCount(-1),this.addScore(e,1),e.currentBeanCount<=SnakeConst.MAX_BODY_LENGTH&&e.snakeBodyArray.length>0)){var i=e.snakeBodyArray.pop();e.wrapperView.removeChild(i)}this.clearObstacleTime=0}else t.push(n);e.isHitBolck=!0}else t.push(n)}return this.obstacleArray=t,e.isHitBolck},t.prototype.eatCheck=function(e){if(e==this.player){for(var t=!1,n=[];this.pointArray.length>0;){var i=this.pointArray.pop();e.isMagnetOpen?i.pos<2*this.lineWidth+e.y&&i.pos>e.y-3*this.lineWidth&&i.x>e.x-2*this.lineWidth&&i.x<e.x+2*this.lineWidth?(i.animateAndRemove(e.x,e.y),t=!0,e.addBody(i.roundCount,i.colorType),this.updateFightScoreUI(e,i.roundCount)):n.push(i):e.y<i.pos+i.height/2+e.height/2&&e.y>i.pos-i.height/2-e.height/2&&e.x>i.x-i.width/2-e.width/2&&e.x<i.x+i.width/2+e.width/2?(this.wrapperBlocView.removeChild(i),t=!0,e.addBody(i.roundCount,i.colorType),this.updateFightScoreUI(e,i.roundCount)):n.push(i)}return this.pointArray=n,t&&game.SoundManager.getInstance().playEffect(game.SoundManager.eating,0,1),t}for(var t=!1,n=[];this.pointArray.length>0;){var i=this.pointArray.pop();if(e.isMagnetOpen){this.player.staticSnakeY-(this.player.y-this.enemy.y);i.pos<2*this.lineWidth+e.y&&i.pos>e.y-3*this.lineWidth&&i.x>e.x-2*this.lineWidth&&i.x<e.x+2*this.lineWidth?(i.animateAndRemove(e.x,e.y),t=!0,e.addBody(i.roundCount,i.colorType),this.updateFightScoreUI(e,i.roundCount)):n.push(i)}else e.y<i.pos+i.height/2+e.height/2&&e.y>i.pos-i.height/2-e.height/2&&e.x>i.x-i.width/2-e.width/2&&e.x<i.x+i.width/2+e.width/2?(this.wrapperBlocView.removeChild(i),t=!0,e.addBody(i.roundCount,i.colorType),this.updateFightScoreUI(e,i.roundCount)):n.push(i)}return this.pointArray=n,t&&game.SoundManager.getInstance().playEffect(game.SoundManager.eating,0,1),t},t.prototype.bumpClipComplete=function(e){this.removeChild(this.bumpClip),this.bumpClip=null},t.prototype.playerBumpClipComplete=function(e){this.removeChild(this.playerBumpClip),this.playerBumpClip=null},t.prototype.enemyBumpClipComplete=function(e){this.removeChild(this.enemyBumpClip),this.enemyBumpClip=null},t.prototype.pause=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this),this.calcPointTimer.removeEventListener(egret.TimerEvent.TIMER,this.updatePointList,this)},t.prototype.clickEvent=function(e){this.player.isSnakeMoving=!0,this.player.lastMouseMovingX=this.player.mouceTouchStageX=e.stageX},t.prototype.cancleEvent=function(e){this.player.isSnakeMoving=!1},t.prototype.move=function(e){this.player.isSnakeMoving=!0,this.player.lastMouseMovingX=e.stageX},t.prototype.clearEvent=function(){try{this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.clickEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.move,this),this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.cancleEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.cancleEvent,this),this.calcPointTimer.removeEventListener(egret.TimerEvent.TIMER,this.updatePointList,this),this.speedAddTimer.removeEventListener(egret.TimerEvent.TIMER,this.addSpeed,this),GameConst.platform==PlatformConst.TOUTIAO&&this.btn_record.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTTRecordBtnClick,this)}catch(e){}},t.prototype.clearPlayerEvent=function(){try{this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.clickEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.move,this),this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.cancleEvent,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.cancleEvent,this)}catch(e){}},t.prototype.addPlayerEvent=function(){try{this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.clickEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.move,this),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.cancleEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.cancleEvent,this)}catch(e){}},t.prototype.againEvent=function(){try{this.addEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this),this.calcPointTimer.addEventListener(egret.TimerEvent.TIMER,this.updatePointList,this)}catch(e){}},t.prototype.getRobotNextMoveColumn=function(){if(null!=this.enemy){var e=this.perRowPosDic[this.robotCheckPropRow];if(void 0!=e&&this.enemy.y-7*this.lineWidth/5<e){var t=[],n=[0,0,0,0,0];if(this.robotCheckPropRow>1){t=this.perRowPropDic[this.robotCheckPropRow-1];for(var i=0;i<t.length;i++)t[i]==SnakeConst.Prop_Wall?n[i]=1:t[i]>-500&&t[i]<0&&(n[i]=2)}var a=this.perRowPropDic[this.robotCheckPropRow],o=this.getRobotCurColumn(),s=game.RobotMgr.getInstance().calculateTheBestColumn(a,this.robotCheckPropRow,o,n);(s-o)*(this.width/5);this.enemy.isSnakeMoving=!0,this.enemy.robotAutoMove(s),this.robotCheckPropRow++}}},t.prototype.getRobotCurColumn=function(){return Math.floor(this.enemy.x/(this.width/5))},t.prototype.setPkCountdown=function(e){var t=this;this.pkCountdown&&this.pkCountdown.clearTimer();var n=this;this.pkCountdown=new TimerCountdown(e,1e3,function(e){var t=e/1e3;Math.floor(t/60);n.lab_time.text=""+t,n.pkCountdownNum=t},function(){n.lab_time.text="0",n.pkCountdownNum=0,t.clearCountdown(),t.isGameFinsh=!0,t.clearEvent(),UserInfo.isPveGame=!1,t.stopTTRecord(),game.SoundManager.getInstance().stopBGM(),game.GetHttpData.getInstance().pveGameStop(t.data)})},t.prototype.clearCountdown=function(){this.pkCountdown&&this.pkCountdown.clearTimer()},t.prototype.pauseCountdown=function(){this.pkCountdown&&this.pkCountdown.Pause(!0)},t.prototype.finishGame=function(){this.isGameFinsh=!0,this.clearEvent(),UserInfo.isPveGame=!1},t.prototype.isNeedScoreGroupAnim=function(){this.isScoreGroupAniming||(this.player.eatBeansNum>this.enemy.eatBeansNum?this.group_blue.y>this.group_red.y&&this.doScoreGroupAnim(this.group_blue,this.group_red):this.group_red.y>this.group_blue.y&&this.doScoreGroupAnim(this.group_red,this.group_blue))},t.prototype.doScoreGroupAnim=function(e,t){var n=this;this.isScoreGroupAniming=!0;var i=e.y,a=t.y;egret.Tween.get(e).to({y:a},600,egret.Ease.sineIn),egret.Tween.get(t).to({y:i},600,egret.Ease.sineIn).call(function(){n.isScoreGroupAniming=!1,n.isNeedScoreGroupAnim()})},t.prototype.isNeedUpdateSpeed=function(e){(60==e||120==e||180==e||240==e)&&this.updateSpeed(e)},t.prototype.updateSpeed=function(e){this.player.updateSpeed(SnakeConst.Add_Speed[e]),this.enemy.updateSpeed(SnakeConst.Add_Speed[e])},t.prototype.updateTTUI=function(){var e=this;GameConst.platform==PlatformConst.TOUTIAO&&(this.isRecording?this.lab_recording.visible=!0:this.lab_recording.visible=!1,this.group_TouTiao.visible=!0,this.setChildIndex(this.group_TouTiao,this.numChildren),UserInfo.ttPveUsableShareTimes>0?(this.group_shareReward.visible=!0,egret.setTimeout(function(){e.group_shareReward.visible=!1},this,3e3),this.lab_record_diamond.text=""+UserInfo.ttPveShareGetDiamondNum):this.group_shareReward.visible=!1)},t.prototype.getRecordSeconds=function(){return this.finishRecordSeconds-this.startRecordSeconds},t.prototype.ttStartRecord=function(e){var t=this;GameConst.platform==PlatformConst.TOUTIAO&&(this.isRecording?(this.finishRecordSeconds=egret.getTimer(),this.getRecordSeconds()<3e3&&game.TipsManager.getInstance().show(game.ETipsID.TipsToutiao,{title:"录屏失败：录屏时长低于 3 秒",type:TipsStyle.wordType}),this.btn_record.setImg("btn_record_start_png"),this.lab_recording.visible=!1,this.isRecording=!1,game.TouTiaoSDKMgr.getInstance().stopRecordVideo()):(this.btn_record.setImg("btn_record_ing_png"),this.lab_recording.visible=!0,this.isRecording=!0,this.startRecordSeconds=egret.getTimer(),game.TouTiaoSDKMgr.getInstance().recordVideo(e,function(){t.btn_record.setImg("btn_record_start_png"),t.lab_recording.visible=!1,t.isRecording=!1,t.finishRecordSeconds=egret.getTimer()},function(e){t.btn_record.setImg("btn_record_start_png"),t.lab_recording.visible=!1,t.isRecording=!1,t.finishRecordSeconds=egret.getTimer(),t.getRecordSeconds()<3e3&&game.TipsManager.getInstance().show(game.ETipsID.TipsToutiao,{title:"录屏失败：录屏时长低于 3 秒",type:TipsStyle.wordType})
})))},t.prototype.stopTTRecord=function(){GameConst.platform==PlatformConst.TOUTIAO&&this.isRecording&&game.TouTiaoSDKMgr.getInstance().stopRecordVideo()},t.prototype.onTTRecordBtnClick=function(){this.ttStartRecord(30)},t}(eui.Component);__reflect(GameFight.prototype,"GameFight",["eui.UIComponent","egret.DisplayObject"]);var GameSignIn=function(e){function t(){var t=e.call(this)||this;return t.data=0,t.skinName="resource/eui_skins/GameSignIn.exml",GameConst.platform==PlatformConst.DAYU&&(t.signImg.source="muchegg_png"),t.init(),t}return __extends(t,e),t.prototype.init=function(){var e=this;this.anim(),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.video_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.video,this),this.reward_label.addEventListener(egret.TouchEvent.TOUCH_END,this.reward,this),this.timeOut=setTimeout(function(){e.reward_label.visible=!0},3e3),this.languageHandle(),game.EventManager.getInstance().addListener(EventNotify.Language_change,this.languageHandle,this)},t.prototype.anim=function(){egret.Tween.get(this.rotationbg,{loop:!0}).to({rotation:360},8e3)},t.prototype.video=function(){var e=this;GameConst.platform==PlatformConst.ANDROID_MOBGI?this.invokeMobgiAdWhenSignin():GameConst.platform==PlatformConst.OVERSEAS?game.GoogleAdsSDKMgr.getInstance().showVideo(game.EVideoPosition.FreeSkin,function(t){var n=HttpUtil.getURL(GameConst.GAME_SIGNIN,!0);game.GetHttpData.getInstance().loginRewardResult(n,"double",e.data)},function(e){game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})}):GameConst.platform==PlatformConst.WEIXIN?game.GetHttpData.getInstance().wxShowAd(9,this.data):GameConst.platform==PlatformConst.TOUTIAO?game.GetHttpData.getInstance().ttShowAd(5,this.data):(GameConst.platform==PlatformConst.DAYU||GameConst.platform==PlatformConst.H5||GameConst.platform==PlatformConst.H5noad)&&(game.GetHttpData.getInstance().h5GetBury("Bird_Ad",10),window.showVideoAd=function(t){if(t){game.GetHttpData.getInstance().h5GetBury("Bird_Ad",11);var n=HttpUtil.getURL(GameConst.GAME_SIGNIN,!0);game.GetHttpData.getInstance().loginRewardResult(n,"double",e.data)}else game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})})},t.prototype.invokeMobgiAdWhenSignin=function(){function e(i){var a=i.data;if(game.EventManager.getInstance().removeListener(n,e,t),a.reward){var o=HttpUtil.getURL(GameConst.GAME_SIGNIN,!0);game.GetHttpData.getInstance().loginRewardResult(o,"double",this.data)}else game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})}var t=this,n=HclwAndroidNotify.VIDEO_SIGNIN;HclwAndroidUtil.getInstance().showVideoAd(n,e)},t.prototype.reward=function(){var e=HttpUtil.getURL(GameConst.GAME_SIGNIN,!0);game.GetHttpData.getInstance().loginRewardResult(e,"sigle",this.data)},t.prototype.remove=function(){egret.Tween.removeAllTweens(),clearTimeout(this.timeOut),this.reward_label.visible&&(this.reward_label.visible=!1),game.EventManager.getInstance().removeListener(EventNotify.Language_change,this.languageHandle,this)},t.prototype.languageHandle=function(){this.reward_label.text=game.LanguageManager.getString("psignin_receive"),this.libao_img.source=game.LanguageManager.getString("png_reward_libao"),this.diamond_label.source=game.LanguageManager.getString("png_reward_diamond"),this.tip_img.source=game.LanguageManager.getString("png_tip_img"),this.video_btn.setImg(game.LanguageManager.getString("png_get_btn"))},t}(eui.Component);__reflect(GameSignIn.prototype,"GameSignIn");var GameSignInDays=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/GameSignInDays.exml",t.init(),t}return __extends(t,e),t.prototype.init=function(){this.signTitle.text=game.LanguageManager.getString("sign_7days_title"),this.signBackBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.back,this),this.signBtn.addEventListener(egret.TouchEvent.TOUCH_END,this.signReward,this),this.doubleGroup.addEventListener(egret.TouchEvent.TOUCH_END,this.doubleCheck,this),this.setDaysReward(),this.doubleLabel.text=game.LanguageManager.getString("double_reward"),SignManager.getInstance().canSignInToday()?(this.signBtn.touchEnabled=!0,this.doubleCheckImg.visible=!0,this.checkIsFirstSignin()&&this.doubleCheck(),this.signBtn.setProp("labelDisplay","text",game.LanguageManager.getString("sign_gain"))):(this.signBtn.touchEnabled=!1,this.signBtn.visible=!1,this.doubleGroup.visible=!1,this.signBtn.setProp("adIcon","visible",!1),this.signBtn.setProp("labelDisplay","horizontalCenter",0),this.signBtn.setProp("labelDisplay","text",game.LanguageManager.getString("sign_finished")))},t.prototype.checkIsFirstSignin=function(){return null!=game.LocalStorageUtils.getBoolean("firstSignIn")&&game.LocalStorageUtils.getString("firstSignIn")?!1:!0},t.prototype.doubleCheck=function(){this.doubleCheckImg.visible?(this.doubleCheckImg.visible=!1,this.signBtn.setProp("adIcon","visible",!1),this.signBtn.setProp("labelDisplay","horizontalCenter",0)):(this.doubleCheckImg.visible=!0,this.signBtn.setProp("adIcon","visible",!0),this.signBtn.setProp("labelDisplay","horizontalCenter",35))},t.prototype.setDaysReward=function(){this.setReward(1,this.day1,this.signItemBg1,this.dayLabel1,this.rewardIcon1,this.rewardCount1,this.signTag1,this.expireBg1,this.expireLabel1),this.setReward(2,this.day2,this.signItemBg2,this.dayLabel2,this.rewardIcon2,this.rewardCount2,this.signTag2,this.expireBg2,this.expireLabel2),this.setReward(3,this.day3,this.signItemBg3,this.dayLabel3,this.rewardIcon3,this.rewardCount3,this.signTag3,this.expireBg3,this.expireLabel3),this.setReward(4,this.day4,this.signItemBg4,this.dayLabel4,this.rewardIcon4,this.rewardCount4,this.signTag4,this.expireBg4,this.expireLabel4),this.setReward(5,this.day5,this.signItemBg5,this.dayLabel5,this.rewardIcon5,this.rewardCount5,this.signTag5,this.expireBg5,this.expireLabel5),this.setReward(6,this.day6,this.signItemBg6,this.dayLabel6,this.rewardIcon6,this.rewardCount6,this.signTag6,this.expireBg6,this.expireLabel6),this.setReward(7,this.day7,this.signItemBg7,this.dayLabel7,this.rewardIcon7,this.rewardCount7,this.signTag7,this.expireBg7,this.expireLabel7)},t.prototype.setReward=function(e,t,n,i,a,o,s,r,h){i.text=game.LanguageManager.getString("day_"+e);var g=SignManager.getInstance().getRewardById(e);e<=SignManager.getInstance().getSignInCount()?s.visible=!0:s.visible=!1,g.expire>0?(r.visible=!0,h.text=game.DateUtil.expireHour(g.expire,"H")):(r.visible=!1,h.visible=!1),a.source=SignManager.getInstance().getRewardImg(e),g.type==Sign7RewardInfo.TYPE_DIAMOND?(o.text="X"+g.num,o.visible=!0):(o.visible=!1,a.scaleX=.5,a.scaleY=.5)},t.prototype.back=function(){game.PanelManager.getInstance().close(game.EPanelID.GameSignInDays,!0);var e=game.PanelManager.getInstance().getPanel(game.EPanelID.LoginMain);e.updateNumber(),e.listSkin.removeChildren(),e.getUserinfo()},t.prototype.signReward=function(){var e=this.doubleCheckImg.visible;if(e){if(this.checkIsFirstSignin()&&game.LocalStorageUtils.saveBoolean("firstSignIn",!0),GameConst.platform==PlatformConst.ANDROID_MOBGI)this.invokeMobgiAdWhenSignin();else if(GameConst.platform==PlatformConst.OVERSEAS)game.GoogleAdsSDKMgr.getInstance().showVideo(game.EVideoPosition.FreeSkin,function(e){var t={is_double:1},n=HttpUtil.getURL(GameConst.GAME_SEVEN_DAYS_SIGNIN,!0,t);game.GetHttpData.getInstance().signInResult(n)},function(e){game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})});else if(GameConst.platform==PlatformConst.WEIXIN)game.GetHttpData.getInstance().wxShowAd(5);else if(GameConst.platform==PlatformConst.TOUTIAO)game.GetHttpData.getInstance().ttShowAd(5);else if(GameConst.platform==PlatformConst.DAYU||GameConst.platform==PlatformConst.H5||GameConst.platform==PlatformConst.H5noad){game.H5externalAndroid.getInstance().showVideo();window.showVideoAd=function(e){if(e){console.log("关闭视频。。");var t={is_double:1},n=HttpUtil.getURL(GameConst.GAME_SEVEN_DAYS_SIGNIN,!0,t);game.GetHttpData.getInstance().signInResult(n)}else game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})}}}else{var t={is_double:0},n=HttpUtil.getURL(GameConst.GAME_SEVEN_DAYS_SIGNIN,!0,t);game.GetHttpData.getInstance().signInResult(n)}},t.prototype.invokeMobgiAdWhenSignin=function(){function e(i){var a=i.data;if(game.EventManager.getInstance().removeListener(n,e,t),a.reward){var o={is_double:1},s=HttpUtil.getURL(GameConst.GAME_SEVEN_DAYS_SIGNIN,!0,o);game.GetHttpData.getInstance().signInResult(s)}else game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})}var t=this,n=HclwAndroidNotify.VIDEO_SIGNIN;HclwAndroidUtil.getInstance().showVideoAd(n,e)},t}(eui.Component);__reflect(GameSignInDays.prototype,"GameSignInDays");var GameStore=function(e){function t(t,n){var i=e.call(this)||this;return i.data=null,i.skinName="resource/eui_skins/GameStore.exml",i.width=t,i.height=n,i.pay_scroll.scrollPolicyH="OFF",i.init(),i}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.storeData(this.data)},t.prototype.init=function(){this.title_label.text=game.LanguageManager.getString("pstore_title"),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),UserInfo.isQAD?this.payAd_btn.visible=!1:(this.payAd_btn.visible=!0,this.payAd_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.payAd,this)),this.store_close_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.back,this),this.video_group.addEventListener(egret.TouchEvent.TOUCH_END,this.video,this),this.diamond_number.text=UserInfo.DiamondNumber.toString(),this.languageHandle(),game.EventManager.getInstance().addListener(EventNotify.Language_change,this.languageHandle,this)},t.prototype.storeData=function(e){this.sourceArr=[];var t=e.adInfo;this.lookLabel.text=(t.limitMax-t.limit).toString(),this.maxLabel.text=t.limitMax;for(var n=t.getCount.toString(),i="",a=0;a<n.length;a++)i=i+n[a]+" ";this.diamond_label.text=i.toString(),this.product=e.qAD.product_id;var o=e.shopList,s=0;for(var r in o){var h="$"+o[r].price/100;s=o[r].productId;var g={img:parseInt(r)-1,paynumber:o[r].count+game.LanguageManager.getString("pstore_diamond"),money:h,productId:s};this.sourceArr.push(g)}var l=new eui.ArrayCollection(this.sourceArr);this.store_listData.dataProvider=l,this.store_listData.itemRenderer=storeListData},t.prototype.back=function(){game.PanelManager.getInstance().close(game.EPanelID.GameStore,!0);var e=game.PanelManager.getInstance().getPanel(game.EPanelID.LoginMain);e.updateNumber()},t.prototype.video=function(){game.GoogleAdsSDKMgr.getInstance().showVideo(game.EVideoPosition.GetDiamond,function(e){game.GetHttpData.getInstance().GetAdData(2)},function(e){game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})})},t.prototype.updateData=function(e){this.lookLabel.text=(e.limitMax-e.limit).toString(),UserInfo.DiamondNumber=e.sumCount,this.diamond_number.text=UserInfo.DiamondNumber.toString();var t=e.getCount,n="+"+t;game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:n,type:TipsStyle.getDiamond})},t.prototype.payAd=function(){if(UserInfo.Logintype==LoginTypestaus.touristLogin){var e=game.LanguageManager.getString("tips_13");game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:e,type:TipsStyle.wordType}),setTimeout(function(){for(var e=[game.EPanelID.LoginMain,game.EPanelID.GameStore],t=0;t<e.length;t++)game.PanelManager.getInstance().close(e[t],!0);game.PanelManager.getInstance().open(game.EPanelID.LoginType)},1500)}else game.GoogleSDKMgr.getInstance().googleStartBilling(this.product)},t.prototype.remove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.payAd_btn.visible&&this.payAd_btn.removeEventListener(egret.TouchEvent.TOUCH_END,this.payAd,this),this.store_close_btn.removeEventListener(egret.TouchEvent.TOUCH_END,this.back,this),this.video_group.removeEventListener(egret.TouchEvent.TOUCH_END,this.video,this),game.EventManager.getInstance().removeListener(EventNotify.Language_change,this.languageHandle,this)},t.prototype.languageHandle=function(){this.video_btn.setImg(game.LanguageManager.getString("png_store_videoDiamond_btn"))},t}(eui.Component);__reflect(GameStore.prototype,"GameStore");var GameTask=function(e){function t(){var t=e.call(this)||this;return t.dataArray=new eui.ArrayCollection,t.skinName="resource/eui_skins/GameTaskSkin.exml",t.init(),t}return __extends(t,e),t.prototype.init=function(){this.task_title.text=game.LanguageManager.getString("task_title"),this.task_back.addEventListener(egret.TouchEvent.TOUCH_END,this.back,this),this.setListUI()},t.prototype.setListUI=function(){this.dataArray.source=TaskManager.getInstance().getTaskInfos(),this.taskList.dataProvider=this.dataArray,this.taskList.itemRenderer=GameTaskItem},t.prototype.back=function(){game.PanelManager.getInstance().close(game.EPanelID.GameTask,!0);var e=game.PanelManager.getInstance().getPanel(game.EPanelID.LoginMain);e.updateNumber(),e.getTaskInfos(),GameConst.platform==PlatformConst.TOUTIAO?game.TouTiaoSDKMgr.getInstance().createBannerAd():GameConst.platform==PlatformConst.H5&&(console.log("show bannerad"),document.getElementById("banneradbox")&&(document.getElementById("banneradbox").style.display="block"))},t.prototype.refresh=function(){this.dataArray.source=TaskManager.getInstance().getTaskInfos(),this.taskList.dataProviderRefreshed()},t}(eui.Component);__reflect(GameTask.prototype,"GameTask");var RankList=function(e){function t(t,n){var i=e.call(this)||this;return i.isclassType=!0,i.pageIndex0=1,i.rankpage=1,i.myranklistData=[],i.isclassic=!0,i.skinName="resource/eui_skins/RankListSkin.exml",i.width=t,i.height=n,i.rect.touchEnabled=!0,i.rect1.touchEnabled=!0,i.addEventListener(egret.Event.REMOVED_FROM_STAGE,i.remove,i),i.backbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,i.back,i),i.scroller.addEventListener(egret.TouchEvent.TOUCH_MOVE,i.move,i),i.scroller0.addEventListener(egret.TouchEvent.TOUCH_MOVE,i.move1,i),i.classRank_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,i.classicRank,i),i.vs_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,i.VsRank,i),i.viewStack.selectedIndex=0,i.rank_scroll.scrollPolicyH="OFF",i.headIcon.mask=i.maskimg,i.isbottom=!0,i.ranklistDatas=[],i.languageHandle(),game.EventManager.getInstance().addListener(EventNotify.Language_change,i.languageHandle,i),i.judgePlatform(),i}return __extends(t,e),t.prototype.judgePlatform=function(){PlatformManager.changeUI(this.H5_group,this.Overseas_mylist),GameConst.platform==PlatformConst.WEIXIN&&(this.scroller.visible=!1)},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),GameConst.platform==PlatformConst.DAYU?this.h5getUserinfo(this.data):GameConst.platform==PlatformConst.OVERSEAS?this.getUserinfo(this.data):GameConst.platform==PlatformConst.WEIXIN?(this.rank_type.visible=!1,this.openWxList()):(GameConst.platform==PlatformConst.ANDROID_MOBGI||GameConst.platform==PlatformConst.TOUTIAO||GameConst.platform==PlatformConst.H5noad||GameConst.platform==PlatformConst.H5)&&this.getUserinfo(this.data)},t.prototype.openWxList=function(){this.previous_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.previouslist,this),this.next_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.nextlist,this),this.wxrank_group.visible=!0,this.wx_btn.visible=!0,window.sharedCanvas.width=this.wxrank_group.width,window.sharedCanvas.height=this.wxrank_group.height;var e=new egret.BitmapData(window.sharedCanvas);e.$deleteSource=!1;var t=new egret.Texture;t._setBitmapData(e),this.bitmap=new egret.Bitmap(t),this.bitmap.width=this.wxrank_group.width,this.bitmap.height=this.wxrank_group.height,console.log("bitmapdata",e),this.wxrank_group.addChild(this.bitmap),egret.startTick(function(t){return egret.WebGLUtils.deleteWebGLTexture(e.webGLTexture),e.webGLTexture=null,!1},this);var n={command:"friend",openid:RoleInfo.getInstance().openId,page:0};WXProxy.instance.postMessage(n)},t.prototype.nextPageClick=function(e){var t={command:"paging",page:1};WXProxy.instance.postMessage(t)},t.prototype.nextlist=function(){var e={command:"paging",page:1};WXProxy.instance.postMessage(e)},t.prototype.previouslist=function(){var e={command:"paging",page:-1};WXProxy.instance.postMessage(e)},t.prototype.openTTList=function(){},t.prototype.back=function(){game.PanelManager.getInstance().close(game.EPanelID.RankList,!0);var e=game.PanelManager.getInstance().getPanel(game.EPanelID.LoginMain);e.updateNumber(),GameConst.platform==PlatformConst.TOUTIAO?game.TouTiaoSDKMgr.getInstance().createBannerAd():GameConst.platform==PlatformConst.H5&&(console.log("show bannerad"),document.getElementById("banneradbox")&&(document.getElementById("banneradbox").style.display="block"))},t.prototype.h5getUserinfo=function(e,t){void 0===t&&(t=UserInfo.RankType);var n={id:this.h5_myid,score:this.h5_myscore,avatar:this.headIcon,rank:[this.h5_geton_label1,this.h5_geton_label2],isreward:this.h5_myreward_group};this.mydata(e.mine,n),this.rankList(e.rankList,t)},t.prototype.getUserinfo=function(e,t){void 0===t&&(t=UserInfo.RankType);var n={id:this.myid,score:this.myscore,avatar:this.headIcon,rank:[this.geton_label1,this.geton_label2],isreward:this.myreward_group};this.mydata(e.mine,n),this.rankList(e.rankList,t)},t.prototype.nextData=function(e,t){void 0===t&&(t=UserInfo.RankType),this.rankList(e.rankList,t),this.isbottom=!0},t.prototype.rankList=function(e,t){var n=!1,i=0,a="RankList_json.ranklistbg1",o={},s="";for(var r in e){var h=parseInt(r)-1,g=e[r];if(g.hasOwnProperty("reward")&&(i=g.reward,n=g.reward>0?!0:!1),a=h%2==0?"RankList_json.ranklistbg1":"RankList_json.ranklistbg2",s=""!=g.nick?g.nick:g.id,o={rank:e[r].rank,rankid:s,rankscore:g.score,avatar:g.avatar,imgbg:a,rankreward:n,rewardNumber:i,isclassic:this.isclassic},t==UserInfo.RankType+1){this.ranklistDatas1.push(o);var l=new eui.ArrayCollection(this.ranklistDatas1);this.ranklist0.dataProvider=l,this.ranklist0.itemRenderer=ranklistData}else{this.ranklistDatas.push(o);var l=new eui.ArrayCollection(this.ranklistDatas);this.ranklist.dataProvider=l,this.ranklist.itemRenderer=ranklistData}}},t.prototype.mydata=function(e,t){e.hasOwnProperty("reward")&&(e.reward>0?(t.isreward.visible=!0,this.h5_number.text=e.reward):t.isreward.visible=!1),""!=e.nick?t.id.text=StringTool.formatNickName(e.nick,9):t.id.text=StringTool.formatNickName(e.id,9),t.score.text=StringTool.formatNickName(e.score,7),""!=e.avatar&&(t.avatar.source=e.avatar),e.rank<4&&e.rank>0?(t.rank[0].visible=!1,t.rank[1].visible=!0,1==e.rank?t.rank[1].source="RankList_json.rank_one":2==e.rank?t.rank[1].source="RankList_json.rank_two":3==e.rank&&(t.rank[1].source="RankList_json.rank_three")):(e.rank>=4||0==e.rank)&&(0!=e.rank?t.rank[0].visible=!0:t.rank[0].visible=!1,t.rank[1].visible=!1,t.rank[0].text=e.rank.toString()),GameConst.platform!=PlatformConst.DAYU||this.isclassic||(this.h5_myreward_group.visible=!1)},t.prototype.move=function(e){e.stopPropagation(),this.scroller.viewport.scrollV+this.scroller.height>=this.scroller.viewport.contentHeight&&this.isbottom&&(this.isbottom=!1,this.rankpage+=1,game.GetHttpData.getInstance().GetGameRankList(this.rankpage,UserInfo.RankType))},t.prototype.move1=function(e){e.stopPropagation(),this.scroller0.viewport.scrollV+this.scroller0.height>=this.scroller0.viewport.contentHeight&&this.isbottom&&(this.isbottom=!1,this.pageIndex0+=1,game.GetHttpData.getInstance().GetGameRankList(this.pageIndex0,UserInfo.RankType+1))},t.prototype.classicRank=function(){this.isclassic=!0,this.scroller.viewport.scrollV=0,this.ranklistDatas=[],this.rankpage=1,this.isbottom=!0,this.viewStack.selectedIndex=0,this.rankStyle(!0),this.isclassType=!0,game.GetHttpData.getInstance().GetGameRankList(1,UserInfo.RankType)},t.prototype.VsRank=function(){this.isclassic=!1,this.scroller0.viewport.scrollV=0,this.ranklistDatas1=[],this.isbottom=!0,this.pageIndex0=1,this.isclassType=!1,this.viewStack.selectedIndex=1,GameConst.platform==PlatformConst.OVERSEAS?this.vs_btn.setTitle("1v1",30,13721092):this.vs_btn.setTitle("对战模式",30,13721092),this.rankStyle(!1),game.GetHttpData.getInstance().GetGameRankList(1,UserInfo.RankType+1)},t.prototype.rankStyle=function(e){var t=e?13721092:8145419,n=e?8145419:13721092,i=e?"boxTap2_png":"boxTap1_png",a=e?"boxTap1_png":"boxTap2_png";this.classRank_btn.setTitle(game.LanguageManager.getString("prank_type1"),30,t),GameConst.platform==PlatformConst.OVERSEAS?this.vs_btn.setTitle("1v1",30,n):this.vs_btn.setTitle("对战模式",30,n),this.classRank_btn.setImg(a),this.vs_btn.setImg(i)},t.prototype.languageHandle=function(){console.log(game.LanguageManager.getString("prank_title")),this.lab_rankTitle.text=game.LanguageManager.getString("prank_title"),this.classRank_btn.setTitle(game.LanguageManager.getString("prank_type1"),30,13721092),GameConst.platform==PlatformConst.OVERSEAS?this.vs_btn.setTitle("1v1",30,8145419):this.vs_btn.setTitle("对战模式",30,8145419)},t.prototype.remove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.backbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.back,this),this.scroller.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.move,this),game.EventManager.getInstance().removeListener(EventNotify.Language_change,this.languageHandle,this)},t}(eui.Component);__reflect(RankList.prototype,"RankList");var ResultUI=function(e){function t(t,n){var i=e.call(this)||this;return i.data=null,i.skinName="resource/eui_skins/ResultSkin.exml",i.width=t,i.height=n,i.judgePlatform(),i.init(),i}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.gameOverData(this.data)},t.prototype.judgePlatform=function(){PlatformManager.changeUI(this.back_group,this.btn_group)},t.prototype.init=function(){this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.replay_btn.addEventListener(egret.TouchEvent.TOUCH_END,this.replayBtnClick,this),this.relive_group.addEventListener(egret.TouchEvent.TOUCH_END,this.diamondClick,this),this.share_Group.addEventListener(egret.TouchEvent.TOUCH_END,this.shareBtnClick,this),this.back_Group.addEventListener(egret.TouchEvent.TOUCH_END,this.backBtnClick,this),this.back_Group1.addEventListener(egret.TouchEvent.TOUCH_END,this.backBtnClick,this),GameConst.platform==PlatformConst.TOUTIAO&&(this.btn_tt_shareRecord.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShareRecordBtnClick,this),this.btn_tt_returnMain.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backBtnClick,this));var e=GameLogic.getInstance().currentScore,t=SkinInfoManager.getInstance().getSkinBySid(UserInfo.curSid);t&&t.getEffect(EffectInfo.EFFECT_SCORE)>0&&(e+=Math.floor(e*t.getEffect(EffectInfo.EFFECT_SCORE))),this.run_number_text.text=StringTool.formatNickName(e.toString(),5),this.languageHandle(),game.EventManager.getInstance().addListener(EventNotify.Language_change,this.languageHandle,this),GameConst.platform===PlatformConst.WEIXIN?(WXConst.showWXJumpMiniProgramBtn||(this.back_group.y=160),this.tryToSavePveScore(parseInt(this.run_number_text.text)),WXProxy.instance.createBannerAd()):GameConst.platform==PlatformConst.TOUTIAO?(this.tryToSavePveScore(parseInt(this.run_number_text.text)),game.TouTiaoSDKMgr.getInstance().createBannerAd()):GameConst.platform==PlatformConst.H5&&document.getElementById("banneradbox")&&(document.getElementById("banneradbox").style.display="block")},t.prototype.gameOverData=function(e){var t=e.gameInfo,n=e.r_cfg;this.number_label.text=e.zs_r_needCount,console.log(e.gameInfo),GameConst.platform==PlatformConst.OVERSEAS||GameConst.platform==PlatformConst.WEIXIN||GameConst.platform==PlatformConst.TOUTIAO?t.share_r_limit>=n.share_r_limitMax?GameConst.platform==PlatformConst.TOUTIAO?this.updateTTUI():(this.back_group.visible=!0,this.btn_group.visible=!1,this.back_group.y=this.btn_group.y):GameConst.platform==PlatformConst.TOUTIAO?this.updateTTUI():(this.back_group.visible=!0,this.btn_group.visible=!1,GameConst.platform!=PlatformConst.WEIXIN||WXConst.showWXJumpMiniProgramBtn||(this.btn_group.visible=!1,this.back_group.visible=!0)):(GameConst.platform==PlatformConst.ANDROID_MOBGI||GameConst.platform==PlatformConst.H5noad||GameConst.platform==PlatformConst.H5)&&(this.back_group.visible=!0,this.btn_group.visible=!1,this.back_group.y=this.btn_group.y),GameConst.platform==PlatformConst.ANDROID_MOBGI||GameConst.platform==PlatformConst.OVERSEAS||GameConst.platform==PlatformConst.WEIXIN||GameConst.platform==PlatformConst.H5noad||GameConst.platform==PlatformConst.H5?t.ad_r_limit>=n.ad_r_limitMax?(this.replay_btn.visible=!1,t.zs_r_limit>=n.zs_r_limitMax?this.relive_group.visible=!1:(GameConst.platform==PlatformConst.WEIXIN&&game.GetHttpData.getInstance().wxInterstitialAd(),this.relive_group.visible=!0)):(this.replay_btn.visible=!0,this.relive_group.visible=!1):GameConst.platform==PlatformConst.DAYU?this.relive_group.visible=!0:GameConst.platform==PlatformConst.TOUTIAO&&(this.replay_btn.visible=!0,this.relive_group.visible=!1)},t.prototype.reportscore=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,i,a,o,s,r,h,g;return __generator(this,function(l){switch(l.label){case 0:return e=GameLogic.getInstance().currentScore,t=HttpUtil.sessionKey,n=(new Date).getTime()/1e3|0,i="dayu2"+e+n,a=(new md5).hex_md5(i),o={point:e,gameid:2,ts:n,sign:a},s=HttpUtil.getURL(GameConst.GAME_REPORT_SOCRE,!0,o),[4,HttpUtil.loadGet(s,null)];case 1:return r=l.sent(),r&&(h=JSON.parse(r+""),console.log(h),g=h.code,1==g&&console.log("上报成功")),[2]}})})},t.prototype.tryToSavePveScore=function(e){var t={command:"updateScore",score:e};console.log("往开放域发送数据："+t),WXProxy.instance.postMessage(t)},t.prototype.replayBtnClick=function(){console.log("replayBtnClick GameConst.platform__"+GameConst.platform),GameConst.platform==PlatformConst.ANDROID_MOBGI?this.invokeMobgiAdWhenReplay():GameConst.platform==PlatformConst.DAYU||GameConst.platform==PlatformConst.H5||GameConst.platform==PlatformConst.H5noad?(GameConst.platform==PlatformConst.H5&&(document.getElementById("banneradbox").style.display="none"),game.GetHttpData.getInstance().h5GetBury("Bird_Resurgence_Click",0),game.H5externalAndroid.getInstance().showVideo(),window.showVideoAd=function(e){e?game.GetHttpData.getInstance().ResurGence(UserInfo.GameId,1):game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})}):(game.GetHttpData.getInstance().h5GetBury(UserInfo.buryName.Classic_Rev_Ad_click,0),GameConst.platform==PlatformConst.OVERSEAS?game.GoogleAdsSDKMgr.getInstance().showVideo(game.EVideoPosition.GetOneLife,function(e){game.GetHttpData.getInstance().ResurGence(UserInfo.GameId,1)},function(e){game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})}):GameConst.platform===PlatformConst.WEIXIN?game.GetHttpData.getInstance().wxShowAd(4):GameConst.platform==PlatformConst.TOUTIAO&&(game.TouTiaoSDKMgr.getInstance().hideBannerAd(),game.GetHttpData.getInstance().ttShowAd(4)))},t.prototype.invokeMobgiAdWhenReplay=function(){function e(i){var a=i.data;game.EventManager.getInstance().removeListener(n,e,t),a.reward?game.GetHttpData.getInstance().ResurGence(UserInfo.GameId,1):game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})}var t=this,n=HclwAndroidNotify.VIDEO_REPLAY;HclwAndroidUtil.getInstance().showVideoAd(n,e)},t.prototype.diamondClick=function(){if(GameConst.platform!=PlatformConst.DAYU&&game.GetHttpData.getInstance().h5GetBury(UserInfo.buryName.Classic_Rev_diamond_click,0),GameConst.platform==PlatformConst.WEIXIN){var e=parseInt(this.number_label.text);if(UserInfo.DiamondNumber<e){game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:"钻石不足",type:TipsStyle.wordType});var t=setTimeout(function(){clearTimeout(t),game.GetHttpData.getInstance().wxShowAd(10)},500)}else game.GetHttpData.getInstance().ResurGence(UserInfo.GameId,3)}else game.GetHttpData.getInstance().ResurGence(UserInfo.GameId,3)},t.prototype.backBtnClick=function(){GameConst.platform==PlatformConst.WEIXIN?WXProxy.instance.hideBannerAd():GameConst.platform==PlatformConst.TOUTIAO?game.TouTiaoSDKMgr.getInstance().hideBannerAd():GameConst.platform==PlatformConst.H5&&(document.getElementById("banneradbox").style.display="none"),game.GetHttpData.getInstance().GameOver(UserInfo.GameId)},t.prototype.shareBtnClick=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){return GameConst.platform==PlatformConst.OVERSEAS?game.FacebookSDKMgr.getInstance().facebookShare(game.ESharePosition.GameBackLife):GameConst.platform==PlatformConst.WEIXIN?(WXProxy.instance.share(!0),e=setTimeout(function(){clearTimeout(e),game.GetHttpData.getInstance().ResurGence(UserInfo.GameId,2)},2e3)):GameConst.platform==PlatformConst.TOUTIAO&&game.TouTiaoSDKMgr.getInstance().share(!0,"article",function(){game.GetHttpData.getInstance().ResurGence(UserInfo.GameId,2)}),[2]})})},t.prototype.remove=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.remove,this),this.replay_btn.removeEventListener(egret.TouchEvent.TOUCH_END,this.replayBtnClick,this),this.relive_group.removeEventListener(egret.TouchEvent.TOUCH_END,this.diamondClick,this),this.share_Group.removeEventListener(egret.TouchEvent.TOUCH_END,this.shareBtnClick,this),this.back_Group.removeEventListener(egret.TouchEvent.TOUCH_END,this.backBtnClick,this),this.back_Group1.removeEventListener(egret.TouchEvent.TOUCH_END,this.backBtnClick,this),GameConst.platform==PlatformConst.TOUTIAO&&(this.btn_tt_shareRecord.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onShareRecordBtnClick,this),this.btn_tt_returnMain.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.backBtnClick,this)),game.EventManager.getInstance().removeListener(EventNotify.Language_change,this.languageHandle,this)},t.prototype.languageHandle=function(){this.lab_returnMain.text=game.LanguageManager.getString("presult_return_main"),this.back_label.text=game.LanguageManager.getString("presult_return_main"),this.lab_friendHelp.text=game.LanguageManager.getString("presult_friend_help"),this.relife_label.source=game.LanguageManager.getString("png_result_title")},t.prototype.updateTTUI=function(){GameConst.platform==PlatformConst.TOUTIAO?(this.group_bottom_btn_tt.visible=!0,this.btn_group.visible=!1,this.back_Group.visible=!1,console.log("btngroup 隐藏"),this.isShowRecordBtn(!0),UserInfo.ttClassicUsableShareTimes>0?(this.group_shareReward.visible=!0,this.lab_rewardDiamondNum.text=""+UserInfo.ttClassicShareGetDiamondNum):this.group_shareReward.visible=!1):(this.group_bottom_btn_tt.visible=!1,console.log("btngroup 显示"))},t.prototype.onShareRecordBtnClick=function(){var e=this,t=game.PanelManager.getInstance().getPanel(game.EPanelID.GameMain),n=t.getRecordSeconds();n>3e3?game.TouTiaoSDKMgr.getInstance().shareRecordVideo("video","分享视频","经典模式",function(t){e.isShowRecordBtn(!1),egret.setTimeout(function(){game.GetHttpData.getInstance().requestTTRecordShare(3)},e,500)},function(e){game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:"分享视频失败",type:TipsStyle.wordType})}):0==n?game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:"请录制视频后再进行分享!",type:TipsStyle.wordType}):game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:"录屏失败：录屏时长低于 3 秒",type:TipsStyle.wordType})},t.prototype.isShowRecordBtn=function(e){this.btn_tt_shareRecord.visible=e,this.group_btn_tt_shareRecord.visible=e,this.group_btn_tt_shareRecord.includeInLayout=e,this.group_shareReward.visible=e},t}(eui.Component);
__reflect(ResultUI.prototype,"ResultUI");var GameFight_Pop_Window=function(e){function t(){var t=e.call(this)||this;return t.data=null,t.isNecessaryTiming=!1,t.countdownNum=5,t.isAddDoubleScore=!1,t.scoreAnimRate=0,t.finishScore=0,t.curAnimScore=0,t.skinName="GameFight_Pop_WindowSkin",t}return __extends(t,e),Object.defineProperty(t.prototype,"gameFight",{get:function(){return this.mGameFight||(this.mGameFight=game.PanelManager.getInstance().getPanel(game.EPanelID.GameFight)),this.mGameFight},enumerable:!0,configurable:!0}),t.prototype.createChildren=function(){GameConst.platform==PlatformConst.H5&&document.getElementById("banneradbox")&&(document.getElementById("banneradbox").style.display="block"),GameConst.platform==PlatformConst.WEIXIN?WXProxy.instance.createBannerAd():GameConst.platform==PlatformConst.TOUTIAO&&game.TouTiaoSDKMgr.getInstance().createBannerAd(),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeFromStage,this),this.btn_returnMain.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnMainBtnClick,this),this.btn_ads_revive.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAdsReviveBtnClick,this),this.btn_diamond_revive.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDiamondReviveBtnClick,this),this.btn_dobble_score.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onDobbleScoreBtnClick,this),this.btn_restart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRestartBtnClick,this),GameConst.platform==PlatformConst.TOUTIAO&&(this.btn_tt_shareRecord.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onShareRecordBtnClick,this),this.btn_tt_returnMain_top.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnMainBtnClick,this),this.btn_tt_returnMain_bottom.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnMainBtnClick,this),this.btn_tt_restart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRestartBtnClick,this)),this.init()},t.prototype.init=function(){this.languageHandle(),game.EventManager.getInstance().addListener(EventNotify.Language_change,this.languageHandle,this),this.btn_dobble_score.visible=!0,this.gameFight.pkCountdownNum<=0?this.gameFight.isUsedAdsRevive?(this.gameFight.isUsedAdsRevive=!1,this.adsRevive(this.gameFight.isPlayerWin())):this.gameFight.isPlayerWin()?this.showOrHideWinWindow(!0):this.showOrHideLoseWindow(!0):this.showOrHideReviveWindow(!0)},t.prototype.showOrHideReviveWindow=function(e){e?(this.lab_diamondCount.text=this.data.zs_r_needCount,this.showOrHideWinWindow(!1),this.showOrHideLoseWindow(!1),this.isShowAdsBtn(),this.group_revive.visible=!0,this.countdownNum=5,this.isNecessaryTiming=!0,this.reviveCountdown()):this.group_revive.visible=!1},t.prototype.showOrHideWinWindow=function(e,t){void 0===t&&(t=!1),console.error("showOrHideWinWindow_________"),e?(this.showOrHideReviveWindow(!1),this.showOrHideLoseWindow(!1),this.lab_score_player.text=this.getPlayScore().toString(),this.lab_score_enemy.text=""+this.gameFight.enemy.eatBeansNum,this.img_icon_player.source=SkinInfo.getHeadImgName(this.gameFight.player.initVipSkin),this.img_icon_enemy.source=SkinInfo.getHeadImgName(this.gameFight.enemy.initVipSkin),this.group_win.visible=!0,this.group_win_lose_btn.visible=!0,this.updateTTUI(),GameConst.platform!=PlatformConst.WEIXIN||t||game.GetHttpData.getInstance().wxInterstitialAd(),this.gameFight.clearCountdown(),this.gameFight.finishGame(),game.SoundManager.getInstance().playEffect(game.SoundManager.win,0,1)):(this.group_win.visible=!1,this.group_win_lose_btn.visible=!1,this.updateTTUI())},t.prototype.showOrHideLoseWindow=function(e,t){void 0===t&&(t=!1),e?(this.showOrHideReviveWindow(!1),this.showOrHideWinWindow(!1),this.lab_lose_score_player.text=this.getPlayScore().toString(),this.group_lose.visible=!0,this.group_win_lose_btn.visible=!0,this.updateTTUI(),GameConst.platform!=PlatformConst.WEIXIN||t||game.GetHttpData.getInstance().wxInterstitialAd(),this.img_lose_icon_player.source=SkinInfo.getHeadImgName(this.gameFight.player.initVipSkin),this.gameFight.clearCountdown(),this.gameFight.finishGame(),game.SoundManager.getInstance().playEffect(game.SoundManager.lose,0,1)):(this.group_lose.visible=!1,this.group_win_lose_btn.visible=!1,this.updateTTUI())},t.prototype.reviveCountdown=function(){var e=this;this.isNecessaryTiming&&(this.countdownNum>0?(game.SoundManager.getInstance().playEffect(game.SoundManager.relive,0,1),this.img_revive_number.source="pve_revive_0"+this.countdownNum+"_png",this.countdownNum--,egret.setTimeout(function(){e.reviveCountdown()},this,1e3),this.startCircleAnimation()):(this.gameFight.stopTTRecord(),this.isNecessaryTiming=!1,this.gameFight.isUsedAdsRevive?(this.adsRevive(this.gameFight.isPlayerWin()),this.gameFight.isUsedAdsRevive=!1):this.gameFight.isPlayerWin()?this.showOrHideWinWindow(!0):this.showOrHideLoseWindow(!0)))},t.prototype.stopCountdown=function(){},t.prototype.resultPanel=function(){this.isNecessaryTiming=!1,this.gameFight.isUsedAdsRevive?(this.adsRevive(this.gameFight.isPlayerWin()),this.gameFight.isUsedAdsRevive=!1):this.gameFight.isPlayerWin()?this.showOrHideWinWindow(!0):this.showOrHideLoseWindow(!0)},t.prototype.startCircleAnimation=function(){egret.Tween.get(this.img_circle).wait(150).to({rotation:345},600,egret.Ease.sineIn)},t.prototype.isShowAdsBtn=function(){},t.prototype.onAdsReviveBtnClick=function(){this.gameFight.isUsedAdsRevive||(this.isNecessaryTiming=!1),this.gameFight.isUsedAdsRevive||(this.gameFight.isUsedAdsRevive=!0,GameConst.platform!=PlatformConst.DAYU&&game.GetHttpData.getInstance().h5GetBury(UserInfo.buryName.Pve_Rev_Ad_click,0),game.GetHttpData.getInstance().pveResurGence(UserInfo.GameId,1))},t.prototype.onDiamondReviveBtnClick=function(){if(this.isNecessaryTiming=!1,this.gameFight.pkCountdownNum<=0)this.gameFight.isUsedAdsRevive?(this.gameFight.isUsedAdsRevive=!1,this.adsRevive(this.gameFight.isPlayerWin())):this.gameFight.isPlayerWin()?this.showOrHideWinWindow(!0):this.showOrHideLoseWindow(!0);else if(GameConst.platform!=PlatformConst.DAYU&&game.GetHttpData.getInstance().h5GetBury(UserInfo.buryName.Pve_diamond_click,0),GameConst.platform==PlatformConst.WEIXIN){var e=parseInt(this.lab_diamondCount.text);if(console.log(UserInfo.pveGetDiamod.left),UserInfo.DiamondNumber<e&&UserInfo.pveGetDiamod.left>0){this.isNecessaryTiming=!1,game.GetHttpData.getInstance().h5GetBury(UserInfo.buryName.pveGame_Ad_Play_click,0),game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:"钻石不足",type:TipsStyle.wordType});var t=setTimeout(function(){clearTimeout(t),game.GetHttpData.getInstance().wxShowAd(11)},500)}else game.GetHttpData.getInstance().pveResurGence(UserInfo.GameId,3)}else game.GetHttpData.getInstance().pveResurGence(UserInfo.GameId,3)},t.prototype.getPlayScore=function(){var e=this.gameFight.player.eatBeansNum,t=SkinInfoManager.getInstance().getSkinBySid(this.gameFight.player.initVipSkin);return t&&t.getEffect(EffectInfo.EFFECT_SCORE)>0&&(e+=Math.floor(e*t.getEffect(EffectInfo.EFFECT_SCORE))),e},t.prototype.onDobbleScoreBtnClick=function(){var e=this;if(0==this.finishScore&&!this.isAddDoubleScore)if(this.finishScore=2*this.getPlayScore(),GameConst.platform==PlatformConst.ANDROID_MOBGI)this.invokeMobgiAdWhenDoubleScore(UserInfo.GameId);else if(GameConst.platform==PlatformConst.OVERSEAS)game.GoogleAdsSDKMgr.getInstance().showVideo(game.EVideoPosition.GetOneLife,function(t){e.startScoreAnim(),e.btn_dobble_score.visible=!1},function(t){e.finishScore=0});else if(GameConst.platform==PlatformConst.WEIXIN)game.GetHttpData.getInstance().wxShowAd(7);else if(GameConst.platform==PlatformConst.TOUTIAO)game.GetHttpData.getInstance().ttShowAd(7);else if(GameConst.platform==PlatformConst.DAYU||GameConst.platform==PlatformConst.H5||GameConst.platform==PlatformConst.H5noad){game.GetHttpData.getInstance().h5GetBury("Bird_Ad",4);game.H5externalAndroid.getInstance().showVideo();window.showVideoAd=function(t){t?(game.GetHttpData.getInstance().h5GetBury("Bird_Ad",5),game.GetHttpData.getInstance().pveAdsDoubleScore(UserInfo.GameId),e.startScoreAnim(),e.btn_dobble_score.visible=!1):e.finishScore=0}}},t.prototype.invokeMobgiAdWhenDoubleScore=function(e){function t(a){var o=a.data;game.EventManager.getInstance().removeListener(i,t,n),o.reward?(game.GetHttpData.getInstance().pveAdsDoubleScore(e),n.startScoreAnim(),n.btn_dobble_score.visible=!1):n.finishScore=0}var n=this,i=HclwAndroidNotify.VIDEO_GAIN_SKIN;HclwAndroidUtil.getInstance().showVideoAd(i,t)},t.prototype.onRestartBtnClick=function(){this.gameFight.reStartGame(),game.PanelManager.getInstance().close(game.EPanelID.GameFight_Pop_Window,!0)},t.prototype.onReturnMainBtnClick=function(){this.closeBanner(),game.GetHttpData.getInstance().pveGameOver(UserInfo.GameId,this.gameFight.player.eatBeansNum,this.gameFight.enemy.eatBeansNum,this.isAddDoubleScore?1:0)},t.prototype.closeBanner=function(){GameConst.platform==PlatformConst.WEIXIN?WXProxy.instance.hideBannerAd():GameConst.platform==PlatformConst.TOUTIAO?game.TouTiaoSDKMgr.getInstance().hideBannerAd():GameConst.platform==PlatformConst.H5&&(document.getElementById("banneradbox").style.display="none")},t.prototype.adsRevive=function(e){var t=this;if(this.showOrHideReviveWindow(!1),GameConst.platform==PlatformConst.ANDROID_MOBGI)this.invokeMobgiAdWhenRelive(e);else if(GameConst.platform==PlatformConst.OVERSEAS)game.GoogleAdsSDKMgr.getInstance().showVideo(game.EVideoPosition.GetOneLife,function(n){e?t.showOrHideWinWindow(!0):t.showOrHideLoseWindow(!0)},function(n){e?t.showOrHideWinWindow(!0):t.showOrHideLoseWindow(!0)});else if(GameConst.platform==PlatformConst.WEIXIN)game.GetHttpData.getInstance().wxShowAd(0),e?this.showOrHideWinWindow(!0,!0):this.showOrHideLoseWindow(!0,!0);else if(GameConst.platform==PlatformConst.TOUTIAO)game.GetHttpData.getInstance().ttShowAd(0),e?this.showOrHideWinWindow(!0):this.showOrHideLoseWindow(!0);else if(GameConst.platform==PlatformConst.DAYU||GameConst.platform==PlatformConst.H5||GameConst.platform==PlatformConst.H5noad){game.GetHttpData.getInstance().h5GetBury("Bird_Ad",6);game.H5externalAndroid.getInstance().showVideo();window.showVideoAd=function(n){n?(game.GetHttpData.getInstance().h5GetBury("Bird_Ad",7),e?t.showOrHideWinWindow(!0):t.showOrHideLoseWindow(!0)):e?t.showOrHideWinWindow(!0):t.showOrHideLoseWindow(!0)}}},t.prototype.invokeMobgiAdWhenRelive=function(e){function t(a){var o=a.data;game.EventManager.getInstance().removeListener(i,t,n),o.reward?e?n.showOrHideWinWindow(!0):n.showOrHideLoseWindow(!0):e?n.showOrHideWinWindow(!0):n.showOrHideLoseWindow(!0)}var n=this,i=HclwAndroidNotify.VIDEO_RELIVE;HclwAndroidUtil.getInstance().showVideoAd(i,t)},t.prototype.startScoreAnim=function(){this.curAnimScore=this.getPlayScore(),this.scoreAnimRate=Math.ceil(this.getPlayScore()/10),this.stopScoreAnim(),this.scoreAnimInterval=egret.setInterval(this.scoreAnim,this,75),this.isAddDoubleScore=!0},t.prototype.stopScoreAnim=function(){0!=this.scoreAnimInterval&&(egret.clearInterval(this.scoreAnimInterval),this.scoreAnimInterval=0)},t.prototype.scoreAnim=function(){this.curAnimScore+=this.scoreAnimRate,this.curAnimScore>=this.finishScore&&(this.curAnimScore=this.finishScore,this.scoreAnimRate=0,this.finishScore=0,this.stopScoreAnim()),this.group_win.visible?this.lab_score_player.text=""+this.curAnimScore:this.group_lose.visible&&(this.lab_lose_score_player.text=""+this.curAnimScore)},t.prototype.updateTTUI=function(){GameConst.platform==PlatformConst.TOUTIAO?(this.group_bottom_btn_tt.visible=!0,this.group_bottom_btn_normal.visible=!1,this.isShowRecordBtn(!0),UserInfo.ttPveUsableShareTimes>0?(this.group_shareReward.visible=!0,this.lab_rewardDiamondNum.text=""+UserInfo.ttPveShareGetDiamondNum):this.group_shareReward.visible=!1):(this.group_bottom_btn_tt.visible=!1,this.group_bottom_btn_normal.visible=!0)},t.prototype.onShareRecordBtnClick=function(){var e=this,t=this.gameFight.getRecordSeconds();t>=3e3?game.TouTiaoSDKMgr.getInstance().shareRecordVideo("video","分享视频","对战模式",function(t){e.isShowRecordBtn(!1),egret.setTimeout(function(){game.GetHttpData.getInstance().requestTTRecordShare(3)},e,500)},function(e){game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:"分享视频失败",type:TipsStyle.wordType})}):0==t?game.TipsManager.getInstance().show(game.ETipsID.TipsToutiao,{title:"请录制视频后再进行分享!",type:TipsStyle.wordType}):game.TipsManager.getInstance().show(game.ETipsID.TipsToutiao,{title:"录屏失败：录屏时长低于 3 秒",type:TipsStyle.wordType})},t.prototype.isShowRecordBtn=function(e){this.group_btn_tt_shareRecord.visible=e,this.group_btn_tt_shareRecord.includeInLayout=e,this.group_shareReward.visible=e,this.group_btn_tt_returnMain_bottom.visible=!e,this.group_btn_tt_returnMain_bottom.includeInLayout=!e},t.prototype.removeFromStage=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeFromStage,this),this.btn_ads_revive.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onAdsReviveBtnClick,this),this.btn_diamond_revive.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onDiamondReviveBtnClick,this),this.btn_dobble_score.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onDobbleScoreBtnClick,this),this.btn_restart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRestartBtnClick,this),this.btn_returnMain.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnMainBtnClick,this),GameConst.platform==PlatformConst.TOUTIAO&&(this.btn_tt_shareRecord.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onShareRecordBtnClick,this),this.btn_tt_returnMain_top.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnMainBtnClick,this),this.btn_tt_returnMain_bottom.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onReturnMainBtnClick,this),this.btn_tt_restart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onRestartBtnClick,this)),game.EventManager.getInstance().removeListener(EventNotify.Language_change,this.languageHandle,this)},t.prototype.languageHandle=function(){this.img_lose_title.source="new_pve_lose_title_cn_png",this.img_win_title.source="new_pve_title_win_cn_png",this.img_revive_title.source=game.LanguageManager.getString("png_pve_title_revive"),this.lab_returnMain.text=game.LanguageManager.getString("pve_return_main"),this.lab_restart.text=game.LanguageManager.getString("pve_restart")},t}(eui.Component);__reflect(GameFight_Pop_Window.prototype,"GameFight_Pop_Window",["eui.UIComponent","egret.DisplayObject"]);var KeyValue=function(){function e(e,t){this.name=e,this.value=t}return e}();__reflect(KeyValue.prototype,"KeyValue");var SnakeBase=function(e){function t(t,n,i,a){var o=e.call(this)||this;o.propMagnetEffectTime=0,o.propRocketEffectTime=0,o.propShieldEffectTime=0,o.staticSnakeY=0,o.isSnakeMoving=!1,o.mouceTouchStageX=0,o.lastMouseMovingX=0,o.isHitBolck=!1,o.isRocketOpen=!1,o.isMagnetOpen=!1,o.isEffectView=!1,o.initVipSkin=-1,o.isBombOpen=!1,o.isShieldOpen=!1,o.initSpeed=9,o.speed=o.initSpeed,o.upSpeed=12,o.eatBeansNum=0,o.isInReviveThreeSecond=!1,o.width=t,o.height=n,o.initColorType=i,o.initVipSkin=a,o.anchorOffsetX=o.width/2,o.anchorOffsetY=o.height/2,o.x=o.width/2,o.y=o.height/2;var s=RES.getRes(SkinInfo.getHeadImgName(a)),r=new eui.Image(s);r.width=1.1*o.width,r.height=1.1*o.width*s.textureHeight/s.textureWidth;var h=o.height-r.height;h>0?r.y=o.height-r.height:r.y=5*(o.height-r.height)/7,r.x=.05*-o.width,o.addChild(r),o.countLabel=new eui.Label,o.countLabel.text=o.currentBeanCount+"",o.countLabel.size=50,o.countLabel.width=4*o.width,o.countLabel.height=o.height,o.countLabel.x=1.5*-o.width,o.countLabel.y=-o.height,o.countLabel.textAlign=egret.HorizontalAlign.CENTER,o.countLabel.verticalAlign=egret.VerticalAlign.MIDDLE,o.countLabel.bold=!0,o.countLabel.textColor=0,o.addChild(o.countLabel),o.shieldImg=new eui.Image(RES.getRes("shield_png")),o.shieldImg.width=1.8*o.width,o.shieldImg.height=1.8*o.width,o.shieldImg.x=(o.width-o.shieldImg.width)/2,o.shieldImg.y=-80,o.shieldImg.visible=!1,o.addChild(o.shieldImg),o.lightClip=MoviceClipManager.getInstance().createMoviceClipByRes("prop_rocket_json","prop_rocket_png","prop_rocket"),o.lightClip.scaleX=1,o.lightClip.scaleY=1,o.lightClip.anchorOffsetX=100,o.lightClip.anchorOffsetY=100,o.lightClip.x=o.width/2,o.lightClip.y=0,o.lightClip.$setTouchEnabled(!1),o.addChild(o.lightClip),o.lightClip.play(-1),o.lightClip.visible=!1,o.addChild(o.lightClip),o.propMagnetClip=MoviceClipManager.getInstance().createMoviceClipByRes("prop_magnet_json","prop_magnet_png","prop_magnet"),o.propMagnetClip.scaleX=1,o.propMagnetClip.scaleY=1,o.propMagnetClip.anchorOffsetX=100,o.propMagnetClip.anchorOffsetY=100,o.propMagnetClip.x=o.width/2,o.propMagnetClip.y=0,o.propMagnetClip.$setTouchEnabled(!1),o.addChild(o.propMagnetClip),o.propMagnetClip.play(-1),o.propMagnetClip.visible=!1,o.addChild(o.propMagnetClip),o.isSnakeMoving=!1,o.mSnakeBodyArray=[],o.mRoute=new eui.ArrayCollection,o.mSnakeBodyRoute=new eui.ArrayCollection,o.wrapperEffectView=new egret.Sprite,o.wrapperHeadView=new egret.Sprite,o.wrapperView=new egret.Sprite,o.staticSnakeY=0,o.wrapperEffectView.width=o.width,o.wrapperEffectView.height=o.height,o.wrapperView.width=o.width,o.wrapperView.height=o.height,o.wrapperHeadView.width=o.width,o.wrapperHeadView.height=o.height,o.staticSnakeY=2*game.StageUtils.getInstance().stageHeight/3,o.y=2*game.StageUtils.getInstance().stageHeight/3,o.x=game.StageUtils.getInstance().stageWidth/2;for(var g=0;g<SnakeConst.MAX_BODY_LENGTH;g++){var l=new SnakeBodyView(60,60,SnakeConst.getColorType(null,null),a);o.addSnakeBodyView(l),o.wrapperView.addChild(l);var c=new egret.Point(l.x,l.y);o.addMotionPosItem(c)}return o.wrapperHeadView.addChild(o),o.bombClip=MoviceClipManager.getInstance().createMoviceClipByRes("snake_bomb_mc_json","snake_bomb_tex_png","snake_bomb_mc"),o.bombClip.scaleX=1,o.bombClip.scaleY=1,o.bombClip.anchorOffsetX=100,o.bombClip.anchorOffsetY=100,o.bombClip.x=o.width/2-250,o.bombClip.y=650,o.bombClip.$setTouchEnabled(!1),o.bombClip.visible=!1,o.addChild(o.bombClip),o.propBombClip=MoviceClipManager.getInstance().createMoviceClipByRes("boom_json","boom_png","boom"),o.propBombClip.scaleX=.75,o.propBombClip.scaleY=.75,o.propBombClip.anchorOffsetX=100,o.propBombClip.anchorOffsetY=100,o.propBombClip.x=o.width/2+10,o.propBombClip.y=0,o.propBombClip.$setTouchEnabled(!1),o.addChild(o.propBombClip),o.propBombClip.play(-1),o.propBombClip.visible=!1,o.addChild(o.propBombClip),o.countDownText=new eui.Label,o.countDownText.text="",o.countDownText.size=40,o.countDownText.textAlign=egret.HorizontalAlign.CENTER,o.countDownText.verticalAlign=egret.VerticalAlign.MIDDLE,o.countDownText.bold=!0,o.countDownText.textColor=16777215,o.countDownText.y=1.2*-o.height,o.countDownText.width=o.width,o.countDownText.$setTouchEnabled(!1),o.addChild(o.countDownText),o}return __extends(t,e),t.prototype.showRocketEffect=function(e){e?(this.isRocketOpen=!0,this.lightClip.visible=!0):(this.isRocketOpen=!1,this.lightClip.visible=!1)},t.prototype.showMagnetLight=function(e){e?(this.isMagnetOpen=!0,this.propMagnetClip.visible=!0):(this.isMagnetOpen=!1,this.propMagnetClip.visible=!1)},t.prototype.showBombEffect=function(e){e?(this.isBombOpen=!0,this.propBombClip.visible=!0,this.bombTime=(new Date).getTime()):(this.isBombOpen=!1,this.propBombClip.visible=!1)},t.prototype.showShield=function(e){e?(this.isShieldOpen=!0,this.shieldImg.visible=!0):(this.isShieldOpen=!1,this.shieldImg.visible=!1)},t.prototype.calcBombTime=function(){if(this.isBombOpen&&this.bombTime>0){var e=3-Math.floor(((new Date).getTime()-this.bombTime)/1e3);return e>0?(this.setCountDownText(e),!1):(this.setCountDownText(0),this.showBombEffect(!1),this.bomb(),!0)}return!1},t.prototype.bomb=function(){null!=this.bombClip&&(this.bombClip.visible=!0,this.bombClip.gotoAndPlay(1,1),this.bombClip.addEventListener(egret.Event.COMPLETE,function(e){e.target.visible=!1},this))},t.prototype.setCountDownText=function(e){e>0?this.countDownText.text=""+e:this.countDownText.text=""},t.prototype.checkPropState=function(){this.isMagnetOpen&&(this.propMagnetEffectTime>=300?this.showMagnetLight(!1):this.propMagnetEffectTime++),this.isRocketOpen&&(this.propRocketEffectTime>=300?(this.showRocketEffect(!1),this.speed=this.initSpeed):(this.propRocketEffectTime++,this.speed=this.upSpeed)),this.isShieldOpen&&(this.propShieldEffectTime>=150?this.showShield(!1):this.propShieldEffectTime++)},t.prototype.updateSpeed=function(e){this.initSpeed=9*(1+e),this.speed=this.initSpeed},t.prototype.updateCount=function(e){this.countLabel.text=""+e},t.prototype.addCount=function(e){this.currentBeanCount+=e,this.updateCount(this.currentBeanCount)},t.prototype.addSnakeBodyView=function(e){this.mSnakeBodyArray.push(e)},Object.defineProperty(t.prototype,"snakeBodyArray",{get:function(){return this.mSnakeBodyArray},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"snakeBodyRoute",{get:function(){return this.mSnakeBodyRoute},set:function(e){this.mSnakeBodyRoute=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"route",{get:function(){return this.mRoute},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentBeanCount",{get:function(){return console.error("-----"),-1},set:function(e){console.error("-----")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentScore",{get:function(){return console.error("-----"),-1},set:function(e){console.error("-----")},enumerable:!0,configurable:!0}),t.prototype.addMotionPosItem=function(e){this.mRoute.addItem(e),this.mSnakeBodyRoute.addItem(e)},t.prototype.resurgenceSnake=function(){for(var e=SnakeConst.MAX_BODY_LENGTH,t=0;e>t;t++){var n=new SnakeBodyView(60,60,SnakeConst.getColorType(null,null),this.initVipSkin);this.mSnakeBodyArray.push(n),this.wrapperView.addChild(n);var i=new egret.Point(n.x,n.y);this.mRoute.addItem(i),this.mSnakeBodyRoute.addItem(i)}},t.prototype.addBody=function(e,t){var n=this.currentBeanCount,i=0;if(this.addCount(e),i=n+e<=SnakeConst.MAX_BODY_LENGTH?e:SnakeConst.MAX_BODY_LENGTH-n,i>0){var a=this.snakeBodyRoute.getItemAt(this.snakeBodyRoute.length-1);this.route.addItem(a),this.snakeBodyRoute.addItem(a);for(var o=0;i>o;o++){var s=new SnakeBodyView(60,60,t,this.initVipSkin);this.snakeBodyArray.push(s),this.wrapperView.addChild(s)}}},t}(egret.Sprite);__reflect(SnakeBase.prototype,"SnakeBase");var PlatformConst;!function(e){e[e.WEIXIN=0]="WEIXIN",e[e.QQH5=1]="QQH5",e[e.OPPO=2]="OPPO",e[e.XIAOMI=3]="XIAOMI",e[e.DAYU=4]="DAYU",e[e.OVERSEAS=5]="OVERSEAS",e[e.TOUTIAO=6]="TOUTIAO",e[e.H5=7]="H5",e[e.H5noad=8]="H5noad",e[e.ANDROID_MOBGI=9]="ANDROID_MOBGI",e[e.OTHER=10]="OTHER"}(PlatformConst||(PlatformConst={}));var ELanguageType;!function(e){e[e.ZH_TW=0]="ZH_TW",e[e.EN_US=1]="EN_US",e[e.ZH_CN=2]="ZH_CN"}(ELanguageType||(ELanguageType={}));var EventNotify;!function(e){e[e.Language_change=0]="Language_change",e[e.Update_eggNumber=1]="Update_eggNumber"}(EventNotify||(EventNotify={}));var ServerMachine;!function(e){e[e.OUT=0]="OUT",e[e.LUO=1]="LUO",e[e.KE=2]="KE",e[e.WAN=3]="WAN"}(ServerMachine||(ServerMachine={}));var GameConst=function(){function e(){}return e.platform=PlatformConst.OVERSEAS,e.machine=ServerMachine.KE,e.isRelease=!0,e.showLog=!0,e.curVersion="1.0.5",e.wxResVersion="109",e.ttResVersion="109",e.isAndroid=!1,e.GAME_LOGIN="login.sign",e.GAME_SIGNIN=e.platform!=PlatformConst.DAYU?"sign.signIn":"bird.signIn",e.GAME_DOUBLESIGNIN=e.platform!=PlatformConst.DAYU?"sign.doubleReward":"bird.doubleReward",e.GAME_SEVEN_DAYS_SIGNIN=e.platform!=PlatformConst.DAYU?"sign.sevenDaySignIn":"bird.sevenDaySignIn",e.GAME_SEVEN_DAYS_DOUBLE_SIGNIN=e.platform!=PlatformConst.DAYU?"sign.doublePropReward":"bird.doublePropReward",e.TASK_GET_DAILY_TASK=e.platform!=PlatformConst.DAYU?"task.getDailyTask":"bird.getDailyTask",e.TASK_FINISH_DAILY_TASK=e.platform!=PlatformConst.DAYU?"task.finishDailyTask":"bird.finishDailyTask",e.GAME_SHARE="share.share",e.GAME_AD=e.platform!=PlatformConst.DAYU?"adWork.playAd":"bird.playAd",e.GAME_STORE="game.getZSshop",e.GAME_GETRANK=e.platform!=PlatformConst.DAYU?"game.getRankList":"bird.getRank",e.GAME_START=e.platform!=PlatformConst.DAYU?"game.gameStart":"bird.gameStart",e.GAME_STOP=e.platform!=PlatformConst.DAYU?"game.gameStop":"bird.gameStop",e.GAME_RESURGENCE=e.platform!=PlatformConst.DAYU?"game.resurgence":"bird.gameResurgence",e.GAME_REPORT_SOCRE="game.report_socre",e.GAME_OVER=e.platform!=PlatformConst.DAYU?"game.gameOver":"bird.gameOver",e.GAME_CONSUME="game.consume",e.USER_GETINFO=e.platform!=PlatformConst.DAYU?"login.getUserInfo":"bird.getBirdInfo",e.GAME_BUYPROP=e.platform!=PlatformConst.DAYU?"prop.buyProp":"bird.buyProp",e.PVE_GAME_START=e.platform!=PlatformConst.DAYU?"pveGame.gameStart":"bird.gamePveStart",e.PVE_GAME_STOP=e.platform!=PlatformConst.DAYU?"pveGame.gameStop":"bird.gamePveStop",e.PVE_GAME_RESURGENCE=e.platform!=PlatformConst.DAYU?"pveGame.resurgence":"bird.gamePveResurgence",e.PVE_GAME_OVER=e.platform!=PlatformConst.DAYU?"pveGame.gameOver":"bird.gamePveOver",e.PVE_ADS_DOUBLE_SCORE=e.platform!=PlatformConst.DAYU?"pveGame.doubleScore":"bird.gamePveDoubleScore",e.STORE_PAYMENT="order.purchase",e.Login_IMEI="login.getImei",e.Lottery_List=e.platform!=PlatformConst.DAYU?"lottery.getLotteryList":"bird.getLotteryList",e.getLotteryReward=e.platform!=PlatformConst.DAYU?"lottery.getLotteryReward":"bird.getLotteryReward",e.openBoxReward=e.platform!=PlatformConst.DAYU?"lottery.openDiamondBoxReward":"bird.openDiamondBoxReward",e.setBuriedPoint=e.platform!=PlatformConst.DAYU?"track.setBuriedPoint":"point.setBuriedPoint",e.GET_DAILY_INVITE_TASK="task.getDailyInviteTask",e}();__reflect(GameConst.prototype,"GameConst");var game;!function(e){var t;!function(e){e[e.TipsBox=0]="TipsBox",e[e.TipsDemond=1]="TipsDemond",e[e.TipsToutiao=2]="TipsToutiao"}(t=e.ETipsID||(e.ETipsID={}));var n;!function(e){e[e.LoginType=0]="LoginType",e[e.LoginMain=1]="LoginMain",e[e.GameSetting=2]="GameSetting",e[e.GameStore=3]="GameStore",e[e.GameSignIn=4]="GameSignIn",e[e.GameMain=5]="GameMain",e[e.ResultUI=6]="ResultUI",e[e.RankList=7]="RankList",e[e.ExitPanel=8]="ExitPanel",e[e.ConnectLoadingPanel=9]="ConnectLoadingPanel",e[e.LoadingMainUI=10]="LoadingMainUI",e[e.DefindPanel=11]="DefindPanel",e[e.GameFight=12]="GameFight",e[e.TipsShare=13]="TipsShare",e[e.GameLotteryDraw=14]="GameLotteryDraw",e[e.GameSignInDays=15]="GameSignInDays",e[e.GameFight_Pop_Window=16]="GameFight_Pop_Window",e[e.GameTask=17]="GameTask",e[e.FriendHelp=18]="FriendHelp"}(n=e.EPanelID||(e.EPanelID={}));var i=function(){function e(){}return e.panel={LoginType:LoginType,LoginMain:LoginMain,GameSetting:GameSetting,GameStore:GameStore,GameSignIn:GameSignIn,GameMain:GameMain,ResultUI:ResultUI,RankList:RankList,ExitPanel:ExitPanel,ConnectLoadingPanel:ConnectLoadingPanel,LoadingMainUI:LoadingMainUI,DefindPanel:DefindPanel,GameFight:GameFight,TipsShare:TipsShare,GameLotteryDraw:GameLotteryDraw,GameSignInDays:GameSignInDays,GameFight_Pop_Window:GameFight_Pop_Window,GameTask:GameTask,FriendHelp:FriendHelp},e}();e.PanelType=i,__reflect(i.prototype,"game.PanelType");var a;!function(e){e[e.Panel=10]="Panel",e[e.PopWindow=11]="PopWindow",e[e.Tips=80]="Tips",e[e.Loading=99]="Loading"}(a=e.EUILayer||(e.EUILayer={}))}(game||(game={}));var game;!function(e){var t=function(){function e(){}return e.getInstance=function(){if(null==this.instance){var e=this;this.instance=new e}return this.instance},e.createInstance=function(){if(null==this.instance){var e=this;this.instance=new e,this.instance.init()}},e.destroyInstance=function(){null!=this.instance&&(this.instance.unInit(),this.instance=null)},e.prototype.init=function(){},e.prototype.unInit=function(){},e}();e.Singleton=t,__reflect(t.prototype,"game.Singleton")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.NATIVE_INSTAGRAM="native_instagram",e.NATIVE_INSTAGRAM_SHARE="native_instagram_share",e.init(),e}return __extends(n,t),n.prototype.init=function(){},n.prototype.instagramShare=function(){if(core.PlatUtils.isAndroid){console.log("instagram share");var t=this,n=function(){e.StageUtils.getInstance().stage.removeEventListener(egret.Event.ACTIVATE,n,t),egret.setTimeout(function(){e.GetHttpData.getInstance().GetShareData(!0,1)},t,400);var i=e.PanelManager.getInstance().getPanel(e.EPanelID.TipsShare);null!=i&&i.onMaskClick()},i=function(){e.StageUtils.getInstance().stage.removeEventListener(egret.Event.DEACTIVATE,i,t),e.StageUtils.getInstance().stage.addEventListener(egret.Event.ACTIVATE,n,t)};try{e.StageUtils.getInstance().stage.addEventListener(egret.Event.DEACTIVATE,i,t),egret.ExternalInterface.call(this.NATIVE_INSTAGRAM,this.NATIVE_INSTAGRAM_SHARE)}catch(a){e.StageUtils.getInstance().stage.removeEventListener(egret.Event.DEACTIVATE,i,t)}}},n.prototype.instagramSignIn=function(){var t="https://api.instagram.com/oauth/authorize/?client_id=eb6aa3b248574dd4b0801b021203905e&redirect_uri=https://dog.ncycsy.com/adNotifyAsyc.php&response_type=code";HttpManager.httpGET(t,function(t){if(t&&t.target&&t.target.response){var n=JSON.parse(t.target.response),i=n.code;200==i?n.data.hasOwnProperty("imei")&&(console.log(n.data.imei),e.LocalStorageUtils.saveString("imei",n.data.imei)):MsgUtil.GetInstance().CodeExplain(i)}},function(t){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this),core.PlatUtils.isAndroid&&console.log("instagram signin")},n.prototype.instagramSignOut=function(){core.PlatUtils.isAndroid&&console.log("instagram signin")},n.prototype.unInit=function(){},n}(e.Singleton);e.InstagramSDKMgr=t,__reflect(t.prototype,"game.InstagramSDKMgr")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.ta=null,t}return __extends(t,e),t.prototype.init=function(){var e=this,t={appId:"4f84ea19802142f6bc10e302460c58af",serverUrl:"http://107.21.185.60",autoTrack:{appShow:!0,appHide:!0}};e.ta=new ThinkingAnalyticsAPI(t),e.ta.init(),e.ta.track("init_login");var n=new Date,i=(n.toLocaleDateString(),new egret.Timer(3e5,0));i.addEventListener(egret.TimerEvent.TIMER,function(){var t={};t.time=5,e.ta.track("online",t)},this),i.start()},t.prototype.unInit=function(){},t}(e.Singleton);e.ShuShuSDKMgr=t,__reflect(t.prototype,"game.ShuShuSDKMgr")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.VIDEO_AD_ID="5l78baa1ljb53g95ce",t.BANNER_AD_ID="199qhi6j76hego40nf",t.tempVideoPath="",t.isRecording=!1,t.closeListener=null,t.errorListener=null,t.init(),t}return __extends(t,e),t.prototype.init=function(){},t.prototype.recordVideo=function(e,t,n){var i=this,a=this;return this.recorder||(this.recorder=tt.getGameRecorderManager()),this.recorder?(this.isRecording=!0,this.recorder.stop(),a.tempVideoPath="",this.recorder.start({duration:e}),this.recorder.onStart(function(e){console.log("录屏开始")}),this.recorder.onStop(function(e){console.log("录屏结束: "+e.videoPath),a.tempVideoPath=e.videoPath,i.isRecording=!1,t()}),void this.recorder.onError(function(e){console.log("录屏错误: "+e),console.log("录屏错误: "+e.errMsg),i.isRecording=!1,n()})):void console.log("record管理器获取失败!")},t.prototype.stopRecordVideo=function(){this.recorder&&this.isRecording&&this.recorder.stop()},t.prototype.shareRecordVideo=function(e,t,n,i,a){return""==this.tempVideoPath?(console.log("视频地址为空"),void a()):void tt.shareAppMessage({channel:e,title:t,imageUrl:"",query:"",extra:{videoPath:this.tempVideoPath,videoTopics:[n]},success:function(){console.log("分享视频成功"),i()},fail:function(e){console.log("分享视频失败"),console.log(e),a()}})},t.prototype.loginPlatform=function(e){return console.log("登录头条"),new Promise(function(t,n){tt.showLoading({title:"正在登录..."}),tt.login({force:e,success:function(e){t(e)},fail:function(e){n(e)},complete:function(){tt.hideLoading()}})})},t.prototype.createVideoAd=function(e,t){var n=this;if(null==this.videoAd||void 0==this.videoAd){console.log("创建广告组件");try{this.videoAd=tt.createRewardedVideoAd({adUnitId:n.VIDEO_AD_ID})}catch(i){console.log("视频广告组件创建失败:",i&&i.message?i.message:"")}}tt.showLoading({title:"广告加载中"}),this.videoAd&&(this.closeListener&&this.videoAd.offClose(this.closeListener),this.errorListener&&this.videoAd.offError(this.errorListener),this.closeListener=function(i){tt.hideLoading(),i&&i.isEnded||void 0===i?(console.log("正常播放结束，可以下发游戏奖励"),egret.setTimeout(function(){e.call(t,{playResult:!0,finishResult:!0})
},n,300)):(console.log("播放中途退出，不下发游戏奖励"),egret.setTimeout(function(){e.call(t,{playResult:!0,finishResult:!1})},n,300))},this.errorListener=function(n){tt.hideLoading(),console.log("视频广告加载错误",n),e.call(t,{playResult:!1,finishResult:!0,errCode:n.errCode})},this.videoAd.onClose(this.closeListener),this.videoAd.onError(this.errorListener),this.videoAd.show().then(function(){tt.hideLoading(),console.log("广告显示成功")})["catch"](function(e){console.log("广告组件出现问题",e),n.videoAd.load().then(function(){tt.hideLoading(),console.log("手动加载成功")})}))},t.prototype.createBannerAd=function(){var e=this,t=tt.getSystemInfoSync(),n=t.windowWidth;128>n&&(n=128),n>208&&(n=208);var i=(t.windowWidth-n)/2,a=t.windowHeight-n/16*9;try{console.log("创建banner广告"),this.bannerAd=tt.createBannerAd({adUnitId:e.BANNER_AD_ID,adIntervals:30,style:{left:i,top:a,width:n}}),this.bannerAd.onError(function(e){console.log("banner广告加载错误",e)}),this.bannerAd.onLoad(function(){e.bannerAd.show().then(function(){console.log("广告显示成功")})["catch"](function(e){console.log("广告显示失败")})}),this.bannerAd.onResize(function(i){n!=i.width&&(n=i.width,e.bannerAd.style.top=t.windowHeight-i.width/16*9,e.bannerAd.style.left=(t.windowWidth-i.width)/2)})}catch(o){console.log("banner广告异常",o&&o.message?o.message:"")}},t.prototype.hideBannerAd=function(){this.bannerAd&&(this.bannerAd.hide(),this.bannerAd.destroy(),this.bannerAd=null)},t.prototype.showLoading=function(e,t){tt.showLoading({title:e}),egret.setTimeout(function(){tt.hideLoading()},this,t)},t.prototype.showToast=function(e,t,n){tt.showToast({title:e,icon:t,duration:n})},t.prototype.share=function(e,t,n){var i=(RoleInfo.getInstance(),Math.ceil(2*Math.random())),a="",o="";e?(a="reshare"+i+".png",o=WXConst.shareDescRelive[i-1]):(a="share"+i+".png",o=WXConst.shareDescDefault[i-1]),"article"==t?tt.shareAppMessage({title:o,imageUrl:WXConst.shareImageFolderUrl+a,query:"invite="+UserInfo.userID,success:function(){console.log("分享"+t+"成功"),n()},fail:function(e){console.log("分享"+t+"失败"),tt.showToast({title:"分享失败",icon:"none",duration:2e3})}}):tt.shareAppMessage({channel:t,title:o,imageUrl:WXConst.shareImageFolderUrl+a,query:"invite="+UserInfo.userID,success:function(){console.log("分享"+t+"成功"),n()},fail:function(e){console.log("分享"+t+"失败"),tt.showToast({title:"分享失败",icon:"none",duration:2e3})}})},t.prototype.getLaunchOptions=function(){var e=tt.getLaunchOptionsSync();e.query&&e.query.invite&&(RoleInfo.getInstance().inviteUid=e.query.invite)},t.prototype.showModal=function(e,t,n,i,a,o,s){void 0===n&&(n="确定"),void 0===a&&(a=!0),void 0===o&&(o="取消"),tt.showModal({title:e,content:t,confirmText:n,showCancel:a,cancelText:o,success:function(e){e.confirm?(console.log("点击确认"),i()):e.cancel?(console.log("点击取消"),s()):console.log("what are u 弄啥呢?")},fail:function(e){console.log("showModal调用失败")}})},t.prototype.exitMiniProgram=function(){tt.exitMiniProgram()},t.APPID="ttfc628adf63487de7",t}(e.Singleton);e.TouTiaoSDKMgr=t,__reflect(t.prototype,"game.TouTiaoSDKMgr")}(game||(game={}));var CaculatePointUtil=function(){function e(){}return e.caculatePointList=function(e,t){var n=new eui.ArrayCollection,i=new egret.Point;try{for(var a=t,o=0;o<e.length-1;o++)if(0==o)n.addItem(e.getItemAt(0)),i=e.getItemAt(0);else for(;;){var s=!1,r=Math.sqrt(Math.pow(Math.abs(i.y-e.getItemAt(o).y),2)+Math.pow(Math.abs(i.x-e.getItemAt(o).x),2));if(r-a>=0){var h=(e.getItemAt(o).x-i.x)*a/r+i.x,g=(e.getItemAt(o).y-i.y)*a/r+i.y;n.addItem(new egret.Point(h,g)),i=n.getItemAt(n.length-1),a=t,s=!1}else i=e.getItemAt(o),a-=r,s=!0;if(s)break}}catch(l){}return n},e}();__reflect(CaculatePointUtil.prototype,"CaculatePointUtil");var DateTimer=function(e){function t(t,n){void 0===n&&(n=0);var i=e.call(this)||this;return i.delay=t,i.repeatCount=n,i.currentCount=0,i}return __extends(t,e),t.prototype.start=function(){this.previous=egret.getTimer(),this.accTime=0,egret.startTick(this.update,this)},t.prototype.reset=function(){this.previous=egret.getTimer(),this.accTime=0,this.currentCount=0},t.prototype.stop=function(){egret.stopTick(this.update,this)},t.prototype.update=function(){for(this.curTime=egret.getTimer(),this.passTime=this.curTime-this.previous,this.previous=this.curTime,this.accTime+=this.passTime;this.accTime>=this.delay;)this.accTime-=this.delay,this.currentCount++,this.repeatCount>0&&this.currentCount==this.repeatCount&&(this.dispatchEvent(new egret.TimerEvent(egret.TimerEvent.TIMER_COMPLETE)),this.stop()),this.dispatchEvent(new egret.TimerEvent(egret.TimerEvent.TIMER));return!1},t}(egret.EventDispatcher);__reflect(DateTimer.prototype,"DateTimer");var game;!function(e){var t=function(){function t(){}return t.isSameDay=function(e,t){var n=new Date(e),i=new Date(t);return n.getFullYear()!=i.getFullYear()?!1:n.getMonth()!=i.getMonth()?!1:n.getDate()!=i.getDate()?!1:!0},t.isSameDayNow=function(e){return t.isSameDay(e,Date.now())},t.expireHour=function(e,t){var n=Math.floor(e/3600);return n+t},t.leftMinites=function(e){var t="",n="",i=Math.floor(e/3600),a=Math.floor((e-3600*i)/60),o=e-3600*i-60*a;return o>0&&(a+=1),a>=60&&(i+=1,a-=60),t=10>i?"0"+i:i.toString(),n=10>a?"0"+a:a.toString(),t+":"+n},t.need7DaysTipsToday=function(){var t=e.LocalStorageUtils.getNumber("tips_7days");return t&&this.isSameDayNow(t)?!1:!0},t.save7DaysTipsLastTime=function(){e.LocalStorageUtils.saveNumber("tips_7days",(new Date).getTime())},t}();e.DateUtil=t,__reflect(t.prototype,"game.DateUtil")}(game||(game={}));var HttpUtil=function(){function e(){}return e.getHttpServerUrl=function(){if(void 0==e.httpServerURL)if(GameConst.isRelease)switch(GameConst.platform){case PlatformConst.OVERSEAS:e.httpServerURL=e.Server_URL_ARRAY.releaseURL.overseas;break;case PlatformConst.WEIXIN:e.httpServerURL=e.Server_URL_ARRAY.releaseURL.weixin;break;case PlatformConst.DAYU:e.httpServerURL=nativeInterface.getHost()+"/app/api.php";break;case PlatformConst.TOUTIAO:e.httpServerURL=e.Server_URL_ARRAY.releaseURL.toutiao;break;case PlatformConst.H5:e.httpServerURL=e.Server_URL_ARRAY.releaseURL.h5;break;case PlatformConst.H5noad:e.httpServerURL=e.Server_URL_ARRAY.releaseURL.h5noad;break;case PlatformConst.ANDROID_MOBGI:e.httpServerURL=e.Server_URL_ARRAY.releaseURL.andoridMobgi}else{if(GameConst.platform==PlatformConst.DAYU)e.httpServerURL=nativeInterface.getHost()+"/app/api.php";else switch(GameConst.machine){case ServerMachine.OUT:e.httpServerURL=e.Server_URL_ARRAY.debugURL.out;break;case ServerMachine.KE:e.httpServerURL=e.Server_URL_ARRAY.debugURL.ke}null==e.httpServerURL&&console.log("【注意！注意！注意！未配置服务器地址】")}return e.httpServerURL},e.loadGet=function(e,t){var n=this;return new Promise(function(i,a){var o=new egret.URLLoader;o.dataFormat=egret.URLLoaderDataFormat.TEXT,o.addEventListener(egret.Event.COMPLETE,function(e){var t=e.currentTarget;i(t.data)},n),o.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){a()},n);var s=new egret.URLRequest(e);s.data=JSON.stringify(t),s.method=egret.URLRequestMethod.GET,s.requestHeaders=[new egret.URLRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8")],o.load(s)})},e.httpPOST=function(e,t,n){return new Promise(function(i,a){var o=new egret.HttpRequest;o.responseType=egret.HttpResponseType.TEXT,o.addEventListener(egret.Event.COMPLETE,function(e){var t=e.currentTarget;i(t.data)},n),o.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){a(e.currentTarget)},n),o.open(e,egret.URLRequestMethod.POST),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),o.send(t)})},e.getURL=function(t,n,i,a){void 0===n&&(n=!0),void 0===a&&(a=!1);var o=e.getHttpServerUrl()+"?act="+t;if(a&&GameConst.platform==PlatformConst.DAYU&&(o=nativeInterface.getHost()+"/track/buried.php?act="+t),n){var s=game.LocalStorageUtils.getString("sessionKey");if(GameConst.platform==PlatformConst.DAYU){var r=JSON.parse(nativeInterface.getSign());s=r.sessionKey}null==s&&(s=""),o=o+this.getSignRuler(s)+this.LanguageType()}else o+=this.LanguageType();if(null!=i)for(var h in i){var g=i[h];null==g&&(g=""),o=o+"&"+h+"="+g}return o},e.getSignRuler=function(e){var t=0,n="",i="",a="birdgo";GameConst.platform==PlatformConst.DAYU?(t=(new Date).getTime(),n="jl_center"+e+t,i=(new md5).hex_md5(n).toLocaleUpperCase()):(GameConst.platform==PlatformConst.WEIXIN?a="wx":GameConst.platform==PlatformConst.TOUTIAO&&(a="tt"),t=(new Date).getTime()/1e3|0,n="bird_go"+e+t,i=(new md5).hex_md5(n));var o="&sessionKey="+e+"&sign="+i+"&ts="+t+"&channel="+a;return o},e.LanguageType=function(){var e="";switch(game.LanguageManager.getLanguageType()){case ELanguageType.EN_US:e="en";break;case ELanguageType.ZH_TW:e="ct";break;case ELanguageType.ZH_CN:e="zh"}var t="&language="+e;return t},e.sessionKey="",e.Server_URL_ARRAY={releaseURL:{overseas:"http://114.215.84.210:3000/app/api.php",weixin:"https://snake.hclw.online/app/api.php",toutiao:"https://snake.hclw.online/app/api.php",h5:"http://bird.hclw.online/app/api.php",h5noad:"http://47.92.136.86:8080/app/api.php",andoridMobgi:"http://114.215.84.210:3000/app/api.php"},debugURL:{out:"http://47.92.136.86:8080/app/api.php",ke:"http://114.215.84.210:3000/app/api.php"}},e}();__reflect(HttpUtil.prototype,"HttpUtil");var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.leftArrowDown=!1,e.rightArrowDown=!1,e.kb=new KeyBoard,e}return __extends(n,t),n.prototype.init=function(){this.kb.addEventListener(KeyBoard.onkeydown,this.onkeydown,this)},n.prototype.onkeydown=function(t){"undefined"==typeof this.gameFightPanel&&(this.gameFightPanel=e.PanelManager.getInstance().getPanel(e.EPanelID.GameFight),this.gameFightPanel.enemy.isSnakeMoving=!0),this.kb.isContain(t.data,KeyBoard.A)?(this.rightArrowDown=!1,this.leftArrowDown=!0,this.gameFightPanel.enemy.leftRightMove(-e.StageUtils.getInstance().stageWidth/5)):this.kb.isContain(t.data,KeyBoard.D)&&(this.rightArrowDown=!0,this.leftArrowDown=!1,this.gameFightPanel.enemy.leftRightMove(e.StageUtils.getInstance().stageWidth/5))},n.prototype.onDestroy=function(){this.leftArrowDown=!1,this.rightArrowDown=!1,this.kb.removeEventListener(KeyBoard.onkeydown,this.onkeydown,this),this.gameFightPanel.enemy.isSnakeMoving=!1},n}(egret.DisplayObjectContainer);e.KeyBoardUtil=t,__reflect(t.prototype,"game.KeyBoardUtil")}(game||(game={}));var game;!function(e){var t=function(){function e(){}return e.saveString=function(e,t){e&&egret.localStorage.setItem(e,t)},e.getString=function(e){return e?egret.localStorage.getItem(e):void 0},e.saveBoolean=function(e,t){e&&egret.localStorage.setItem(e,t?"1":"0")},e.getBoolean=function(e){if(e){var t=egret.localStorage.getItem(e);return null==t?null:"1"==t?!0:"0"==t?!1:void 0}},e.saveNumber=function(e,t){e&&egret.localStorage.setItem(e,t.toString())},e.getNumber=function(e){if(e){var t=egret.localStorage.getItem(e);return null==t?null:parseInt(t)}},e.saveJsonObj=function(e,t){e&&egret.localStorage.setItem(e,JSON.stringify(t))},e.getJsonObj=function(e){if(e){var t=egret.localStorage.getItem(e);return null==t?null:JSON.parse(t)}},e.clearAll=function(){egret.localStorage.clear()},e.deleteKey=function(e){if(e){var t=egret.localStorage.getItem(e);null!=t&&egret.localStorage.removeItem(e)}},e}();e.LocalStorageUtils=t,__reflect(t.prototype,"game.LocalStorageUtils")}(game||(game={}));var LogUtil=function(){function e(){}return e.prototype.assert=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i]},e.prototype.clear=function(){},e.prototype.count=function(e){},e.prototype.debug=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},e.prototype.dir=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},e.prototype.dirxml=function(e){},e.prototype.error=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},e.prototype.exception=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},e.prototype.group=function(e){},e.prototype.groupCollapsed=function(e){},e.prototype.groupEnd=function(){},e.prototype.info=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},e.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},e.prototype.msIsIndependentlyComposed=function(e){return!1},e.prototype.profile=function(e){},e.prototype.profileEnd=function(){},e.prototype.select=function(e){},e.prototype.table=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.time=function(e){},e.prototype.timeEnd=function(e){},e.prototype.trace=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},e.prototype.warn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},e}();__reflect(LogUtil.prototype,"LogUtil",["Console"]);var md5=function(){function e(){this.hexcase=0,this.b64pad=""}return e.prototype.hex_md5=function(e){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(e)))},e.prototype.b64_md5=function(e){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(e)))},e.prototype.any_md5=function(e,t){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(e)),t)},e.prototype.hex_hmac_md5=function(e,t){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.prototype.b64_hmac_md5=function(e,t){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.prototype.any_hmac_md5=function(e,t,n){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),n)},e.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},e.prototype.rstr_md5=function(e){return this.binl2rstr(this.binl_md5(this.rstr2binl(e),8*e.length))},e.prototype.rstr_hmac_md5=function(e,t){var n=this.rstr2binl(e);n.length>16&&(n=this.binl_md5(n,8*e.length));for(var i=Array(16),a=Array(16),o=0;16>o;o++)i[o]=909522486^n[o],a[o]=1549556828^n[o];var s=this.binl_md5(i.concat(this.rstr2binl(t)),512+8*t.length);return this.binl2rstr(this.binl_md5(a.concat(s),640))},e.prototype.rstr2hex=function(e){try{this.hexcase}catch(t){this.hexcase=0}for(var n,i=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",a="",o=0;o<e.length;o++)n=e.charCodeAt(o),a+=i.charAt(n>>>4&15)+i.charAt(15&n);return a},e.prototype.rstr2b64=function(e){try{this.b64pad}catch(t){this.b64pad=""}for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="",a=e.length,o=0;a>o;o+=3)for(var s=e.charCodeAt(o)<<16|(a>o+1?e.charCodeAt(o+1)<<8:0)|(a>o+2?e.charCodeAt(o+2):0),r=0;4>r;r++)i+=8*o+6*r>8*e.length?this.b64pad:n.charAt(s>>>6*(3-r)&63);return i},e.prototype.rstr2any=function(e,t){var n,i,a,o,s,r=t.length,h=Array(Math.ceil(e.length/2));for(n=0;n<h.length;n++)h[n]=e.charCodeAt(2*n)<<8|e.charCodeAt(2*n+1);var g=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),l=Array(g);for(i=0;g>i;i++){for(s=Array(),o=0,n=0;n<h.length;n++)o=(o<<16)+h[n],a=Math.floor(o/r),o-=a*r,(s.length>0||a>0)&&(s[s.length]=a);l[i]=o,h=s}var c="";for(n=l.length-1;n>=0;n--)c+=t.charAt(l[n]);return c},e.prototype.str2rstr_utf8=function(e){for(var t,n,i="",a=-1;++a<e.length;)t=e.charCodeAt(a),n=a+1<e.length?e.charCodeAt(a+1):0,t>=55296&&56319>=t&&n>=56320&&57343>=n&&(t=65536+((1023&t)<<10)+(1023&n),a++),127>=t?i+=String.fromCharCode(t):2047>=t?i+=String.fromCharCode(192|t>>>6&31,128|63&t):65535>=t?i+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):2097151>=t&&(i+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return i},e.prototype.str2rstr_utf16le=function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(255&e.charCodeAt(n),e.charCodeAt(n)>>>8&255);return t},e.prototype.str2rstr_utf16be=function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e.charCodeAt(n)>>>8&255,255&e.charCodeAt(n));return t},e.prototype.rstr2binl=function(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(var n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t},e.prototype.binl2rstr=function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t},e.prototype.binl_md5=function(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var n=1732584193,i=-271733879,a=-1732584194,o=271733878,s=0;s<e.length;s+=16){var r=n,h=i,g=a,l=o;n=this.md5_ff(n,i,a,o,e[s+0],7,-680876936),o=this.md5_ff(o,n,i,a,e[s+1],12,-389564586),a=this.md5_ff(a,o,n,i,e[s+2],17,606105819),i=this.md5_ff(i,a,o,n,e[s+3],22,-1044525330),n=this.md5_ff(n,i,a,o,e[s+4],7,-176418897),o=this.md5_ff(o,n,i,a,e[s+5],12,1200080426),a=this.md5_ff(a,o,n,i,e[s+6],17,-1473231341),i=this.md5_ff(i,a,o,n,e[s+7],22,-45705983),n=this.md5_ff(n,i,a,o,e[s+8],7,1770035416),o=this.md5_ff(o,n,i,a,e[s+9],12,-1958414417),a=this.md5_ff(a,o,n,i,e[s+10],17,-42063),i=this.md5_ff(i,a,o,n,e[s+11],22,-1990404162),n=this.md5_ff(n,i,a,o,e[s+12],7,1804603682),o=this.md5_ff(o,n,i,a,e[s+13],12,-40341101),a=this.md5_ff(a,o,n,i,e[s+14],17,-1502002290),i=this.md5_ff(i,a,o,n,e[s+15],22,1236535329),n=this.md5_gg(n,i,a,o,e[s+1],5,-165796510),o=this.md5_gg(o,n,i,a,e[s+6],9,-1069501632),a=this.md5_gg(a,o,n,i,e[s+11],14,643717713),i=this.md5_gg(i,a,o,n,e[s+0],20,-373897302),n=this.md5_gg(n,i,a,o,e[s+5],5,-701558691),o=this.md5_gg(o,n,i,a,e[s+10],9,38016083),a=this.md5_gg(a,o,n,i,e[s+15],14,-660478335),i=this.md5_gg(i,a,o,n,e[s+4],20,-405537848),n=this.md5_gg(n,i,a,o,e[s+9],5,568446438),o=this.md5_gg(o,n,i,a,e[s+14],9,-1019803690),a=this.md5_gg(a,o,n,i,e[s+3],14,-187363961),i=this.md5_gg(i,a,o,n,e[s+8],20,1163531501),n=this.md5_gg(n,i,a,o,e[s+13],5,-1444681467),o=this.md5_gg(o,n,i,a,e[s+2],9,-51403784),a=this.md5_gg(a,o,n,i,e[s+7],14,1735328473),i=this.md5_gg(i,a,o,n,e[s+12],20,-1926607734),n=this.md5_hh(n,i,a,o,e[s+5],4,-378558),o=this.md5_hh(o,n,i,a,e[s+8],11,-2022574463),a=this.md5_hh(a,o,n,i,e[s+11],16,1839030562),i=this.md5_hh(i,a,o,n,e[s+14],23,-35309556),n=this.md5_hh(n,i,a,o,e[s+1],4,-1530992060),o=this.md5_hh(o,n,i,a,e[s+4],11,1272893353),a=this.md5_hh(a,o,n,i,e[s+7],16,-155497632),i=this.md5_hh(i,a,o,n,e[s+10],23,-1094730640),n=this.md5_hh(n,i,a,o,e[s+13],4,681279174),o=this.md5_hh(o,n,i,a,e[s+0],11,-358537222),a=this.md5_hh(a,o,n,i,e[s+3],16,-722521979),i=this.md5_hh(i,a,o,n,e[s+6],23,76029189),n=this.md5_hh(n,i,a,o,e[s+9],4,-640364487),o=this.md5_hh(o,n,i,a,e[s+12],11,-421815835),a=this.md5_hh(a,o,n,i,e[s+15],16,530742520),i=this.md5_hh(i,a,o,n,e[s+2],23,-995338651),n=this.md5_ii(n,i,a,o,e[s+0],6,-198630844),o=this.md5_ii(o,n,i,a,e[s+7],10,1126891415),a=this.md5_ii(a,o,n,i,e[s+14],15,-1416354905),i=this.md5_ii(i,a,o,n,e[s+5],21,-57434055),n=this.md5_ii(n,i,a,o,e[s+12],6,1700485571),o=this.md5_ii(o,n,i,a,e[s+3],10,-1894986606),a=this.md5_ii(a,o,n,i,e[s+10],15,-1051523),i=this.md5_ii(i,a,o,n,e[s+1],21,-2054922799),n=this.md5_ii(n,i,a,o,e[s+8],6,1873313359),o=this.md5_ii(o,n,i,a,e[s+15],10,-30611744),a=this.md5_ii(a,o,n,i,e[s+6],15,-1560198380),i=this.md5_ii(i,a,o,n,e[s+13],21,1309151649),n=this.md5_ii(n,i,a,o,e[s+4],6,-145523070),o=this.md5_ii(o,n,i,a,e[s+11],10,-1120210379),a=this.md5_ii(a,o,n,i,e[s+2],15,718787259),i=this.md5_ii(i,a,o,n,e[s+9],21,-343485551),n=this.safe_add(n,r),i=this.safe_add(i,h),a=this.safe_add(a,g),o=this.safe_add(o,l)}return[n,i,a,o]},e.prototype.md5_cmn=function(e,t,n,i,a,o){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(i,o)),a),n)},e.prototype.md5_ff=function(e,t,n,i,a,o,s){return this.md5_cmn(t&n|~t&i,e,t,a,o,s)},e.prototype.md5_gg=function(e,t,n,i,a,o,s){return this.md5_cmn(t&i|n&~i,e,t,a,o,s)},e.prototype.md5_hh=function(e,t,n,i,a,o,s){return this.md5_cmn(t^n^i,e,t,a,o,s)},e.prototype.md5_ii=function(e,t,n,i,a,o,s){return this.md5_cmn(n^(t|~i),e,t,a,o,s)},e.prototype.safe_add=function(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n},e.prototype.bit_rol=function(e,t){return e<<t|e>>>32-t},e}();__reflect(md5.prototype,"md5");var MsgUtil=function(){function e(){}return e.GetInstance=function(){return null==this.msgUtil&&(this.msgUtil=new e),this.msgUtil},e.prototype.judgetype=function(){GameConst.platform==PlatformConst.DAYU&&(e.msg_text="鱼蛋")},e.prototype.CodeExplain=function(e,t){var n="";switch(game.LanguageManager.getLanguageType()){case ELanguageType.EN_US:n=this.enMsg(e);break;case ELanguageType.ZH_TW:n=this.zhMsg(e);break;case ELanguageType.ZH_CN:n=this.chMsg(e)}""!=n&&game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:n,type:TipsStyle.wordType}),this.backLogin(e,t)},e.prototype.enMsg=function(e){var t="";switch(e){case 0:t="The login information has expired, Please log in again";break;case 201:t="Please do not click frequently and try again later.";break;case 202:t="";break;case 203:t="";break;case 204:t="";break;case 205:t="";break;case 206:t="";break;case 207:t="";break;case 208:t="";break;case 211:case 212:case 213:case 214:case 215:t="Payment failed.";break;case 216:t="";break;case 217:t="";break;case 301:t="Today has reached the limit, try again tomorrow!";break;case 302:t="";break;case 303:t="";break;case 304:t="Diamonds are not enough.";break;case 306:t="";break;case 307:t="";break;case 308:t="";break;case 501:t="";break;case 998:t="";break;case 999:t=""}return t},e.prototype.zhMsg=function(e){var t="";switch(e){case 0:t="登錄信息已過期，請重新登錄。";break;case 201:t="请不要频繁点击，稍后再试。";break;case 202:t="今日已簽過到";break;case 203:t="簽到失敗";break;case 204:t="註冊失敗";break;case 205:t="皮膚已被購買";break;case 206:t="非法皮膚";break;case 207:t="非法的登錄方式";break;case 208:t="賬號驗證失敗";break;case 211:case 212:case 213:case 214:case 215:t="支付失敗";break;case 216:t="免廣告服務已經購買,請勿重復購買服務";break;case 217:t="不支持的語言";break;case 301:t="本日次數已到上限，明日再試哦！";break;case 302:t="已擁有此道具";break;case 303:t="無此道具";break;case 304:t="鑽石不足哦";break;case 306:t="本局廣告復活次數達上限";break;case 307:t="本局分享復活次數達上限";break;case 308:t="本局鉆石復活次數達上限";break;case 501:t="道具寫入失敗";break;case 998:t="參數缺失";break;case 999:t="參數錯誤"}return t},e.prototype.chMsg=function(t){var n="";switch(t){case 0:n="登录信息已过期，请重新登录。";break;case 201:n="请不要频繁点击，稍后再试。";break;case 202:n="今日已签过到";break;case 203:n="签到失败";break;case 204:n="注册失败";break;case 205:n="皮肤已被购买";break;case 206:n="非法皮肤";break;case 207:n="非法的登录方式";break;case 208:n="账号验证失败";break;case 211:case 212:case 213:case 214:case 215:n="支付失败";break;case 216:n="免广告服务已经购买,请勿重复购买服务";break;case 217:n="不支持的语言";break;case 301:n="本日次数已到上限，明日再试哦！";break;case 302:n="已拥有此道具";break;case 303:n="无此道具";break;case 304:n=e.msg_text+"不足哦";break;case 306:n="本局广告复活次数达上限";break;case 307:n="本局分享复活次数达上限";break;case 308:n="本局"+e.msg_text+"复活次数达上限";break;case 501:n="道具写入失败";break;case 998:n="参数缺失";break;case 999:n="参数错误"}return n},e.prototype.backLogin=function(e,t){GameConst.platform==PlatformConst.OVERSEAS&&0==e&&setTimeout(function(){if(t)for(var e=0;e<t.length;e++)game.PanelManager.getInstance().close(t[e],!0);game.PanelManager.getInstance().open(game.EPanelID.LoginType)},1400)},e.msg_text="钻石",e}();__reflect(MsgUtil.prototype,"MsgUtil");var core;!function(e){var t=function(){function e(){}return Object.defineProperty(e,"isPC",{get:function(){return"Windows PC"==egret.Capabilities.os},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isiOS",{get:function(){return"iOS"==egret.Capabilities.os},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){return"Android"==egret.Capabilities.os},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWindowPhone",{get:function(){return"Windows Phone"==egret.Capabilities.os},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMacOS",{get:function(){return"Mac OS"==egret.Capabilities.os},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isUnknown",{get:function(){return"Unknown"==egret.Capabilities.os},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWeb",{get:function(){return"web"==egret.RuntimeType.WEB},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isWeixin",{get:function(){var e=window.navigator.userAgent.toLowerCase();return-1!=e.indexOf("micromessenger")?!0:!1},enumerable:!0,configurable:!0}),e}();e.PlatUtils=t,__reflect(t.prototype,"core.PlatUtils")}(core||(core={}));var StringTool=function(){function e(){}return e.trim=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},e.formatNickName=function(e,t){void 0===t&&(t=10);var n=this.getStrLength(e);return n>t?e.substr(0,Math.round(t)):e},e.getStrLength=function(e){for(var t=0,n=0,i=0;i<e.length;i++)n=e.charCodeAt(i),n>127||n>=65&&90>=n?t+=2:t++;return t},e.stringToBytes=function(e){var t,n,i=new Array;t=e.length;for(var a=0;t>a;a++)n=e.charCodeAt(a),n>=65536&&1114111>=n?(i.push(n>>18&7|240),i.push(n>>12&63|128),i.push(n>>6&63|128),i.push(63&n|128)):n>=2048&&65535>=n?(i.push(n>>12&15|224),i.push(n>>6&63|128),i.push(63&n|128)):n>=128&&2047>=n?(i.push(n>>6&31|192),i.push(63&n|128)):i.push(255&n);return i},e.byteToString=function(e){if("string"==typeof e)return e;for(var t="",n=e,i=0;i<n.length;i++){var a=n[i].toString(2),o=a.match(/^1+?(?=0)/);if(o&&8==a.length){for(var s=o[0].length,r=n[i].toString(2).slice(7-s),h=1;s>h;h++)r+=n[h+i].toString(2).slice(2);t+=String.fromCharCode(parseInt(r,2)),i+=s-1}else t+=String.fromCharCode(n[i])}return t},e.getTXK=function(e){return e&&e.txk&&e.txk.list&&e.txk.list.length>0?e.txk.list[0]+"_png":""},e}();__reflect(StringTool.prototype,"StringTool");var TimerCountdown=function(){function e(e,t,n,i){this.isPause=!1,this.seconds=e,this.delay=t,this.onTimerCallback=n,this.onFinishCallback=i,this.timer=new DateTimer(t,e),this.timer.addEventListener(egret.TimerEvent.TIMER,this.ontimer,this),this.timer.start()}return e.prototype.Pause=function(e){this.isPause=e},e.prototype.setTime=function(e){this.seconds=e},e.prototype.setDelay=function(e){this.delay=e},e.prototype.ontimer=function(){this.isPause||(this.seconds=this.seconds-this.delay,this.seconds<=0?(this.onFinishCallback&&this.onFinishCallback(),this.clearTimer()):this.onTimerCallback&&this.onTimerCallback(this.seconds))},e.prototype.clearTimer=function(){this.timer&&this.timer.reset(),this.timer&&this.timer.removeEventListener(egret.TimerEvent.TIMER,this.ontimer,this),this.timer=null,this.onTimerCallback=null,this.onFinishCallback=null,this.seconds=0},e}();__reflect(TimerCountdown.prototype,"TimerCountdown");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,n,i){function a(e){t.call(i,e)}function o(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),n.call(i))}var s=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(i,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,n){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(i,generateEUI2)},s)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var r=e.split("/");r.pop();var h=r.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){t.call(i,generateJSON.paths[e])},this):RES.getResByUrl(h,function(n){window.JSONParseClass.setData(n),egret.callLater(function(){t.call(i,generateJSON.paths[e])},s)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(i,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(e,a,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var game;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.autoLogin=function(){if(GameConst.platform==PlatformConst.DAYU||GameConst.platform==PlatformConst.WEIXIN||GameConst.platform==PlatformConst.TOUTIAO)e.ResourceManager.getInstance().loadResource("loginmain").then(function(){e.PanelManager.getInstance().open(e.EPanelID.LoginMain)})["catch"](function(){console.log("加载失败")});else if(GameConst.platform==PlatformConst.OVERSEAS){var t=e.LocalStorageUtils.getString("LoginTypestaus");if(null!=t){var n=parseInt(t);switch(n){case LoginTypestaus.facebookLogin:UserInfo.isAutogoogleLogin=!1,this.reportImei(LoginTypestaus.facebookLogin),e.FacebookSDKMgr.getInstance().facebookSignIn();break;case LoginTypestaus.googleLogin:UserInfo.isAutogoogleLogin=!0,this.reportImei(LoginTypestaus.googleLogin);var i=e.LocalStorageUtils.getString("id_token");e.GetHttpData.getInstance().googleLogin(ELoginCode.SUCCESS,i);break;case LoginTypestaus.touristLogin:UserInfo.isAutogoogleLogin=!1,this.reportImei(LoginTypestaus.touristLogin),this.touristLogin()}}else e.PanelManager.getInstance().open(e.EPanelID.LoginType)}else GameConst.platform==PlatformConst.ANDROID_MOBGI||GameConst.platform==PlatformConst.H5||GameConst.platform==PlatformConst.H5noad?e.AutoLoginManager.getInstance().haveImeiData()?e.ResourceManager.getInstance().loadResource("loginmain").then(function(){e.PanelManager.getInstance().open(e.EPanelID.LoginMain)})["catch"](function(){console.log("加载失败")}):e.PanelManager.getInstance().open(e.EPanelID.LoginType):console.log("自动登录失败")},n.prototype.touristLogin=function(){if(console.log("click_tourist__111____000"),this.haveImeiData()){var t=e.LocalStorageUtils.getString("imei");console.log("click_tourist__111____111"),e.GetHttpData.getInstance().GetloginData(t)}else this.haveSessionKeyData()&&this.loadSence()},n.prototype.reportImei=function(t){if(UserInfo.Logintype=t,this.haveImeiData()){var n=e.LocalStorageUtils.getString("imei");e.GetHttpData.getInstance().getImei(n)}},n.prototype.haveImeiData=function(){var t=e.LocalStorageUtils.getString("imei");return null==t?!1:!0},n.prototype.haveSessionKeyData=function(){var t=e.LocalStorageUtils.getString("sessionKey");return null==t?!1:!0},n.prototype.loadSence=function(){e.ResourceManager.getInstance().loadResource("loginmain").then(function(){e.PanelManager.getInstance().close(e.EPanelID.LoginType,!0),e.PanelManager.getInstance().open(e.EPanelID.LoginMain)})["catch"](function(){console.log("加载失败")})},n}(e.Singleton);e.AutoLoginManager=t,__reflect(t.prototype,"game.AutoLoginManager")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.m_event=new egret.EventDispatcher,t}return __extends(t,e),Object.defineProperty(t.prototype,"theRouter",{get:function(){return this.m_event},enumerable:!0,configurable:!0}),t.prototype.containsEvent=function(e){return t.getInstance().theRouter.hasEventListener(e.toString())},t.prototype.addListener=function(e,n,i){t.getInstance().theRouter.addEventListener(e.toString(),n,i)},t.prototype.removeListener=function(e,n,i){t.getInstance().theRouter.removeEventListener(e.toString(),n,i)},t.prototype.trigger=function(e,n){t.getInstance().theRouter.dispatchEventWith(e.toString(),!1,n,!1)},t.prototype.init=function(){},t.prototype.unInit=function(){},t}(e.Singleton);e.EventManager=t,__reflect(t.prototype,"game.EventManager")}(game||(game={}));var TipsBox=function(e){function t(){var t=e.call(this)||this;return t.tipsUIList=[],t.skinName="resource/eui_skins/tipsSkin.exml",t.img_click.addEventListener(egret.TouchEvent.TOUCH_END,t.click,t),t.isclick=!1,t.languageHandle(),t}return __extends(t,e),t.prototype.languageHandle=function(){},t.prototype.click=function(){if(this.isclick){this.isclick=!1;var e=this.tipsUIList[game.ETipsID.TipsBox];e&&this.tipsLayer.removeChild(e)}},t}(eui.Component);__reflect(TipsBox.prototype,"TipsBox");var TipsDemond=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/TipsDemondSkin.exml",t.languageHandle(),t}return __extends(t,e),t.prototype.languageHandle=function(){this.tip_img.source=game.LanguageManager.getString("tips_png")},t}(eui.Component);__reflect(TipsDemond.prototype,"TipsDemond");var game;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.init=function(){GameConst.platform==PlatformConst.DAYU&&(n.paytype="鱼蛋",n.image="pay_skin_en_png",n.diamond_img="egg_png",n.dic_zh_cn.png_buy_img=n.image,n.dic_zh_cn.tips_20=n.paytype+"购买该皮肤?",n.dic_zh_cn.pstore_diamond=n.paytype,n.dic_zh_cn.png_result_diamoneImg=n.diamond_img,n.dic_zh_cn.tips_07=n.paytype+"不足哦。",n.dic_zh_cn.png_pve_relive_pay="pve_revive_diamon_egg_png",n.dic_zh_cn.tips_png="egg_png",n.dic_zh_cn.png_reward_diamond="zhuan_egg_png",n.dic_zh_cn.png_tip_img="title_egg_png");
var t=e.LocalStorageUtils.getNumber("language");if(null!=t)switch(t){case ELanguageType.EN_US:n.changeLanguage(ELanguageType.EN_US);break;case ELanguageType.ZH_TW:n.changeLanguage(ELanguageType.ZH_TW);break;case ELanguageType.ZH_CN:n.changeLanguage(ELanguageType.ZH_CN)}else n.changeLanguage(n.languageType)},n.changeLanguage=function(t){n.languageType=t,e.LocalStorageUtils.saveNumber("language",t),e.EventManager.getInstance().trigger(EventNotify.Language_change)},n.getLanguageType=function(){return n.languageType},n.changeLanguageAuto=function(){n.changeLanguage(n.getNextLanguage())},n.getNextLanguage=function(){var e=n.languageType;return++e>=n.languageNum&&(e=0),e},n.getString=function(e){var t="";switch(n.languageType){case ELanguageType.EN_US:t=n.dic_en_us[e];break;case ELanguageType.ZH_TW:t=n.dic_zh_tw[e];break;case ELanguageType.ZH_CN:t=n.dic_zh_cn[e]}return t},n.languageType=ELanguageType.EN_US,n.languageNum=2,n.paytype="钻石",n.image="pay_skin_png",n.diamond_img="diamone_img_png",n.dic_zh_tw={plogin_tourist:"遊客",psetting_title:"設置",psetting_language:"繁體中文",psetting_music_on:"音效：開",psetting_music_off:"音效：關",psetting_login:"登錄",psetting_logout:"退出",psetting_rate:"給我們評價",psetting_likeus:"給我們點贊",psetting_follow:"關注我們",pstore_title:"商城",pstore_diamond:"鑽石",pmain_rank:"排行榜",pmain_share:"分享",psignin_receive:"領取",psignin_receive_double:"領取雙倍",exit_back:"返回",exit_quit:"退出",exit_title:"退 出 遊 戲 嗎 ?",unit00:"個",unit01:"次",unit02:"，",unit03:"。",tips_01:"溫馨提示：每日大禮包鑽石抽取區間為10-999鑽石。",tips_02:"網路異常，請連結網路。",tips_03:"獲得了",tips_03_01:"獲得了",tips_04:"購買成功。",tips_05:"支付成功，",tips_06:"分享成功。",tips_07:"鑽石不足哦。",tips_08:"支付失敗。",tips_09:"累計觀看了",tips_10:"廣告",tips_11:"獲得",tips_12:"本日次數已到上限，明日再試哦！",tips_13:"您需要登錄帳號才可進行支付操作。",tips_14:"分享失敗。",tips_15:"登錄資訊已過期，請重新登錄。",tips_16:"登錄失敗",tips_17:"當前獲取廣告失敗，請稍候重試",tips_18:"充值成功",tips_369:"复制游戏地址成功，请在微信中黏贴分享",tips_37:"好友@你，贪吃蛇吃鸡模式，正式开战，你敢挑战吗？http://birdgo-static.hclw.online/share.html",tips_png:"tips_demond_png",png_xxx:"test_tw_png",png_tourist:"tourist_png",png_main_start:"startbtn_png",png_main_videostart:"video_startbtn_png",png_main_have:"you_png",png_reward_libao:"libao_png",png_reward_diamond:"zhuan_png",png_tip_img:"title_png",png_get_btn:"get_btn_png",presult_return_main:"返回首頁",presult_friend_help:"復活",png_result_panel:"result_panel_png",png_result_video:"result_video_png",png_result_demoind:"result_demoind_png",png_result_title:"result_live_png",png_result_diamoneImg:n.diamond_img,png_store_videoDiamond_btn:"StoreImg_json.diamond_btn",tips_19:"是否使用",tips_20:"鉆石購買該皮膚?",tips_21:"確認",tips_22:"取消",tips_23:"免費",tips_24:"每旋轉8次轉盤，可獲得1個鑽石寶箱！",png_buy_img:n.image,png_pve_video_btn:"pve_video_start_png",png_pve_btn:"1vs1_png",png_pve_relive_pay:"pve_revive_diamon_png",png_pve_win_btn:"pve_win_btn_bg_png",png_pve_title_revive:"pve_revive_png",png_pve_title_lose:"pve_lose_title_png",png_pve_title_win:"pve_title_win_png",pve_return_main:"返回首頁",pve_restart:"重新開始",prank_title:"排行榜",prank_type1:"經典模式",sign_7days_title:"簽到",day_1:"第1天",day_2:"第2天",day_3:"第3天",day_4:"第4天",day_5:"第5天",day_6:"第6天",day_7:"第7天",double_reward:"雙倍驚喜",sign_gain:"領取",sign_finished:"已領取",task_title:"日常任務",task_2play:"去完成",task_gain:"領取",task_finished:"已完成"},n.dic_en_us={plogin_tourist:"Guest",psetting_title:"SETTINGS",psetting_language:"ENGLISH",psetting_music_on:"SFX：ON",psetting_music_off:"SFX：OFF",psetting_login:"LOGIN",psetting_logout:"LOGOUT",psetting_rate:"RATE US",psetting_likeus:"LIKE US",psetting_follow:"FOLLOW US",pstore_title:"STORE",pstore_diamond:" DIAMONDS",pmain_rank:"TOP SCORE",pmain_share:"SHARE",psignin_receive:"RECEIVE",psignin_receive_double:"DOUBLE",exit_back:"BACK",exit_quit:"QUIT",exit_title:"Exit the game ?",unit00:" ",unit01:" ",unit02:",",unit03:".",tips_01:"Tips: Free gift  can get 10-999 diamonds.",tips_02:"Network exception, please relink the network.",tips_03:"Earned ",tips_03_01:"earned",tips_04:"Purchase skin successfully.",tips_05:"Successful payment,",tips_06:"Sharing success.",tips_07:"Diamonds are not enough.",tips_08:"Payment failed.",tips_09:"Watched ",tips_10:"ads ",tips_11:"got",tips_12:"Today has reached the limit,try again tomorrow!",tips_13:"You need to be logged in to make a payment.",tips_14:"Sharing failure.",tips_15:"The login information has expired, Please log in again.",tips_16:"Login failed.",tips_17:"Currently failed to get the ad, please try again later",tips_18:"Payment successful",tips_369:"Copy the game address successfully, please paste and share in wechat",tips_37:"好友@你，贪吃蛇吃鸡模式，正式开战，你敢挑战吗？http://birdgo-static.hclw.online/share.html",png_xxx:"test_en_png",tips_png:"tips_demond_png",png_tourist:"tourist_en_png",png_main_start:"startbtn_en_png",png_main_videostart:"video_startbtn_en_png",png_main_have:"you_en_png",png_reward_libao:"libao_en_png",png_reward_diamond:"zhuan_en_png",png_tip_img:"title_en_png",png_get_btn:"get_btn_en_png",presult_return_main:"MAIN MENU",presult_friend_help:"CONTINUE",png_result_panel:"result_panel_en_png",png_result_video:"result_video_en_png",png_result_demoind:"result_demoind_en_png",png_result_title:"result_live_en_png",png_result_diamoneImg:n.diamond_img,png_store_videoDiamond_btn:"StoreImg_json.diamond_btn_en",tips_19:"Use ",tips_20:" Diamond to buy this skin?",tips_21:"DEFINITE",tips_22:"CANCEL",tips_23:"FREE",tips_24:"8 spin got one box！",png_buy_img:n.image,png_pve_video_btn:"pve_video_start_png",png_pve_btn:"1vs1_png",png_pve_relive_pay:"pve_revive_diamon_png",png_pve_win_btn:"pve_win_btn_bg_en_png",png_pve_title_revive:"pve_revive_en_png",png_pve_title_lose:"pve_lose_title_en_png",png_pve_title_win:"pve_title_win_en_png",pve_return_main:"MAIN MENU",pve_restart:"RESTART",prank_title:"TOP SCORE",prank_type1:"CLASSIC",sign_7days_title:"AWARD",day_1:"1st",day_2:"2nd",day_3:"3rd",day_4:"4th",day_5:"5th",day_6:"6th",day_7:"7th",double_reward:"DOUBLE",sign_gain:"CLAIM",sign_finished:"CLAIMED",task_title:"DAILY",task_2play:"PLAY",task_gain:"CLAIM",task_finished:"DONE"},n.dic_zh_cn={plogin_tourist:"游客",psetting_title:"设置",psetting_language:"繁体中文",psetting_music_on:"音效：开",psetting_music_off:"音效：关",psetting_login:"登录",psetting_logout:"退出",psetting_rate:"给我们评价",psetting_likeus:"给我们点赞",psetting_follow:"关注我们",pstore_title:"商城",pstore_diamond:n.paytype,pmain_rank:"排行榜",pmain_share:"分享",psignin_receive:"领取",psignin_receive_double:"领取双倍",presult_return_main:"返回首页",presult_friend_help:"分享复活",exit_back:"返回",exit_quit:"退出",exit_title:"退 出 游 戏 吗 ?",unit00:"个",unit01:"次",unit02:"，",unit03:"。",tips_01:"温馨提示：每日大礼包钻石抽取区间为10-999钻石。",tips_02:"网络异常，请链接网络。",tips_03:"获得了",tips_03_01:"获得了",tips_04:"购买成功。",tips_05:"支付成功，",tips_06:"分享成功。",tips_07:n.paytype+"不足哦。",tips_08:"支付失败。",tips_09:"累计观看了",tips_10:"广告",tips_11:"获得",tips_12:"本日次数已到上限，明日再试哦！",tips_13:"您需要登录账号才可进行支付操作。",tips_14:"分享失败。",tips_15:"登录信息已过期，请重新登录。",tips_16:"登录失败",tips_17:"当前获取广告失败，请稍候重试",tips_18:"充值成功",tips_369:"复制游戏地址成功，请在微信中黏贴分享",tips_37:"好友@你，贪吃蛇吃鸡模式，正式开战，你敢挑战吗？http://birdgo-static.hclw.online/share.html",png_xxx:"test_tw_png",tips_png:"tips_demond_png",png_tourist:"tourist_png",png_main_start:"startbtn_cn_png",png_main_videostart:"video_startbtn_cn_png",png_main_have:"you_cn_png",png_reward_libao:"libao_cn_png",png_reward_diamond:"zhuan_cn_png",png_tip_img:"title_cn_png",png_get_btn:"get_btn_cn_png",png_result_panel:"result_panel_cn_png",png_result_video:"result_video_cn_png",png_result_demoind:"result_demoind_png",png_result_title:"result_live_cn_png",png_result_diamoneImg:n.diamond_img,png_store_videoDiamond_btn:"StoreImg_json.diamond_btn",tips_19:"是否使用",tips_20:n.paytype+"购买该皮肤?",tips_21:"确认",tips_22:"取消",tips_23:"免费",tips_24:"每旋转8次转盘，可获得1个"+n.paytype+"宝箱！",png_buy_img:n.image,png_pve_video_btn:"pve_video_start_cn_png",png_pve_btn:"1vs1_cn_png",png_pve_relive_pay:"pve_revive_diamon_png",png_pve_win_btn:"pve_win_btn_bg_cn_png",png_pve_title_revive:"pve_revive_cn_png",png_pve_title_lose:"pve_lose_title_cn_png",png_pve_title_win:"pve_title_win_cn_png",pve_return_main:"返回首页",pve_restart:"重新开始",prank_title:"排行榜",prank_type1:"经典模式",sign_7days_title:"签到",day_1:"第1天",day_2:"第2天",day_3:"第3天",day_4:"第4天",day_5:"第5天",day_6:"第6天",day_7:"第7天",double_reward:"双倍惊喜",sign_gain:"领取",sign_finished:"已领取",task_title:"日常任务",task_2play:"去完成",task_gain:"领取",task_finished:"已完成"},n}(e.Singleton);e.LanguageManager=t,__reflect(t.prototype,"game.LanguageManager")}(game||(game={}));var TipsTouTiao=function(e){function t(){var t=e.call(this)||this;return t.skinName="TipsTouTiaoSkin",t}return __extends(t,e),t.prototype.partAdded=function(t,n){e.prototype.partAdded.call(this,t,n)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(eui.Component);__reflect(TipsTouTiao.prototype,"TipsTouTiao",["eui.UIComponent","egret.DisplayObject"]);var MoviceClipManager=function(){function e(){this._moviceClipFactoryCache={}}return e.getInstance=function(){return this._moviceClipManager||(this._moviceClipManager=new e),this._moviceClipManager},e.prototype.createMoviceClipByRes=function(e,t,n){var i=this._moviceClipFactoryCache[e];if(!i){var a=RES.getRes(e),o=RES.getRes(t);if(!a||!o)return;i=new egret.MovieClipDataFactory(a,o),this._moviceClipFactoryCache[e]=i}var s=new egret.MovieClip(i.generateMovieClipData(n));return s},e.prototype.removeMoviceClipByName=function(e){this._moviceClipFactoryCache[e]&&delete this._moviceClipFactoryCache[e]},e}();__reflect(MoviceClipManager.prototype,"MoviceClipManager");var LoadingUI=function(e){function t(t,n){var i=e.call(this)||this;return i.stageWidth=t,i.stageHeight=n,i.loadingViews(),i}return __extends(t,e),t.prototype.loadingViews=function(){var e=new eui.Image;this.addChild(e),e.source="preload_bg_png",e.width=this.stageWidth,e.height=this.stageHeight,e.x=0,e.y=0},t}(eui.Component);__reflect(LoadingUI.prototype,"LoadingUI");var game;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.dealwithResponse=function(t){var n=null;if(t&&t.target&&t.target.response)try{var i=JSON.parse(t.target.response);if(i){var a=i.code;a=this.judgeCode(a,i),200==a?n=i.data:MsgUtil.GetInstance().CodeExplain(a)}else e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"返回数据异常")}catch(o){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"返回数据异常")}else e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"返回数据异常");return n},n.prototype.connectErr=function(){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},n.prototype.getImei=function(t,n){var i=this;void 0===n&&(n=GameConst.curVersion);var a="";if(t){var o={imei:t,version:n};a=HttpUtil.getURL(GameConst.Login_IMEI,!1,o)}else{var o={version:n};a=HttpUtil.getURL(GameConst.Login_IMEI,!1,o)}HttpManager.httpGET(a,function(t){var n=i.dealwithResponse(t);n&&n.hasOwnProperty("imei")&&e.LocalStorageUtils.saveString("imei",n.imei)},function(e){i.connectErr()},this)},n.prototype.GetloginData=function(e){var t={third:3,imei:e};this.LoginData(t,LoginTypestaus.touristLogin)},n.prototype.googleLogin=function(t,n,i){switch(void 0===i&&(i=null),t){case ELoginCode.SUCCESS:var a={};if(e.LocalStorageUtils.saveString("id_token",n),e.AutoLoginManager.getInstance().haveImeiData()){var o=e.LocalStorageUtils.getString("imei");a={third:2,imei:o,id_token:n}}else a={third:2,id_token:n};this.LoginData(a,LoginTypestaus.googleLogin);break;case ELoginCode.ERROR:e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:e.LanguageManager.getString("tips_16"),type:TipsStyle.wordType})}},n.prototype.facebookLogin=function(t,n,i){switch(t){case ELoginCode.SUCCESS:var a={};if(e.AutoLoginManager.getInstance().haveImeiData()){var o=e.LocalStorageUtils.getString("imei");a={third:1,imei:o,fb_id:n,fb_token:i}}else a={third:1,fb_id:n,fb_token:i};this.LoginData(a,LoginTypestaus.facebookLogin);break;case ELoginCode.ERROR:e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:e.LanguageManager.getString("tips_16"),type:TipsStyle.wordType})}},n.prototype.LoginData=function(t,n,i){var a=this;void 0===i&&(i=GameConst.curVersion),t.version=i;var o=HttpUtil.getURL(GameConst.GAME_LOGIN,!1,t);console.log("click_tourist__111____000"+o),HttpManager.httpGET(o,function(t){if(t&&t.target&&t.target.response){var i=JSON.parse(t.target.response),o=i.code;if(200==o){if(n!=LoginTypestaus.touristLogin){var s=a.getPanel(e.EPanelID.LoginType);null!=s&&s.tourist_btn.visible&&(s.tourist_btn.visible=!1,n==LoginTypestaus.facebookLogin&&(s.tipImg1.visible=!1),e.LocalStorageUtils.saveString("touristStyle","hidden"))}HttpUtil.sessionKey=i.data.sessionKey,e.LocalStorageUtils.saveString("sessionKey",i.data.sessionKey),UserInfo.userID=i.data.uid,UserInfo.Nick=i.data.nick,UserInfo.isNew=i.data.isNew,a.loadSence()}else if(UserInfo.Logintype==LoginTypestaus.googleLogin)1!=o&&UserInfo.isAutogoogleLogin&&e.PanelManager.getInstance().open(e.EPanelID.LoginType);else{var r=e.LocalStorageUtils.getString("LoginTypestaus");null!=r&&e.PanelManager.getInstance().open(e.EPanelID.LoginType),MsgUtil.GetInstance().CodeExplain(o)}}},function(e){a.connectErr()},this)},n.prototype.loadSence=function(){e.ResourceManager.getInstance().loadResource("loginmain").then(function(){e.PanelManager.getInstance().close(e.EPanelID.LoginType,!0),e.PanelManager.getInstance().open(e.EPanelID.LoginMain)})["catch"](function(){console.log("加载失败")})},n.prototype.signInResult=function(t){var n=this;HttpManager.httpGET(t,function(t){var i=n.dealwithResponse(t);if(i)if(e.PanelManager.getInstance().getPanel(e.EPanelID.GameSignInDays).back(),i.type==Sign7RewardInfo.TYPE_SKIN){var a=SkinInfo.getHeadImgName(i.sid);e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{type:TipsStyle.getSKin,img:a})}else{var o=i.getCount,s="+"+o;o>0&&(GameConst.platform==PlatformConst.DAYU?e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:s,type:TipsStyle.getDiamond,isclick:!0}):e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:s,type:TipsStyle.getDiamond}))}},function(t){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this)},n.prototype.getTaskReward=function(t,n){var i=this;HttpManager.httpGET(t,function(t){var a=i.dealwithResponse(t);if(a){var o=a.getCount;UserInfo.DiamondNumber=a.sumCount;var s="+"+o;TaskManager.getInstance().setStateGained(n);var r=e.PanelManager.getInstance().getPanel(e.EPanelID.GameTask);r.refresh(),o>0&&e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:s,type:TipsStyle.getDiamond})}},function(t){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this)},n.prototype.loginRewardResult=function(t,n,i){var a=this;HttpManager.httpGET(t,function(t){if(t&&t.target&&t.target.response){var o=JSON.parse(t.target.response),s=o.code;if(200==s){if("report_reword"==n){var r=2*o.data.getCount,h="+"+r;UserInfo.DiamondNumber=o.data.sumCount,a.initLoginMain(h,TipsStyle.getDiamond),i>0&&setTimeout(function(){var t="+"+i;e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:t,type:TipsStyle.getDiamond})},2e3)}else if(e.PanelManager.getInstance().close(e.EPanelID.GameSignIn,!0),SignManager.getInstance().setIsLoginReward(1),"double"==n){var g={id:o.data.id},l=HttpUtil.getURL(GameConst.GAME_DOUBLESIGNIN,!0,g);a.loginRewardResult(l,"report_reword",i)}else if("sigle"==n){var r=o.data.getCount,h="+"+r;UserInfo.DiamondNumber=o.data.sumCount,a.initLoginMain(h,TipsStyle.getDiamond),i>0&&setTimeout(function(){var t="+"+i;e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:t,type:TipsStyle.getDiamond})},2e3)}}else{var c=[e.EPanelID.LoginMain,e.EPanelID.GameSignIn];MsgUtil.GetInstance().CodeExplain(s,c)}}},function(t){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this)},n.prototype.initLoginMain=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return[4,this.loginMain(e,t)];case 1:return n.sent(),[2]}})})},n.prototype.loginMain=function(t,n){return new Promise(function(t,n){var i=e.PanelManager.getInstance().getPanel(e.EPanelID.LoginMain);i.playAnim(UserInfo.AnimStatus.StopFoxAnim),t()}).then(function(){e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:t,type:n})})},n.prototype.GetShareData=function(t,n){var i=this;void 0===t&&(t=!0);var a=this.judgeStatus(t);if(a){var o={type:n},s=HttpUtil.getURL(GameConst.GAME_SHARE,!0,o);console.log(s),HttpManager.httpGET(s,function(t){if(t&&t.target&&t.target.response){var a=JSON.parse(t.target.response),o=a.code;if(200==o){if(1==n){UserInfo.DiamondNumber=a.data.sumCount;var s=a.data.limit,r=a.data.limitMax;if(s>r){var h=e.LanguageManager.getString("tips_06");i.initLoginMain(h,TipsStyle.wordType)}else if(r>=s){if(s==r){UserInfo.AnimStatus.StopShareAnim=!0;var g=i.getPanel(e.EPanelID.LoginMain);g.shareReward_group.visible=!1}var h="+"+a.data.getCount;i.initLoginMain(h,TipsStyle.getDiamond)}}}else{var l=[e.EPanelID.LoginMain];MsgUtil.GetInstance().CodeExplain(o,l)}}},function(t){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this)}},n.prototype.requestTTRecordShare=function(t){t=2;var n={type:t},i=HttpUtil.getURL(GameConst.GAME_SHARE,!0,n);console.log(i),HttpManager.httpGET(i,function(n){if(n&&n.target&&n.target.response){var i=JSON.parse(n.target.response),a=i.code;if(200==a){if(UserInfo.DiamondNumber=i.data.sumCount,2==t){UserInfo.ttClassicUsableShareTimes--;var o="+"+UserInfo.ttClassicShareGetDiamondNum;0!=i.data.sumCount&&e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:o,type:TipsStyle.getDiamond})}else if(3==t){UserInfo.ttPveUsableShareTimes--;var o="+"+UserInfo.ttPveShareGetDiamondNum;0!=i.data.sumCount&&e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:o,type:TipsStyle.getDiamond})}}else{var s=[e.EPanelID.LoginMain];MsgUtil.GetInstance().CodeExplain(a,s)}}},function(t){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this)},n.prototype.GetAdData=function(t,n,i){void 0===i&&(i=!1);var a=this,o={};o=4==t?{type:t,sid:n}:{type:t};var s=HttpUtil.getURL(GameConst.GAME_AD,!0,o);HttpManager.httpGET(s,function(n){if(n&&n.target&&n.target.response){var o=JSON.parse(n.target.response),s=o.code;if(s=a.judgeCode(s,o),200==s)switch(t){case 1:UserInfo.DiamondNumber=o.data.sumCount;var r=o.data.limit,h=o.data.getCount,g="+"+h;r==o.data.limitMax&&(UserInfo.AnimStatus.StopFoxAnim=!0),GameConst.platform==PlatformConst.DAYU?e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:g,type:TipsStyle.getDiamond,isclick:!0}):a.initLoginMain(g,TipsStyle.getDiamond);break;case 2:var l=e.PanelManager.getInstance().getPanel(e.EPanelID.GameStore);l.updateData(o.data);break;case 3:break;case 4:var c=o.data.limitSum,p=o.data.limitMax;if(c==p){var d=parseInt(o.data.award.sid)+1,u="skinlist"+d+"_png",m=e.LanguageManager.getString("tips_09")+p+e.LanguageManager.getString("unit01")+e.LanguageManager.getString("tips_10")+e.LanguageManager.getString("tips_11");e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:m,type:TipsStyle.imgTextType,img:u}),setTimeout(function(){i?e.GetHttpData.getInstance().pveStart():e.GetHttpData.getInstance().GameStart()},1500)}else i?e.GetHttpData.getInstance().pveStart():e.GetHttpData.getInstance().GameStart();break;default:console.log("其他情况。。")}else if(GameConst.platform==PlatformConst.DAYU)e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:o.msg,type:TipsStyle.wordType});else if(2==t){var f=[e.EPanelID.LoginMain,e.EPanelID.GameStore];MsgUtil.GetInstance().CodeExplain(s,f)}else{var f=[e.EPanelID.LoginMain];MsgUtil.GetInstance().CodeExplain(s,f)}}},function(t){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this)},n.prototype.GetStoreData=function(){var t=HttpUtil.getURL(GameConst.GAME_STORE,!0);HttpManager.httpGET(t,function(t){if(t&&t.target&&t.target.response){var n=JSON.parse(t.target.response),i=n.code;if(200==i)e.ResourceManager.getInstance().loadResource("store").then(function(){e.PanelManager.getInstance().open(e.EPanelID.GameStore,n.data)})["catch"](function(){console.log("加载失败")});else{var a=[e.EPanelID.LoginMain];MsgUtil.GetInstance().CodeExplain(i,a)}}},function(t){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this)},n.prototype.GetGameRankList=function(t,n,i){var a=this;void 0===n&&(n=UserInfo.RankType),void 0===i&&(i=!1);var o={page:t,type:n},s=HttpUtil.getURL(GameConst.GAME_GETRANK,!0,o);HttpManager.httpGET(s,function(o){if(o&&o.target&&o.target.response){var s=JSON.parse(o.target.response),r=s.code;if(r=a.judgeCode(r,s),200==r){var h=s.data.maxPage;if(1==t)if(i)e.ResourceManager.getInstance().loadResource("ranklist").then(function(){e.PanelManager.getInstance().open(e.EPanelID.RankList,s.data)})["catch"](function(){console.log("加载失败")});else{var g=a.getPanel(e.EPanelID.RankList);null!=g&&(GameConst.platform==PlatformConst.DAYU?g.h5getUserinfo(s.data,n):g.getUserinfo(s.data,n))}else{if(t>h)return;var g=a.getPanel(e.EPanelID.RankList);null!=g&&(2==n?g.nextData(s.data,2):g.nextData(s.data))}}else{var l=[e.EPanelID.LoginMain];MsgUtil.GetInstance().CodeExplain(r,l)}}},function(t){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this)},n.prototype.GetUserProp=function(t){var n=this;HttpManager.httpGET(t,function(t){if(t&&t.target&&t.target.response){var i=JSON.parse(t.target.response),a=i.code;if(a=n.judgeCode(a,i),200==a){var o=n.getPanel(e.EPanelID.LoginMain);o.buyskin_success(i.data)}else if(GameConst.platform==PlatformConst.DAYU)e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:i.msg,type:TipsStyle.wordType});else{var s=[e.EPanelID.LoginMain];MsgUtil.GetInstance().CodeExplain(a,s)}e.PanelManager.getInstance().close(e.EPanelID.DefindPanel,!0)}},function(t){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常"),e.PanelManager.getInstance().close(e.EPanelID.DefindPanel,!0)},this)},n.prototype.GameStart=function(){var t=this,n=HttpUtil.getURL(GameConst.GAME_START,!0);HttpManager.httpGET(n,function(n){if(n&&n.target&&n.target.response){var i=JSON.parse(n.target.response),a=i.code;if(a=t.judgeCode(a,i),200==a)i.data.canStart&&(UserInfo.GameId=i.data.log_id,e.ResourceManager.getInstance().loadResource("game").then(function(){e.PanelManager.getInstance().close(e.EPanelID.LoginMain,!0),e.PanelManager.getInstance().open(e.EPanelID.GameMain,i.data.log_id)})["catch"](function(){console.log("加载失败")})),GameConst.platform==PlatformConst.TOUTIAO&&(i.data.video.leftShare>0?(UserInfo.ttClassicUsableShareTimes=i.data.video.leftShare,UserInfo.ttClassicShareGetDiamondNum=i.data.video.reward):(UserInfo.ttClassicUsableShareTimes=0,UserInfo.ttClassicShareGetDiamondNum=0));else if(GameConst.platform==PlatformConst.DAYU)e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:i.msg,type:TipsStyle.wordType});else{var o=[e.EPanelID.LoginMain];MsgUtil.GetInstance().CodeExplain(a,o)}}},function(t){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this)},n.prototype.GameStop=function(t,n){var i=this;console.error("GameStop_______________________");var a={log_id:t},o=SkinInfoManager.getInstance().getSkinBySid(UserInfo.curSid);o&&o.getEffect(EffectInfo.EFFECT_SCORE)>0?a.score=n+Math.floor(n*o.getEffect(EffectInfo.EFFECT_SCORE)):a.score=n;var s=HttpUtil.getURL(GameConst.GAME_STOP,!0,a);HttpManager.httpGET(s,function(t){if(t&&t.target&&t.target.response){var n=JSON.parse(t.target.response),a=n.code;if(a=i.judgeCode(a,n),200==a)e.ResourceManager.getInstance().loadResource("result").then(function(){e.PanelManager.getInstance().open(e.EPanelID.ResultUI,n.data)})["catch"](function(){console.log("加载失败")});else if(GameConst.platform==PlatformConst.DAYU)e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:n.msg,type:TipsStyle.wordType});else{var o=[e.EPanelID.GameMain];MsgUtil.GetInstance().CodeExplain(a,o)}}},function(t){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this)},n.prototype.ResurGence=function(t,n,i){var a=this;void 0===i&&(i=!0);var o=this.judgeStatus(i);if(o){var s={log_id:t,type:n},r=HttpUtil.getURL(GameConst.GAME_RESURGENCE,!0,s);if(3!=n){var h=this.getPanel(e.EPanelID.GameMain);h.againStartGame(),e.PanelManager.getInstance().close(e.EPanelID.ResultUI,!0)}HttpManager.httpGET(r,function(t){if(t&&t.target&&t.target.response){var i=JSON.parse(t.target.response),o=i.code;if(o=a.judgeCode(o,i),200==o){if(3==n){var s=a.getPanel(e.EPanelID.GameMain);s.againStartGame(),e.PanelManager.getInstance().close(e.EPanelID.ResultUI,!0)}}else if(GameConst.platform==PlatformConst.DAYU)e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:i.msg,type:TipsStyle.wordType});else{var r=[e.EPanelID.GameMain,e.EPanelID.ResultUI];MsgUtil.GetInstance().CodeExplain(o,r)}}},function(t){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this)}},n.prototype.GameOver=function(t){var n=this,i={log_id:t},a=HttpUtil.getURL(GameConst.GAME_OVER,!0,i);HttpManager.httpGET(a,function(t){if(t&&t.target&&t.target.response){var i=JSON.parse(t.target.response),a=i.code;if(a=n.judgeCode(a,i),200==a)e.PanelManager.getInstance().close(e.EPanelID.GameMain,!0),e.PanelManager.getInstance().close(e.EPanelID.GameFight,!0),e.PanelManager.getInstance().close(e.EPanelID.ResultUI,!0),e.PanelManager.getInstance().open(e.EPanelID.LoginMain),e.GoogleAdsSDKMgr.getInstance().showVideo(e.EVideoPosition.showXP,function(e){},function(e){});else{var o=[e.EPanelID.GameMain,e.EPanelID.ResultUI];MsgUtil.GetInstance().CodeExplain(a,o)}}},function(t){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this)},n.prototype.pveStart=function(){var t=this,n=HttpUtil.getURL(GameConst.PVE_GAME_START,!0);HttpManager.httpGET(n,function(i){if(i&&i.target&&i.target.response){var a=JSON.parse(i.target.response),o=a.code;if(o=t.judgeCode(o,a),200==o)a.data.canStart&&(UserInfo.GameId=a.data.log_id,UserInfo.enemyNick=a.data.robotNick,e.ResourceManager.getInstance().loadResource("game").then(function(){e.PanelManager.getInstance().close(e.EPanelID.LoginMain,!0),e.PanelManager.getInstance().open(e.EPanelID.GameFight,a.data.log_id)})["catch"](function(){console.error("加载失败__"+n)})),GameConst.platform==PlatformConst.TOUTIAO&&(a.data.video.leftShare>0?(UserInfo.ttPveUsableShareTimes=a.data.video.leftShare,UserInfo.ttPveShareGetDiamondNum=a.data.video.reward):(UserInfo.ttPveUsableShareTimes=0,UserInfo.ttPveShareGetDiamondNum=0));else if(GameConst.platform==PlatformConst.DAYU)e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:a.msg,type:TipsStyle.wordType});else{var s=[e.EPanelID.LoginMain];MsgUtil.GetInstance().CodeExplain(o,s)}}},function(t){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this)},n.prototype.pveResurGence=function(t,n,i){var a=this;void 0===i&&(i=!0);var o=this.judgeStatus(i);if(o){var s={log_id:t,type:n},r=HttpUtil.getURL(GameConst.PVE_GAME_RESURGENCE,!0,s);if(3!=n){var h=this.getPanel(e.EPanelID.GameFight);h.againStartGame(),e.PanelManager.getInstance().close(e.EPanelID.GameFight_Pop_Window,!0)}HttpManager.httpGET(r,function(t){if(t&&t.target&&t.target.response){var i=JSON.parse(t.target.response),o=i.code;if(o=a.judgeCode(o,i),200==o){if(3==n){var s=a.getPanel(e.EPanelID.GameFight);s.againStartGame(),e.PanelManager.getInstance().close(e.EPanelID.GameFight_Pop_Window,!0)}}else if(GameConst.platform==PlatformConst.DAYU)e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:i.msg,type:TipsStyle.wordType});else{var r=[e.EPanelID.GameFight,e.EPanelID.GameFight_Pop_Window];MsgUtil.GetInstance().CodeExplain(o,r);var s=e.PanelManager.getInstance().getPanel(e.EPanelID.GameFight_Pop_Window);s.isNecessaryTiming=!0,s.reviveCountdown()}}},function(t){e.PanelManager.getInstance().close(e.EPanelID.GameFight_Pop_Window,!0),e.PanelManager.getInstance().close(e.EPanelID.GameFight,!0),e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this)}},n.prototype.pveAdsDoubleScore=function(e){var t=this,n={log_id:e},i=HttpUtil.getURL(GameConst.PVE_ADS_DOUBLE_SCORE,!0,n);HttpManager.httpGET(i,function(e){if(e&&e.target&&e.target.response){var n=JSON.parse(e.target.response),i=n.code;i=t.judgeCode(i,n)}},function(e){},this)},n.prototype.pveGameOver=function(t,n,i,a){var o=this,s={log_id:t,robotScore:i,isDouble:a},r=SkinInfoManager.getInstance().getSkinBySid(UserInfo.curSid);r&&r.getEffect(EffectInfo.EFFECT_SCORE)>0?s.score=n+Math.floor(n*r.getEffect(EffectInfo.EFFECT_SCORE)):s.score=n;var h=HttpUtil.getURL(GameConst.PVE_GAME_OVER,!0,s);HttpManager.httpGET(h,function(t){if(t&&t.target&&t.target.response){var n=JSON.parse(t.target.response),i=n.code;if(i=o.judgeCode(i,n),200==i)e.PanelManager.getInstance().close(e.EPanelID.GameFight,!0),e.PanelManager.getInstance().close(e.EPanelID.GameFight_Pop_Window,!0),e.PanelManager.getInstance().open(e.EPanelID.LoginMain),e.GoogleAdsSDKMgr.getInstance().showVideo(e.EVideoPosition.showXP,function(e){},function(e){});else{var a=[e.EPanelID.GameFight,e.EPanelID.GameFight_Pop_Window];MsgUtil.GetInstance().CodeExplain(i,a)}}},function(t){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this)},n.prototype.pveGameStop=function(t){var n=this;console.log(t);var i={log_id:t},a=HttpUtil.getURL(GameConst.PVE_GAME_STOP,!0,i);HttpManager.httpGET(a,function(t){if(t&&t.target&&t.target.response){var i=JSON.parse(t.target.response),a=i.code;if(a=n.judgeCode(a,i),200==a)e.ResourceManager.getInstance().loadResource("pve").then(function(){e.PanelManager.getInstance().open(e.EPanelID.GameFight_Pop_Window,i.data)})["catch"](function(){console.log("加载失败")});else if(GameConst.platform==PlatformConst.DAYU)e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:i.msg,type:TipsStyle.wordType});else{var o=[e.EPanelID.GameFight];MsgUtil.GetInstance().CodeExplain(a,o)}}},function(t){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this)},n.prototype.PaymentData=function(t,n){var i=this,a={data:t,signature:n},o=HttpUtil.getURL(GameConst.STORE_PAYMENT,!0,a);HttpManager.httpGET(o,function(t){if(t&&t.target&&t.target.response){var n=JSON.parse(t.target.response),a=n.code;if(200==a){if(e.GoogleSDKMgr.getInstance().native_google_consume_product(n.data.productId),0==n.data.isRepeat)if(n.data.hasOwnProperty("getCount")){var o="+"+n.data.getCount;e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:o,type:TipsStyle.getDiamond}),UserInfo.DiamondNumber=n.data.sumCount;var s=i.getPanel(e.EPanelID.GameStore);s.diamond_number.text=UserInfo.DiamondNumber.toString()}else{var s=i.getPanel(e.EPanelID.GameStore);s.payAd_btn.visible=!1;var o=e.LanguageManager.getString("tips_18");e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:o,type:TipsStyle.wordType}),e.GoogleAdsSDKMgr.getInstance().hideBanner()}}else{var r=[e.EPanelID.LoginMain,e.EPanelID.GameStore];MsgUtil.GetInstance().CodeExplain(a,r)}}},function(t){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this)},n.prototype.lotteryData=function(){var t=this,n=HttpUtil.getURL(GameConst.Lottery_List,!0);HttpManager.httpGET(n,function(n){if(n&&n.target&&n.target.response){var i=JSON.parse(n.target.response),a=i.code;if(a=t.judgeCode(a,i),200==a)e.ResourceManager.getInstance().loadResource("reward").then(function(){e.PanelManager.getInstance().open(e.EPanelID.GameLotteryDraw,i.data)})["catch"](function(){console.log("加载失败")});else if(GameConst.platform==PlatformConst.DAYU)e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:i.msg,type:TipsStyle.wordType});else{var o=[e.EPanelID.GameLotteryDraw];MsgUtil.GetInstance().CodeExplain(a,o)}}},function(t){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this)},n.prototype.getLotteryReward=function(t){var n=this,i={type:t},a=this.getPanel(e.EPanelID.GameLotteryDraw);a.runAnim();var o=HttpUtil.getURL(GameConst.getLotteryReward,!0,i);HttpManager.httpGET(o,function(t){if(t&&t.target&&t.target.response){var i=JSON.parse(t.target.response),o=i.code;if(o=n.judgeCode(o,i),200==o)a.startReward(i.data);else if(a.isstartReward=!0,GameConst.platform==PlatformConst.DAYU)e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:i.msg,type:TipsStyle.wordType});
else{var s=[e.EPanelID.GameLotteryDraw];MsgUtil.GetInstance().CodeExplain(o,s)}}},function(t){a.isstartReward=!0,e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this)},n.prototype.openBoxReward=function(){var t=this,n=HttpUtil.getURL(GameConst.openBoxReward,!0),i=this.getPanel(e.EPanelID.GameLotteryDraw);HttpManager.httpGET(n,function(n){if(n&&n.target&&n.target.response){var a=JSON.parse(n.target.response),o=a.code;if(o=t.judgeCode(o,a),200==o){var s=a.data.list.getCount;UserInfo.DiamondNumber=a.data.list.diamond;var r="+"+s;setTimeout(function(){i.isstartReward=!0,i.openAnim(r)},1500)}else if(i.isstartReward=!0,GameConst.platform==PlatformConst.DAYU)e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:a.msg,type:TipsStyle.wordType});else{var h=[e.EPanelID.GameLotteryDraw];MsgUtil.GetInstance().CodeExplain(o,h)}}},function(t){i.isstartReward=!0,e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this)},n.prototype.h5GetBury=function(t,n){var i=this,a={eventId:t,label:n},o=HttpUtil.getURL(GameConst.setBuriedPoint,!0,a,!0);HttpManager.httpGET(o,function(e){if(e&&e.target&&e.target.response){var t=JSON.parse(e.target.response),n=t.code;n=i.judgeCode(n,t),200==n&&console.log("上报成功")}},function(t){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,"异常")},this)},n.prototype.ttShowAd=function(t,n){var i=this;e.TouTiaoSDKMgr.getInstance().createVideoAd(function(a){a.playResult?a.finishResult?i.rewardType(t,n):(i.failAd(t),e.TouTiaoSDKMgr.getInstance().showToast("未看完视频广告","none",2e3)):(i.failAd(t),a.errCode&&1004==a.errCode?e.TouTiaoSDKMgr.getInstance().showToast("今日次数已到上限","none",2e3):e.TouTiaoSDKMgr.getInstance().showToast("广告播放错误","none",2e3))},this)},n.prototype.wxInterstitialAd=function(){console.log("广告...."),WXProxy.instance.showLoading("加载广告中",500),WXProxy.instance.createInterstitialAd(function(e){e.playResult?e.finishResult?console.log("出现插屏"):WXProxy.instance.showLoading("未看完视频广告",500):WXProxy.instance.showLoading("广告播放错误",500)},this)},n.prototype.wxShowAd=function(e,t){var n=this;WXProxy.instance.showLoading("加载广告中",500),WXProxy.instance.createVideoAd("GETDAMOID",function(i){i.playResult?i.finishResult?n.rewardType(e,t):(n.failAd(e),WXProxy.instance.showLoading("未看完视频广告",500)):(n.failAd(e),WXProxy.instance.showLoading("广告播放错误",500))},this)},n.prototype.failAd=function(t){if(3==t){var n=this.getPanel(e.EPanelID.GameLotteryDraw);n.isstartReward=!0}else if(8==t){var n=this.getPanel(e.EPanelID.GameFight_Pop_Window);n.finishScore=0}},n.prototype.rewardType=function(t,n){if(1==t)this.GetAdData(1);else if(2==t)this.GetAdData(4,UserInfo.curSid);else if(3==t)this.getLotteryReward(2);else if(4==t)this.ResurGence(UserInfo.GameId,1);else if(5==t){var i={is_double:1},a=HttpUtil.getURL(GameConst.GAME_SEVEN_DAYS_SIGNIN,!0,i);this.signInResult(a)}else if(6==t)this.h5GetBury("Task_Ad_Play_Any_Model",0),Math.random()>.5?this.GameStart():this.pveStart();else if(7==t){var o=this.getPanel(e.EPanelID.GameFight_Pop_Window);o.startScoreAnim(),o.btn_dobble_score.visible=!1}else if(8==t)this.GetAdData(4,UserInfo.curSid,!0);else if(9==t){var a=HttpUtil.getURL(GameConst.GAME_SIGNIN,!0);e.GetHttpData.getInstance().loginRewardResult(a,"double",n)}else if(10==t){var o=this.getPanel(e.EPanelID.GameMain);o.againStartGame(),e.PanelManager.getInstance().close(e.EPanelID.ResultUI,!0)}else if(11==t){e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:UserInfo.pveGetDiamod.reward.toString(),type:TipsStyle.getDiamond}),this.GetAdData(6);var s=this.getPanel(e.EPanelID.GameFight_Pop_Window);setTimeout(function(){s.resultPanel()},500)}else if(12==t){var o=this.getPanel(e.EPanelID.GameFight_Pop_Window);n?o.showOrHideWinWindow(!0):o.showOrHideLoseWindow(!0)}},n.prototype.getPanel=function(t){var n=e.PanelManager.getInstance().getPanel(t);return n},n.prototype.judgeStatus=function(t){return t||e.TipsManager.getInstance().show(e.ETipsID.TipsBox,{title:e.LanguageManager.getString("tips_14"),type:TipsStyle.wordType}),t},n.prototype.judgeCode=function(e,t){return GameConst.platform==PlatformConst.DAYU&&(1==e?e=200:2==e&&(UserInfo.h5Msg=t.msg)),e},n}(e.Singleton);e.GetHttpData=t,__reflect(t.prototype,"game.GetHttpData")}(game||(game={}));var ListData=function(e){function t(){var t=e.call(this)||this;return t.firstshow=!0,t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.skinIcon.source=e.img,this.unselectSkin();e.index},t.prototype.selectSkin=function(){this.skinIcon.scaleX=1,this.skinIcon.scaleY=1,this.skinIcon.x=0,this.skinIcon.y=0},t.prototype.unselectSkin=function(){this.skinIcon.scaleX=.8,this.skinIcon.scaleY=.8,this.skinIcon.x=.2*this.skinIcon.width/2,this.skinIcon.y=.2*this.skinIcon.height/2},t}(eui.ItemRenderer);__reflect(ListData.prototype,"ListData");var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.NATIVE_EGRET_SOUND="native_egret_sound",t.CLICK="click",t.EAT="eat",t.EFFECT="effect",t.HIT="hit",t.EXPLODE="explode",t.FROZEN="frozen",t.init(),t}return __extends(t,e),t.prototype.init=function(){},t.prototype.click=function(){core.PlatUtils.isAndroid&&egret.ExternalInterface.call(this.NATIVE_EGRET_SOUND,this.CLICK)},t.prototype.eat=function(){core.PlatUtils.isAndroid&&egret.ExternalInterface.call(this.NATIVE_EGRET_SOUND,this.EAT)},t.prototype.effect=function(){core.PlatUtils.isAndroid&&egret.ExternalInterface.call(this.NATIVE_EGRET_SOUND,this.EFFECT)},t.prototype.hit=function(){core.PlatUtils.isAndroid&&egret.ExternalInterface.call(this.NATIVE_EGRET_SOUND,this.HIT)},t.prototype.explode=function(){core.PlatUtils.isAndroid&&egret.ExternalInterface.call(this.NATIVE_EGRET_SOUND,this.EXPLODE)},t.prototype.frozen=function(){core.PlatUtils.isAndroid&&egret.ExternalInterface.call(this.NATIVE_EGRET_SOUND,this.FROZEN)},t}(e.Singleton);e.NativeSoundManager=t,__reflect(t.prototype,"game.NativeSoundManager")}(game||(game={}));var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),GameConst.isRelease&&!GameConst.showLog&&(console=new LogUtil);var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.error(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n;return __generator(this,function(i){switch(i.label){case 0:return game.GameFramework.getInstance().init(),GameConst.platform!=PlatformConst.OVERSEAS&&game.LanguageManager.changeLanguage(ELanguageType.EN_US),GameConst.platform==PlatformConst.H5&&(e=document.createElement("script"),e.type="text/javascript",e.src="http://vijs.rayjump.com/bin/vijs.js",e.setAttribute("sign","6afa95c8fe812d539cf6b8e3234653ad"),e.setAttribute("appid","120989"),e.onload=function(){window.Vijs.init(this)},document.getElementsByTagName("head")[0].appendChild(e),console.log("初始化广告"),t=document.createElement("div"),t.setAttribute("id","banneradbox"),t.setAttribute("style","display: none;position: fixed;bottom: 0;width: 100%;"),document.body.appendChild(t),document.getElementById("banneradbox").innerHTML='<mvins view="4" unitid="167429" closeable="true" iconAnimate="true"></mvins>',n=document.createElement("script"),n.type="text/javascript",n.src="//jssdk.rayjump.com/bin/mvjssdk.js",n.setAttribute("id","mobvistajssdk"),n.setAttribute("sign","6afa95c8fe812d539cf6b8e3234653ad"),n.setAttribute("appid","120989"),n.onload=function(){var e=window.navigator.userAgent.toLowerCase();e.indexOf("googlebot")>=0||e.indexOf("search console")>=0||(window.Mvjssdk.Logger.init(),window.Mvjssdk.Configer.init()&&window.Mvjssdk.Offer.init())},document.getElementsByTagName("head")[0].appendChild(n)),[4,this.loadResource()];case 1:return i.sent(),game.PanelManager.getInstance().open(game.EPanelID.LoadingMainUI),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,i;return __generator(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),egret.ImageLoader.crossOrigin="anonymous",[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return a.sent(),[4,RES.loadGroup("preload")];case 2:return a.sent(),e=game.StageUtils.getInstance().stageWidth,t=game.StageUtils.getInstance().stageHeight,n=new LoadingUI(e,t),this.stage.addChild(n),[4,this.gameInit()];case 3:return a.sent(),[4,RES.loadGroup("preloadmain")];case 4:return a.sent(),[4,this.loadTheme()];case 5:return a.sent(),this.stage.removeChild(n),[3,7];case 6:return i=a.sent(),console.error(i),[3,7];case 7:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,n){var i=new eui.Theme("resource/default.thm.json",e.stage);i.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.gameInit=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return console.log(game.LanguageManager.getString("plogin_tourist")),game.LanguageManager.getInstance().init(),game.AndroidUtil.getInstance().init(),GameConst.platform==PlatformConst.ANDROID_MOBGI?[2]:(game.GoogleSDKMgr.getInstance().init(),game.FacebookSDKMgr.getInstance().init(),game.GoogleAdsSDKMgr.getInstance().init(),game.ShuShuSDKMgr.getInstance().init(),[2])})})},t}(eui.UILayer);__reflect(Main.prototype,"Main");var MoreGameItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GameItemSkin",t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.iconImg.addEventListener(egret.TouchEvent.TOUCH_END,this.onJump,this)},t.prototype.dataChanged=function(){this.iconImg.source=WXConst.OTHERS_APP_INFO[this.data].icon,this.nameLab.text=WXConst.OTHERS_APP_INFO[this.data].name},t.prototype.onJump=function(){var e="";WXConst.OTHERS_APP_INFO[this.data].path&&(e=WXConst.OTHERS_APP_INFO[this.data].path),WXProxy.instance.navigateToMiniProgram(WXConst.OTHERS_APP_INFO[this.data].id,e,function(e){},this)},t}(eui.ItemRenderer);__reflect(MoreGameItem.prototype,"MoreGameItem");var EffectHelper=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.createHitEffect=function(e,t,n,i){var a=MoviceClipManager.getInstance().createMoviceClipByRes("HitNewEffect_json","HitNewEffect_png","HitNewEffect");return a.$setTouchEnabled(!1),a.scaleX=e/313,a.scaleY=t/313,a.x=n.x,a.y=n.y,a.anchorOffsetX=e/2,a.anchorOffsetY=t/2,a.rotation=i,a},t}(egret.EventDispatcher);__reflect(EffectHelper.prototype,"EffectHelper");var SignManager=function(){function e(){}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.initSignInfo=function(e){if(e&&e.data){if(e.data.sevenSign){var t=[],n=e.data.sevenSign.rewardList;if(n&&n.length>0)for(var i=0;i<n.length;i++){var a=Sign7RewardInfo.convert(n[i]);t.push(a)}this.rewardInfos=t,this.lastSignTime=e.data.sevenSign.lastSignIn,this.signInCount=e.data.sevenSign.signInCount}this.isLoginReward=e.data.isSignIn,this.loginReward=e.data.getCount}},e.prototype.setIsLoginReward=function(e){this.isLoginReward=e},e.prototype.getIsLoginReward=function(){return 1==this.isLoginReward},e.prototype.getRewardEveryDay=function(){return this.loginReward},e.prototype.setSignInCount=function(e){this.signInCount=e},e.prototype.getSignInCount=function(){return this.signInCount},e.prototype.getLastSignTime=function(){return this.lastSignTime},e.prototype.isIn7Days=function(){return this.signInCount<7?!0:1==game.DateUtil.isSameDayNow(1e3*this.lastSignTime)?!0:!1},e.prototype.canSignInToday=function(){return this.signInCount<7&&!game.DateUtil.isSameDayNow(1e3*this.lastSignTime)?!0:!1},e.prototype.isSignInDay=function(e){return this.signInCount+1==e&&!game.DateUtil.isSameDayNow(1e3*this.lastSignTime)||this.signInCount==e&&game.DateUtil.isSameDayNow(1e3*this.lastSignTime)?!0:!1},e.prototype.updateDays7SignIn=function(){this.lastSignTime=(new Date).getTime()/1e3,this.signInCount+=1},e.prototype.getRewardInfos=function(){return null==this.rewardInfos&&(this.rewardInfos=[]),this.rewardInfos},e.prototype.setRewardInfos=function(e){null!=e&&(this.rewardInfos=e)},e.prototype.getRewardById=function(e){for(var t=0;t<this.getRewardInfos().length;t++)if(this.getRewardInfos()[t].id==e)return this.getRewardInfos()[t];return null},e.prototype.getNextReward=function(){return this.getRewardById(this.signInCount+1)},e.prototype.getNextSignDaysCount=function(){var e=this.signInCount+1;return e},e.prototype.getRewardImg=function(e){for(var t="",n=0,i=0;i<this.rewardInfos.length;i++){var a=this.rewardInfos[i];if(a.type==Sign7RewardInfo.TYPE_DIAMOND&&n++,a.id==e){a.type==Sign7RewardInfo.TYPE_DIAMOND?t=GameConst.platform==PlatformConst.DAYU?"egg_"+n+"_png":"diamond_"+n+"_png":a.type==Sign7RewardInfo.TYPE_SKIN&&(console.log("SignManager_info.sid__"+a.sid+"__"+e),t=SkinInfo.getSkinImgName(a.sid));break}}return t},e}();__reflect(SignManager.prototype,"SignManager");var GameLogic=function(e){function t(){var t=e.call(this)||this;return t.currentBeanCount=5,t.currentScore=0,t.currPlayerBeanCount=5,t.currPlayerScore=0,t.currEnemyBeanCount=5,t.currEnemyScore=0,t.xtype=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,1,1,1,1,1,1,1,1,-1,-1,-1,-1,-1,1,1,3,2,2,2,2,2,2,3,3,3,4,5,6],t}return __extends(t,e),t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.getRandomLine=function(){var e=this.randomValue(),t=this.randomValue(),n=this.randomValue(),i=this.randomValue(),a=this.randomValue();return new LineType(e,t,n,i,a)},t.prototype.randomValue=function(){var e=100,t=this.xtype[SnakeConst.getRandomNum(e)];return 4!=t&&5!=t&&6!=t||!SnakeConst.getRandomBool()||(t=-1),t},t}(egret.EventDispatcher);__reflect(GameLogic.prototype,"GameLogic");var SkinInfoManager=function(){function e(){}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.sortSkinBySid=function(e){e&&e.length>1&&e.sort(function(e,t){return-1!=SkinInfo.PRIORITY_SKINS_ARRAY.indexOf(e.sid)&&-1==SkinInfo.PRIORITY_SKINS_ARRAY.indexOf(t.sid)?-1:-1==SkinInfo.PRIORITY_SKINS_ARRAY.indexOf(e.sid)&&-1!=SkinInfo.PRIORITY_SKINS_ARRAY.indexOf(t.sid)?1:e.sid-t.sid})},e.prototype.getSkinIndex=function(e){for(var t=0;t<this.skinInfos.length;t++)if(this.skinInfos[t].sid==e)return t;return 0},e.prototype.getSkinBySid=function(e){for(var t=0;t<this.skinInfos.length;t++)if(this.skinInfos[t].sid==e)return this.skinInfos[t];return null},e.prototype.haveSkin=function(e){var t=this.getSkinBySid(e);return null!=t?1==t.isGet&&t.isValid():!1},e.prototype.getSkinInfos=function(){return null==this.skinInfos&&(this.skinInfos=[]),this.skinInfos},e.prototype.setSkinInfos=function(e){null!=e&&(this.skinInfos=e,this.sortSkinBySid(this.skinInfos))},e.prototype.getLotterySkinInfos=function(){return null==this.lotteryInfos&&(this.lotteryInfos=[]),this.lotteryInfos},e.prototype.setLotterySkinInfos=function(e){null!=e&&(this.lotteryInfos=e)},e.prototype.getSignSkinInfos=function(){return null==this.signSkinInfos&&(this.signSkinInfos=[]),this.signSkinInfos},e.prototype.setSignSkinInfos=function(e){null!=e&&(this.signSkinInfos=e)},e.prototype.getInviteSkinInfos=function(){return null==this.signSkinInfos&&(this.inviteSkinInfos=[]),this.inviteSkinInfos},e.prototype.setInviteSkinInfos=function(e){null!=e&&(this.inviteSkinInfos=e)},e}();__reflect(SkinInfoManager.prototype,"SkinInfoManager");var TaskManager=function(){function e(){this.infos=[],this.inviteInfos=[]}return e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.convert=function(e,t){void 0===t&&(t=1);var n=[];if(e&&e.length>0)for(var i=0;i<e.length;i++){var a=TaskInfo.convert(e[i]);n.push(a)}switch(t){case TaskInfo.TASK_TYPE_DAILY:this.infos=n;break;case TaskInfo.TASK_TYPE_INVITE:this.inviteInfos=n}},e.prototype.getTaskInfosByType=function(e){switch(void 0===e&&(e=1),e){case TaskInfo.TASK_TYPE_DAILY:return this.infos;case TaskInfo.TASK_TYPE_INVITE:return this.inviteInfos}return null},e.prototype.hasTask=function(e){void 0===e&&(e=1);var t=this.getTaskInfosByType(e);return t&&t.length>0?!0:!1},e.prototype.getTaskInfos=function(e){switch(void 0===e&&(e=1),e){case TaskInfo.TASK_TYPE_DAILY:return this.sortByState(this.infos),this.infos;case TaskInfo.TASK_TYPE_INVITE:return this.inviteInfos}return null},e.prototype.hasTaskFinish=function(e){void 0===e&&(e=1);var t=this.getTaskInfosByType(e);if(t&&t.length>0)for(var n=0;n<t.length;n++)if(1==t[n].state)return!0;return!1},e.prototype.sortByState=function(e){e&&e.length>1&&e.sort(function(e,t){return e.state==t.state?e.taskId-t.taskId:1==e.state?-1:1==t.state?1:0==e.state&&2==t.state?-1:2==e.state&&0==t.state?1:void 0})},e.prototype.setStateGained=function(e,t){void 0===t&&(t=1);var n=this.getTaskInfosByType(t);if(n&&n.length>0)for(var i=0;i<n.length;i++)if(n[i].taskId==e){n[i].state=TaskInfo.STATE_GAINED_REWARD;break}},e}();__reflect(TaskManager.prototype,"TaskManager");var EffectInfo=function(e){function t(t,n){return e.call(this,t,n)||this}return __extends(t,e),t.EFFECT_TAIL="tail",t.EFFECT_SCORE="score",t}(KeyValue);__reflect(EffectInfo.prototype,"EffectInfo");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function i(i){t.call(n,i,e)}if(RES.hasRes(e)){var a=RES.getRes(e);a?i(a):RES.getResAsync(e,i,this)}else RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Sign7RewardInfo=function(){function e(){}return e.convert=function(t){var n=new e;return n.id=t.id,n.type=t.type,n.sid=t.sid,n.num=t.num,n.expire=t.expire,n},e.prototype.getLoginViewImg=function(){var t="";switch(this.type){case e.TYPE_DIAMOND:t=GameConst.platform==PlatformConst.DAYU?"sign_egg_png":"diamond_1_png";break;case e.TYPE_SKIN:console.log("Sign7RewardInfo.sid__"+this.sid),t=SkinInfo.getHeadImgName(this.sid)}return t},e.prototype.isRewardDiamond=function(){return this.type==e.TYPE_DIAMOND},e.prototype.isRewardSkin=function(){return this.type==e.TYPE_SKIN},e.TYPE_DIAMOND=1,e.TYPE_SKIN=2,e}();__reflect(Sign7RewardInfo.prototype,"Sign7RewardInfo");var SkinInfo=function(){function e(){this.effects=[]}return e.convert=function(t){var n=new e;if(n.sid=parseInt(t.sid),n.price=t.attrPrice,t.effect)for(var i in t.effect){var a=new EffectInfo(i,t.effect[i]);n.effects.push(a)}return n.adTimes=t.adTimes,n.gainByAd=t.gainByAd,n.isGet=t.isGet,n.expire=t.expire,n},e.getSkinImgName=function(e){var t=e+1;return"skinlist"+t+"_png"},e.getHeadImgName=function(e){var t=e+1;return"skin_head"+t+"_png"},e.getBodyImgName=function(e){var t=e+1;return"skin_body"+t+"_png"},e.getSingImgName=function(e){var t=e+1;return"sign_"+t+"_png"},e.getEffectImgName=function(e){var t=e+1;return"effect_skin"+t+"_png"},e.prototype.hasEffect=function(e){for(var t=0;t<this.effects.length;t++)if(this.effects[t].name==e)return!0;return!1},e.prototype.getEffect=function(e){for(var t=0;t<this.effects.length;t++)if(this.effects[t].name==e)return this.effects[t].value;return 0},e.prototype.isForever=function(){return this.expire<=0},e.prototype.getValidPeriod=function(){var e=this.expire-Math.floor((new Date).getTime()/1e3);return 0>=e&&(e=0),e},e.prototype.isValid=function(){return-1!=this.expire?this.getValidPeriod()>0:!0},e.prototype.getLeftAdTimes=function(){return this.gainByAd>0?this.gainByAd-this.adTimes:0},e.PRIORITY_SKINS_ARRAY=[15,16,17,18,19],e}();__reflect(SkinInfo.prototype,"SkinInfo");var TaskInfo=function(){function e(){}return e.convert=function(t){var n=new e;return n.taskId=t.task_id,t.reward&&(n.reward=new TaskRewardInfo(t.reward.type,t.reward.num,t.reward.sid,t.reward.expire)),n.explain=t.explain,n.current=t.current_attainment,n.total=t.goal_attainment,n.state=t.state,n.skip=t.skip,n},e.TASK_TYPE_DAILY=1,e.TASK_TYPE_INVITE=2,e.REWARD_TYPE_DIAMOND=1,e.REWARD_TYPE_SKIN=2,e.STATE_UNFINISH=0,e.STATE_FINISH=1,e.STATE_GAINED_REWARD=2,e}();__reflect(TaskInfo.prototype,"TaskInfo");var GameTaskItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/GameTaskItem.exml",t.languageHandle(),game.EventManager.getInstance().addListener(EventNotify.Language_change,t.languageHandle,t),t}return __extends(t,e),t.prototype.dataChanged=function(){this.explainLabel.text=this.data.explain,this.data.reward?(this.rewardGroup.visible=!0,this.rewardCount.text=""+this.data.reward.num):this.rewardGroup.visible=!1;var e=this.data.current/this.data.total;this.progressF.scaleX=e,this.progressLabel.text=this.data.current+"/"+this.data.total,this.btn.addEventListener(egret.TouchEvent.TOUCH_END,this.btnClick,this),this.data.state==TaskInfo.STATE_UNFINISH?(this.btn.setImg("renwu03"),this.btn.touchEnabled=!0,1==this.data.skip?(this.btn.setProp("labelDisplay","horizontalCenter",15),this.btn.setProp("adIcon","visible",!0),this.btn.setProp("adIcon","source","task_ad_png")):(this.btn.setProp("labelDisplay","horizontalCenter",0),this.btn.setProp("adIcon","visible",!1))):this.data.state==TaskInfo.STATE_FINISH?(this.btn.setImg("renwu04"),this.btn.touchEnabled=!0,this.btn.setProp("labelDisplay","horizontalCenter",0),this.btn.setProp("adIcon","visible",!1)):(this.btn.setImg("renwu03"),this.btn.touchEnabled=!1,this.btn.setProp("labelDisplay","horizontalCenter",0),this.btn.setProp("adIcon","visible",!1))},t.prototype.btnClick=function(){if(this.data.state==TaskInfo.STATE_UNFINISH){if(1==this.data.skip)GameConst.platform==PlatformConst.ANDROID_MOBGI?this.invokeMobgiAdWhenTask():GameConst.platform==PlatformConst.OVERSEAS?game.GoogleAdsSDKMgr.getInstance().showVideo(game.EVideoPosition.FreeSkin,function(e){game.GetHttpData.getInstance().h5GetBury(UserInfo.buryName.Task_Ad_click,0),game.PanelManager.getInstance().close(game.EPanelID.GameTask,!0),Math.random()>.5?game.GetHttpData.getInstance().GameStart():game.GetHttpData.getInstance().pveStart()},function(e){game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})}):GameConst.platform==PlatformConst.WEIXIN?(game.PanelManager.getInstance().close(game.EPanelID.GameTask,!0),game.GetHttpData.getInstance().wxShowAd(6)):GameConst.platform==PlatformConst.TOUTIAO?(game.PanelManager.getInstance().close(game.EPanelID.GameTask,!0),game.GetHttpData.getInstance().ttShowAd(6)):(GameConst.platform==PlatformConst.DAYU||GameConst.platform==PlatformConst.H5||GameConst.platform==PlatformConst.H5noad)&&(game.GetHttpData.getInstance().h5GetBury("Bird_Ad",8),game.H5externalAndroid.getInstance().showVideo(),window.showVideoAd=function(e){e?(game.GetHttpData.getInstance().h5GetBury("Bird_Ad",9),Math.random()>.5?game.GetHttpData.getInstance().GameStart():game.GetHttpData.getInstance().pveStart()):game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})});else if(2==this.data.skip){game.PanelManager.getInstance().close(game.EPanelID.GameTask,!0);var e=game.PanelManager.getInstance().getPanel(game.EPanelID.LoginMain);e.OpenReward()}}else if(this.data.state==TaskInfo.STATE_FINISH){var t={task_id:this.data.taskId},n=HttpUtil.getURL(GameConst.TASK_FINISH_DAILY_TASK,!0,t);game.GetHttpData.getInstance().getTaskReward(n,this.data.taskId)}},t.prototype.invokeMobgiAdWhenTask=function(){function e(i){var a=i.data;game.EventManager.getInstance().removeListener(n,e,t),a.reward?Math.random()>.5?game.GetHttpData.getInstance().GameStart():game.GetHttpData.getInstance().pveStart():game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:game.LanguageManager.getString("tips_17"),type:TipsStyle.wordType})}var t=this,n=HclwAndroidNotify.VIDEO_TASK;HclwAndroidUtil.getInstance().showVideoAd(n,e)},t.prototype.languageHandle=function(){this.rewardIcon.source="png_result_diamoneImg_new"},t}(eui.ItemRenderer);__reflect(GameTaskItem.prototype,"GameTaskItem");var lotteryData=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/lotteryData.exml",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;if(this.diamond.visible=!1,this.skingroup.visible=!1,1==e.type)PlatformManager.changeUI(this.dayan,this.diamond),GameConst.platform==PlatformConst.DAYU?this.dayu_label.text="X"+e.number:this.diamond_label.text="X"+e.number;else if(2==e.type){this.skingroup.visible=!0;var t=e.number+1;this.skin_img.source="skinlist"+t+"_png",e.expire&&e.expire>0?(this.expire_img.visible=!0,this.expireLabel.visible=!0,this.expireLabel.text=game.DateUtil.expireHour(e.expire,"H")):(this.expire_img.visible=!1,this.expireLabel.visible=!1)}},t}(eui.ItemRenderer);__reflect(lotteryData.prototype,"lotteryData");var TaskRewardInfo=function(){function e(e,t,n,i){this.type=e,this.num=t,this.sid=n,this.expire=i}return e}();__reflect(TaskRewardInfo.prototype,"TaskRewardInfo");var ranklistData=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/ranklistDataSkin.exml",t.headIcon.mask=t.maskImg,t.judgePlatform(),t}return __extends(t,e),t.prototype.judgePlatform=function(){PlatformManager.changeUI(this.H5_group,this.Oversean_group)},t.prototype.dataChanged=function(){var e=this.data;if(this.rankbg.source=e.imgbg,GameConst.platform==PlatformConst.DAYU){var t={id:this.h5_rankid,score:this.h5_rankscore,avatar:this.headIcon,rank:[this.h5_ranknumber,this.h5_ranknumber1],isreward:this.h5_rank_reward,number:this.h5_number};this.getlistData(e,t)}else{var t={id:this.rankid,score:this.rankscore,avatar:this.headIcon,rank:[this.ranknumber1,this.ranknumber2],isreward:this.rank_reward,number:this.number};this.getlistData(e,t)}},t.prototype.getlistData=function(e,t){""!=e.avatar&&(t.avatar.source=e.avatar),e.rank<4&&e.rank>0?(1==e.rank?t.rank[0].source="RankList_json.rank_one":2==e.rank?t.rank[0].source="RankList_json.rank_two":3==e.rank&&(t.rank[0].source="RankList_json.rank_three"),t.rank[0].visible=!0,t.rank[1].visible=!1):(t.rank[0].visible=!1,t.rank[1].visible=!0,t.rank[1].text=e.rank),t.id.text=StringTool.formatNickName(e.rankid.toString(),9),t.score.text=e.rankscore,t.isreward.visible=e.rankreward,e.rankreward&&(t.number.text=e.rewardNumber),GameConst.platform==PlatformConst.DAYU&&(e.isclassic||(this.h5_rank_reward.visible=!1))},t.prototype.geth5ListData=function(e){},t}(eui.ItemRenderer);__reflect(ranklistData.prototype,"ranklistData");var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.NATIVE_EGRET_MESSAGE="native_egret_message",e.NATIVE_QUIT_GAME="native_quit_game",e.EGRET_BTN_BACK_CLICK="egret_back_btn_click",e.backBtnClickTimes=0,e.init(),e}return __extends(n,t),n.prototype.init=function(){var t=this;GameConst.platform==PlatformConst.ANDROID_MOBGI?e.EventManager.getInstance().addListener(HclwAndroidNotify.BUTTON_BACK,this.setAndroidBackBtnClickCallback,this):GameConst.isAndroid?window.onBackPress=function(){t.setAndroidBackBtnClickCallback()}:egret.ExternalInterface.addCallback(this.EGRET_BTN_BACK_CLICK,function(e){t.setAndroidBackBtnClickCallback()})},n.prototype.setAndroidBackBtnClickCallback=function(){var t=this,n=this;UserInfo.isPveGame||(this.backBtnClickTimes++,console.log("--------------收到原生消息----------: "+this.backBtnClickTimes),egret.setTimeout(function(){if(t.backBtnClickTimes>=2)GameConst.platform==PlatformConst.ANDROID_MOBGI?HclwAndroidUtil.getInstance().exitApp():n.quitGame();else{if(t.backBtnClickTimes=0,UserInfo.isGame){var i=e.PanelManager.getInstance().getPanel(e.EPanelID.GameMain);i.pause()}e.PanelManager.getInstance().open(e.EPanelID.ExitPanel)}},n,300))},n.prototype.quitGame=function(){GameConst.isAndroid?window.hclw.invokeNative("exitApp"):egret.ExternalInterface.call(this.NATIVE_EGRET_MESSAGE,this.NATIVE_QUIT_GAME)},n}(e.Singleton);e.AndroidUtil=t,__reflect(t.prototype,"game.AndroidUtil")}(game||(game={}));var storeListData=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/storeListDataSkin.exml",t.buy_btn.addEventListener(egret.TouchEvent.TOUCH_END,t.buy,t),t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data,t=["StoreImg_json.store_d1","StoreImg_json.store_d2","StoreImg_json.store_d3","StoreImg_json.store_d4","StoreImg_json.store_d5"];this.diamond_icon.source=t[e.img],this.diamond_number.text=e.paynumber,this.buy_btn.setTitle(e.money),this.productID=e.productId},t.prototype.buy=function(){if(UserInfo.Logintype==LoginTypestaus.touristLogin){var e=game.LanguageManager.getString("tips_13");game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:e,type:TipsStyle.wordType}),setTimeout(function(){for(var e=[game.EPanelID.LoginMain,game.EPanelID.GameStore],t=0;t<e.length;t++)game.PanelManager.getInstance().close(e[t],!0);game.PanelManager.getInstance().open(game.EPanelID.LoginType)},1500)}else game.GoogleSDKMgr.getInstance().googleStartBilling(this.productID)},t}(eui.ItemRenderer);__reflect(storeListData.prototype,"storeListData");var XButton=function(e){function t(){var t=e.call(this)||this;return t.type=XButtonType.one,t.init(),t}return __extends(t,e),t.prototype.partRemoved=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.touchEnd,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},t.prototype.init=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.touchEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchEnd,this)},t.prototype.setMusicType=function(e){this.type=e},t.prototype.onTouch=function(){switch(this.type){case XButtonType.one:GameConst.platform==PlatformConst.DAYU?game.SoundManager.getInstance().playEffect(game.SoundManager.click,0,1):game.NativeSoundManager.getInstance().click();break;case XButtonType.two:GameConst.platform==PlatformConst.DAYU?game.SoundManager.getInstance().playEffect(game.SoundManager.click,0,1):game.NativeSoundManager.getInstance().click();break;case XButtonType.there:}},t.prototype.touchBegin=function(){this.initAnchorOffset(),this.playOutAnim()},t.prototype.touchEnd=function(){this.playBackAnim()},t.prototype.touchMove=function(){this.playBackAnim()},t.prototype.playOutAnim=function(){egret.Tween.get(this).set({scaleX:1,scaleY:1}).to({scaleX:.95,scaleY:.95},30)},t.prototype.playBackAnim=function(){var e=function(){egret.Tween.removeTweens(this)};egret.Tween.get(this).to({scaleX:1,scaleY:1},30).call(e)},t.prototype.initAnchorOffset=function(){this.anchorOffsetX!=this.width/2&&this.anchorOffsetY!=this.height/2&&(this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2,this.x=this.x+this.width/2,this.y=this.y+this.height/2)},t.prototype.resetBtn=function(){this.scaleX=1,this.scaleY=1,egret.Tween.removeTweens(this)},t.prototype.setImg=function(e){var t=this.getChildAt(0);t.source=e},t.prototype.setTitle=function(e,t,n,i){void 0===i&&(i=!1);var a=this.getChildAt(1);a.text=e,a.bold=i,t&&(a.size=t),n&&(a.textColor=n),this.getChildAt(1).visible=!0,this.$children.length>2&&(this.getChildAt(2).visible=!1)},t.prototype.setTitle1=function(e,t,n,i){if(void 0===i&&(i=!1),!(this.$children.length<2)){var a=this.getChildAt(2);
a.text=e,this.getChildAt(1).visible=!1,this.getChildAt(2).visible=!0}},t.prototype.setProp=function(e,t,n){var i=this.getChildByName(e);i&&void 0!=i[t]&&(i[t]=n)},t}(eui.Button);__reflect(XButton.prototype,"XButton"),window.XButton=XButton;var XButtonType;!function(e){e[e.one=0]="one",e[e.two=1]="two",e[e.there=2]="there"}(XButtonType||(XButtonType={}));var ObstacleView=function(e){function t(t,n,i,a,o,s){void 0===o&&(o="game_square_"),void 0===s&&(s=!0);var r=e.call(this)||this;r.rowCount=-1,r.width=t,r.height=n,s&&SnakeConst.getRandomNum(100)<=10&&(r.frozen=!0);var h;return h=r.frozen?RES.getRes(o+"frozen_png"):RES.getRes(o+i+"_png"),r.obstacleImg=new eui.Image(h),r.obstacleImg.width=r.width,r.obstacleImg.height=r.height,r.obstacleImg.anchorOffsetX=r.obstacleImg.width/2,r.obstacleImg.anchorOffsetY=r.obstacleImg.height/2,r.addChild(r.obstacleImg),r.obstacleCountText=new eui.BitmapLabel,r.obstacleCountText.font=RES.getRes("boxLabel_fnt"),r.obstacleCount=a,r.obstacleCountText.text=""+r.obstacleCount,r.obstacleCountText.width=r.width,r.obstacleCountText.height=r.height,r.obstacleCountText.anchorOffsetX=r.obstacleCountText.width/2,1==UserInfo.gameBoxType?r.obstacleCountText.anchorOffsetY=r.obstacleCountText.height/3:r.obstacleCountText.anchorOffsetY=r.obstacleCountText.height/2,r.obstacleCountText.textAlign="center",r.obstacleCountText.verticalAlign="middle",r.addChild(r.obstacleCountText),r}return __extends(t,e),t.prototype.reduceNumber=function(){this.obstacleCount--,this.obstacleCountText.text=""+this.obstacleCount;this.obstacleImg.y;return egret.Tween.get(this.obstacleImg).to({y:-10},50).to({y:0},100),0==this.obstacleCount?!0:!1},t.prototype.isFrozen=function(){return this.frozen},t.prototype.boomObstacle=function(){this.boomClip=MoviceClipManager.getInstance().createMoviceClipByRes("baozha_mc_json","baozha_tex_png","baozha");var e=.9*this.width,t=106*e/86;this.boomClip.scaleX=e/86,this.boomClip.scaleY=t/106,this.boomClip.anchorOffsetX=this.boomClip.width/2,this.boomClip.anchorOffsetY=this.boomClip.height/2,this.boomClip.x=this.width/2,this.boomClip.y=-20,this.boomClip.$setTouchEnabled(!1),this.addChild(this.boomClip),this.boomClip.play(1),this.boomClip.addEventListener(egret.Event.COMPLETE,this.boomClipComplete,this)},t.prototype.boomClipComplete=function(){this.removeChild(this.boomClip),this.boomClip=null},t}(egret.Sprite);__reflect(ObstacleView.prototype,"ObstacleView");var PointView=function(e){function t(t,n,i,a,o){var s=e.call(this)||this;s.rowCount=-1,s.width=t,s.height=n,s.colorType=i;var r=RES.getRes("skin_body_point");return s.roundImg=new eui.Image(r),s.roundImg.width=r.textureWidth,s.roundImg.height=r.textureHeight,s.anchorOffsetX=s.roundImg.width/2,s.anchorOffsetY=s.roundImg.height/2,s.x=s.width/2,s.y=s.height/2,s.addChild(s.roundImg),s.roundCountText=new eui.Label,s.roundCount=a,s.roundCountText.text=""+s.roundCount,s.roundCountText.size=35,s.roundCountText.textAlign=egret.HorizontalAlign.CENTER,s.roundCountText.verticalAlign=egret.VerticalAlign.MIDDLE,s.roundCountText.bold=!0,s.roundCountText.textColor=0,s.roundCountText.y=.8*-s.height,s.roundCountText.width=s.width,s.roundCountText.y=s.height,s.roundCountText.x=s.width,s.addChild(s.roundCountText),s}return __extends(t,e),t.prototype.animateAndRemove=function(e,t){var n=this,i=egret.Tween.get(this);i.to({x:e,y:t},200).wait(0).call(function(){n.parent.removeChild(n)})},t}(egret.Sprite);__reflect(PointView.prototype,"PointView");var PropBombView=function(e){function t(t,n){var i=e.call(this)||this;i.rowCount=-1,i.width=t,i.height=n;var a=MoviceClipManager.getInstance().createMoviceClipByRes("zhadan_mc_json","zhadan_tex_png","zhadan"),o=.7*t,s=106*o/86;return a.scaleX=o/86,a.scaleY=s/106,a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,a.x=i.width/2,a.y=70,a.$setTouchEnabled(!1),i.addChild(a),a.play(-1),i}return __extends(t,e),t}(egret.Sprite);__reflect(PropBombView.prototype,"PropBombView");var PropMagnetView=function(e){function t(t,n){var i=e.call(this)||this;i.rowCount=-1,i.width=t,i.height=n;var a=MoviceClipManager.getInstance().createMoviceClipByRes("game_prop_effect_json","game_prop_effect_png","game_prop_effect"),o=.7*t,s=106*o/86;return a.scaleX=o/86,a.scaleY=s/106,a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,a.x=i.width/2,a.y=-20,a.$setTouchEnabled(!1),i.addChild(a),a.gotoAndPlay("game_prop_magnet",-1),i}return __extends(t,e),t}(egret.Sprite);__reflect(PropMagnetView.prototype,"PropMagnetView");var PropRocketView=function(e){function t(t,n){var i=e.call(this)||this;i.rowCount=-1,i.width=t,i.height=n;var a=MoviceClipManager.getInstance().createMoviceClipByRes("game_prop_effect_json","game_prop_effect_png","game_prop_effect"),o=.7*t,s=106*o/86;return a.scaleX=o/86,a.scaleY=s/106,a.anchorOffsetX=a.width/2,a.anchorOffsetY=a.height/2,a.x=i.width/2,a.y=-20,a.$setTouchEnabled(!1),i.addChild(a),a.gotoAndPlay("game_prop_rocket",-1),i}return __extends(t,e),t}(egret.Sprite);__reflect(PropRocketView.prototype,"PropRocketView");var SeparateLongView=function(e){function t(t,n){var i=e.call(this)||this;i.width=t,i.height=n;var a=RES.getRes("game_separate_long_png");return i.beanImg=new eui.Image(a),i.beanImg.width=i.width,i.beanImg.height=i.height,i.anchorOffsetX=i.beanImg.width/2,i.anchorOffsetY=i.beanImg.height/2,i.x=i.width/2,i.y=i.height/2,i.addChild(i.beanImg),i}return __extends(t,e),t}(egret.Sprite);__reflect(SeparateLongView.prototype,"SeparateLongView");var SeparateShortView=function(e){function t(t,n){var i=e.call(this)||this;i.rowCount=-1,i.width=t,i.height=n;var a=RES.getRes("game_separate_short_png");return i.separateImg=new eui.Image(a),i.separateImg.width=i.width,i.separateImg.height=i.height,i.anchorOffsetX=i.separateImg.width/2,i.anchorOffsetY=i.separateImg.height/2,i.x=i.width/2,i.y=i.height/2,i.addChild(i.separateImg),i}return __extends(t,e),t}(egret.Sprite);__reflect(SeparateShortView.prototype,"SeparateShortView");var SnakeBodyView=function(e){function t(t,n,i,a){var o=e.call(this)||this;o.width=t-10,o.height=n-10;var s=RES.getRes(SkinInfo.getBodyImgName(a));o.separateImg=new eui.Image(s);var r=.667;return o.separateImg.width=s.textureWidth,o.separateImg.height=s.textureHeight,o.anchorOffsetX=o.separateImg.width/2*r,o.anchorOffsetY=o.separateImg.height/2*r,o.x=o.width/2,o.y=o.height/2,o.separateImg.scaleX=r,o.separateImg.scaleY=r,o.addChild(o.separateImg),o}return __extends(t,e),t.prototype.move=function(e,t){var n=Math.PI/2-Math.atan2(this.y-t,this.x-e),i=40*Math.sin(n)+e,a=40*Math.cos(n)+t;this.x=i,this.y=a},t}(egret.Sprite);__reflect(SnakeBodyView.prototype,"SnakeBodyView");var SnakeView=function(e){function t(t,n,i,a){var o=e.call(this)||this;o.isRocketOpen=!1,o.isMagnetOpen=!1,o.isBombOpen=!1,o.isFrozenOpen=!1,o.isShieldOpen=!1,o.isEffectView=!1,o.width=t,o.height=n,o.initColorType=i,o.curSid=a,o.anchorOffsetX=o.width/2,o.anchorOffsetY=o.height/2,o.x=o.width/2,o.y=o.height/2;var s=RES.getRes(SkinInfo.getHeadImgName(a)),r=new eui.Image(s);r.width=1.1*o.width,r.height=1.1*o.width*s.textureHeight/s.textureWidth;var h=o.height-r.height;return h>0?r.y=o.height-r.height:r.y=5*(o.height-r.height)/7,r.x=.05*-o.width,o.beanImg=r,o.addChild(o.beanImg),o.countLabel=new eui.Label,o.countLabel.text=GameLogic.getInstance().currentBeanCount+"",o.countLabel.size=50,o.countLabel.width=4*o.width,o.countLabel.height=o.height,o.countLabel.x=1.5*-o.width,o.countLabel.y=-o.height,o.countLabel.textAlign=egret.HorizontalAlign.CENTER,o.countLabel.verticalAlign=egret.VerticalAlign.MIDDLE,o.countLabel.textColor=16777215,o.countLabel.stroke=2,o.countLabel.strokeColor=0,o.addChild(o.countLabel),o.frozenImg=new eui.Image(RES.getRes("frozen_png")),o.frozenImg.width=1.2*o.width,o.frozenImg.height=1.2*o.width,o.frozenImg.x=(o.width-o.frozenImg.width)/2,o.frozenImg.y=o.beanImg.y-(o.frozenImg.height-o.beanImg.height)/2,o.frozenImg.visible=!1,o.addChild(o.frozenImg),o.shieldImg=new eui.Image(RES.getRes("shield_png")),o.shieldImg.width=1.8*o.width,o.shieldImg.height=1.8*o.width,o.shieldImg.x=(o.width-o.shieldImg.width)/2,o.shieldImg.y=-80,o.shieldImg.visible=!1,o.addChild(o.shieldImg),o.lightClip=MoviceClipManager.getInstance().createMoviceClipByRes("prop_rocket_json","prop_rocket_png","prop_rocket"),o.lightClip.scaleX=1,o.lightClip.scaleY=1,o.lightClip.anchorOffsetX=100,o.lightClip.anchorOffsetY=100,o.lightClip.x=o.width/2,o.lightClip.y=0,o.lightClip.$setTouchEnabled(!1),o.addChild(o.lightClip),o.lightClip.play(-1),o.lightClip.visible=!1,o.addChild(o.lightClip),o.propMagnetClip=MoviceClipManager.getInstance().createMoviceClipByRes("prop_magnet_json","prop_magnet_png","prop_magnet"),o.propMagnetClip.scaleX=1,o.propMagnetClip.scaleY=1,o.propMagnetClip.anchorOffsetX=100,o.propMagnetClip.anchorOffsetY=100,o.propMagnetClip.x=o.width/2,o.propMagnetClip.y=0,o.propMagnetClip.$setTouchEnabled(!1),o.addChild(o.propMagnetClip),o.propMagnetClip.play(-1),o.propMagnetClip.visible=!1,o.addChild(o.propMagnetClip),o.bombClip=MoviceClipManager.getInstance().createMoviceClipByRes("snake_bomb_mc_json","snake_bomb_tex_png","snake_bomb_mc"),o.bombClip.scaleX=1,o.bombClip.scaleY=1,o.bombClip.anchorOffsetX=100,o.bombClip.anchorOffsetY=100,o.bombClip.x=o.width/2-250,o.bombClip.y=650,o.bombClip.$setTouchEnabled(!1),o.bombClip.visible=!1,o.addChild(o.bombClip),o.propBombClip=MoviceClipManager.getInstance().createMoviceClipByRes("boom_json","boom_png","boom"),o.propBombClip.scaleX=.75,o.propBombClip.scaleY=.75,o.propBombClip.anchorOffsetX=100,o.propBombClip.anchorOffsetY=100,o.propBombClip.x=o.width/2+10,o.propBombClip.y=0,o.propBombClip.$setTouchEnabled(!1),o.addChild(o.propBombClip),o.propBombClip.play(-1),o.propBombClip.visible=!1,o.addChild(o.propBombClip),o.countDownText=new eui.Label,o.countDownText.text="",o.countDownText.size=40,o.countDownText.textAlign=egret.HorizontalAlign.CENTER,o.countDownText.verticalAlign=egret.VerticalAlign.MIDDLE,o.countDownText.bold=!0,o.countDownText.textColor=16777215,o.countDownText.y=1.2*-o.height,o.countDownText.width=o.width,o.countDownText.$setTouchEnabled(!1),o.addChild(o.countDownText),o}return __extends(t,e),t.prototype.bomb=function(){null!=this.bombClip&&(this.bombClip.visible=!0,this.bombClip.gotoAndPlay(1,1),this.bombClip.addEventListener(egret.Event.COMPLETE,function(e){e.target.visible=!1},this))},t.prototype.showBombEffect=function(e){e?(this.isBombOpen=!0,this.propBombClip.visible=!0,this.bombTime=(new Date).getTime()):(this.isBombOpen=!1,this.propBombClip.visible=!1)},t.prototype.showRocketEffect=function(e){e?(this.showFrozen(!1),this.isRocketOpen=!0,this.lightClip.visible=!0):(this.isRocketOpen=!1,this.lightClip.visible=!1)},t.prototype.showMagnetLight=function(e){e?(this.isMagnetOpen=!0,this.propMagnetClip.visible=!0):(this.isMagnetOpen=!1,this.propMagnetClip.visible=!1)},t.prototype.showFrozen=function(e){e?(this.isFrozenOpen=!0,this.frozenImg.visible=!0):(this.isFrozenOpen=!1,this.frozenImg.visible=!1)},t.prototype.showShield=function(e){e?(this.isShieldOpen=!0,this.shieldImg.visible=!0):(this.isShieldOpen=!1,this.shieldImg.visible=!1)},t.prototype.getBombTime=function(){return this.bombTime},t.prototype.calcBombTime=function(){if(this.isBombOpen&&this.bombTime>0){var e=3-Math.floor(((new Date).getTime()-this.bombTime)/1e3);return e>0?(this.setCountDownText(e),!1):(this.setCountDownText(0),this.showBombEffect(!1),this.bomb(),!0)}return!1},t.prototype.setCountDownText=function(e){e>0?this.countDownText.text=""+e:this.countDownText.text=""},t.prototype.updateCount=function(e){this.countLabel.text=""+e},t.prototype.addCount=function(e){GameLogic.getInstance().currentBeanCount+=e,this.updateCount(GameLogic.getInstance().currentBeanCount)},t}(egret.Sprite);__reflect(SnakeView.prototype,"SnakeView");var game;!function(e){var t;!function(e){e[e.None=0]="None",e[e.MainPlusDiamond=1]="MainPlusDiamond",e[e.GameBackLife=2]="GameBackLife"}(t=e.ESharePosition||(e.ESharePosition={}));var n=function(n){function i(){var e=n.call(this)||this;return e.NATIVE_FACEBOOK="native_facebook",e.NATIVE_FACEBOOK_SIGNIN="native_facebook_signIn",e.NATIVE_FACEBOOK_SIGNOUT="native_facebook_signOut",e.NATIVE_FACEBOOK_SHARE="native_facebook_share",e.EGRET_FACEBOOK_TOKEN_ID="egret_requestFacebookIDToken",e.EGRET_FACEBOOK_SHARE="egret_requestFacebookShare",e.signinCallback=null,e.shareCallback=null,e.init(),e}return __extends(i,n),i.prototype.init=function(){var e=this;egret.ExternalInterface.addCallback(this.EGRET_FACEBOOK_TOKEN_ID,function(t){console.log("egret_requestIDToken",t),e.getFacebookUserinfo(t)}),egret.ExternalInterface.addCallback(this.EGRET_FACEBOOK_SHARE,function(t){console.log("egret_requestFacebookShare",t),e.handleShareAction(t)})},i.prototype.facebookSignIn=function(){core.PlatUtils.isAndroid&&(console.log("facebook signin"),egret.ExternalInterface.call(this.NATIVE_FACEBOOK,this.NATIVE_FACEBOOK_SIGNIN))},i.prototype.facebookSignOut=function(){core.PlatUtils.isAndroid&&(console.log("facebook signin"),egret.ExternalInterface.call(this.NATIVE_FACEBOOK,this.NATIVE_FACEBOOK_SIGNOUT))},i.prototype.facebookShare=function(e){core.PlatUtils.isAndroid&&(console.log("facebook signin"),egret.ExternalInterface.call(this.NATIVE_FACEBOOK,this.NATIVE_FACEBOOK_SHARE),this.mSharePosition=e)},i.prototype.getFacebookUserinfo=function(t){return __awaiter(this,void 0,void 0,function(){var n,i,a;return __generator(this,function(o){if("error"!=t){if(n=t.split("|"),n.length<2)return[2];i=n[0],a=n[1],e.GetHttpData.getInstance().facebookLogin(ELoginCode.SUCCESS,a,i)}else e.GetHttpData.getInstance().facebookLogin(ELoginCode.ERROR,"","");return[2]})})},i.prototype.handleShareAction=function(e){switch(e){case"share_success":this.handleShareResult(!0);break;case"share_fail":this.handleShareResult(!1);break;case"share_cancel":}this.mSharePosition=t.None},i.prototype.handleShareResult=function(n){switch(this.mSharePosition){case t.MainPlusDiamond:e.GetHttpData.getInstance().GetShareData(n,1);break;case t.GameBackLife:console.log(n+"...pp...."),e.GetHttpData.getInstance().ResurGence(UserInfo.GameId,2,n)}},i.prototype.unInit=function(){},i}(e.Singleton);e.FacebookSDKMgr=n,__reflect(n.prototype,"game.FacebookSDKMgr")}(game||(game={}));var game;!function(e){var t;!function(e){e[e.FreeSkin=0]="FreeSkin",e[e.GetOneLife=1]="GetOneLife",e[e.GetDiamond=2]="GetDiamond",e[e.showXP=3]="showXP",e[e.None=4]="None"}(t=e.EVideoPosition||(e.EVideoPosition={}));var n=function(n){function i(){var e=n.call(this)||this;return e.NATIVE_GOOGLE="native_google",e.NATIVE_GOOGLE_BANNER="native_google_banner",e.NATIVE_GOOGLE_INIT_VIDEO="native_google_init_video",e.NATIVE_GOOGLE_VIDEO="native_google_video",e.SHOW="show",e.HIDE="hide",e.DESTORY="destroy",e.EGRET_ADS_VIDEO="egret_ads_video",e.VIDEO_SUCCESS="watch_video_success",e.VIDEO_FAIL="watch_video_fail",e.EGRET_ADS_STATE="egret_ads_state",e.VIDEO_BEGIN="watch_video_begin",e.isVideoPlaying=!1,e.SHOW_SKIN="show_skin",e.SHOW_LIFE="show_life",e.SHOW_DIAMOND="show_diamond",e.SHOW_XP="show_xp",e.preShowVideoPos=t.None,e.checkTimes=0,e.init(),e}return __extends(i,n),i.prototype.init=function(){var e=this;egret.ExternalInterface.addCallback(this.EGRET_ADS_VIDEO,function(t){console.log("egret_ads_video",t);var n=t.split("|");if(!(n.length<2))switch(n[0]){case e.VIDEO_SUCCESS:e.watchAndroidVideoSuccess(n[1]);break;case e.VIDEO_FAIL:e.watchAndroidVideoFail(n[1])}}),egret.ExternalInterface.addCallback(this.EGRET_ADS_STATE,function(t){switch(console.log("egret_ads_state",t),t){case e.VIDEO_BEGIN:e.videoBegin()}})},i.prototype.watchAndroidVideoSuccess=function(e){switch(console.log("---------Android → H5--看视频成功-----------: "+e),e){case"show_skin":null!=this.cb_FreeSkin_Success&&this.cb_FreeSkin_Success();break;case"show_life":null!=this.cb_GetOneLife_Success&&this.cb_GetOneLife_Success();break;case"show_diamond":null!=this.cb_GetDiamond_Success&&this.cb_GetDiamond_Success()}},i.prototype.watchAndroidVideoFail=function(e){switch(console.log("---------Android → H5--看视频失败-----------: "+e),e){case"show_skin":null!=this.cb_FreeSkin_Fail&&this.cb_FreeSkin_Fail();break;case"show_life":null!=this.cb_GetOneLife_Fail&&this.cb_GetOneLife_Fail();break;case"show_diamond":null!=this.cb_GetDiamond_Fail&&this.cb_GetDiamond_Fail()}this.isVideoPlaying=!1,this.preShowVideoPos=t.None},i.prototype.showBanner=function(){core.PlatUtils.isAndroid&&(console.log("show banner"),egret.ExternalInterface.call(this.NATIVE_GOOGLE_BANNER,this.SHOW))},i.prototype.hideBanner=function(){core.PlatUtils.isAndroid&&(console.log("hide Banner"),egret.ExternalInterface.call(this.NATIVE_GOOGLE_BANNER,this.HIDE))},i.prototype.destroyBanner=function(){core.PlatUtils.isAndroid&&(console.log("destroy Banner"),egret.ExternalInterface.call(this.NATIVE_GOOGLE_BANNER,this.DESTORY))},i.prototype.initVideoEnv=function(e){core.PlatUtils.isAndroid&&(console.log("init video env"),egret.ExternalInterface.call(this.NATIVE_GOOGLE_INIT_VIDEO,e))},i.prototype.showVideo=function(n,i,a){if(console.log("GoogleAdsSDKMgr.showVideo_______111"),core.PlatUtils.isAndroid){switch(console.log("show Video"),e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel),this.preShowVideoPos=n,this.isVideoPlaying=!1,n){case t.FreeSkin:this.cb_FreeSkin_Success=null,this.cb_FreeSkin_Fail=null,this.cb_FreeSkin_Success=i,this.cb_FreeSkin_Fail=a,egret.ExternalInterface.call(this.NATIVE_GOOGLE_VIDEO,this.SHOW_SKIN);break;case t.GetOneLife:e.ShuShuSDKMgr.getInstance().ta.track("GetOneLife"),this.cb_GetOneLife_Success=null,this.cb_GetOneLife_Fail=null,this.cb_GetOneLife_Success=i,this.cb_GetOneLife_Fail=a,egret.ExternalInterface.call(this.NATIVE_GOOGLE_VIDEO,this.SHOW_LIFE);break;case t.GetDiamond:this.cb_GetDiamond_Success=null,this.cb_GetDiamond_Fail=null,this.cb_GetDiamond_Success=i,this.cb_GetDiamond_Fail=a,egret.ExternalInterface.call(this.NATIVE_GOOGLE_VIDEO,this.SHOW_DIAMOND);break;case t.showXP:this.cb_GetDiamond_Success=null,this.cb_GetDiamond_Fail=null,this.cb_GetDiamond_Success=i,this.cb_GetDiamond_Fail=a,egret.ExternalInterface.call(this.NATIVE_GOOGLE_VIDEO,this.SHOW_XP)}this.checkIsVideoPlay()}else if(!GameConst.isRelease)switch(n){case t.FreeSkin:this.cb_FreeSkin_Success=null,this.cb_FreeSkin_Fail=null,this.cb_FreeSkin_Success=i,this.cb_FreeSkin_Fail=a,this.watchAndroidVideoSuccess("show_skin");break;case t.GetOneLife:e.ShuShuSDKMgr.getInstance().ta.track("GetOneLife"),this.cb_GetOneLife_Success=null,this.cb_GetOneLife_Fail=null,this.cb_GetOneLife_Success=i,this.cb_GetOneLife_Fail=a,this.watchAndroidVideoSuccess("show_life");break;case t.GetDiamond:this.cb_GetDiamond_Success=null,this.cb_GetDiamond_Fail=null,this.cb_GetDiamond_Success=i,this.cb_GetDiamond_Fail=a,this.watchAndroidVideoSuccess("show_diamond")}},i.prototype.videoBegin=function(){core.PlatUtils.isAndroid&&(e.PanelManager.getInstance().close(e.EPanelID.ConnectLoadingPanel,!0),this.isVideoPlaying=!0,this.preShowVideoPos=t.None)},i.prototype.videoStop=function(){core.PlatUtils.isAndroid&&(this.isVideoPlaying=!1,this.preShowVideoPos=t.None)},i.prototype.checkIsVideoPlay=function(){var n=this,i=this;egret.setTimeout(function(){if(!i.isVideoPlaying){if(i.checkTimes>=3)return i.isVideoPlaying=!1,i.preShowVideoPos=t.None,i.checkTimes=0,void e.PanelManager.getInstance().close(e.EPanelID.ConnectLoadingPanel,!0);if(i.preShowVideoPos!=t.None)switch(i.preShowVideoPos){case t.FreeSkin:i.showVideo(i.preShowVideoPos,n.cb_FreeSkin_Success,i.cb_FreeSkin_Fail);break;case t.GetOneLife:i.showVideo(i.preShowVideoPos,n.cb_GetOneLife_Success,i.cb_GetOneLife_Fail);break;case t.GetDiamond:i.showVideo(i.preShowVideoPos,n.cb_GetDiamond_Success,i.cb_GetDiamond_Fail)}i.checkTimes++}},this,1e3)},i.prototype.hideVideo=function(){core.PlatUtils.isAndroid&&(console.log("hide Video"),egret.ExternalInterface.call(this.NATIVE_GOOGLE_VIDEO,this.HIDE),this.isVideoPlaying=!1,this.preShowVideoPos=t.None)},i.prototype.destroyVideo=function(){core.PlatUtils.isAndroid&&(console.log("destroy Video"),egret.ExternalInterface.call(this.NATIVE_GOOGLE_VIDEO,this.DESTORY))},i}(e.Singleton);e.GoogleAdsSDKMgr=n,__reflect(n.prototype,"game.GoogleAdsSDKMgr")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.row200=60,e.row400=120,e.row600=180,e.row800=240,e.row1000=300,e}return __extends(n,t),n.prototype.init=function(){},n.prototype.createMapGrid=function(){},n.prototype.createLineTypeArrByrowCount=function(e){var t,n=[-1,-1,-1,-1,-1];t=e<=this.row200?SnakeConst.Prop_Prob[this.row200]:e<=this.row400?SnakeConst.Prop_Prob[this.row400]:e<=this.row600?SnakeConst.Prop_Prob[this.row600]:e<=this.row800?SnakeConst.Prop_Prob[this.row800]:SnakeConst.Prop_Prob[this.row1000];for(var i=0;i<n.length;i++){var a=Math.random();a<=t[0]?n[i]=LineType.OBSTACLE:a<=t[0]+t[1]?n[i]=LineType.POINT:a<=t[0]+t[1]+t[2]?e<=this.row200?Math.random()<=.5?n[i]=LineType.MAGENT:n[i]=LineType.BOMB:Math.random()<=.33?n[i]=LineType.MAGENT:Math.random()<=.66?n[i]=LineType.ROCKET:n[i]=LineType.BOMB:a<=t[0]+t[1]+t[2]+t[3]&&(n[i]=LineType.LINE)}return n},n.prototype.getRandomObstacleValue=function(e){var t,n=[-1,-1];return n=e<=this.row200?SnakeConst.Obstacle_Range[this.row200]:e<=this.row400?SnakeConst.Obstacle_Range[this.row400]:e<=this.row600?SnakeConst.Obstacle_Range[this.row600]:e<=this.row800?SnakeConst.Obstacle_Range[this.row800]:SnakeConst.Obstacle_Range[this.row1000],t=Math.floor(Math.random()*(n[1]-n[0]+1)+n[0])},n.prototype.getRandomPointValue=function(e){var t,n=[-1,-1];return n=e<=this.row200?SnakeConst.Point_Range[this.row200]:e<=this.row400?SnakeConst.Point_Range[this.row400]:e<=this.row600?SnakeConst.Point_Range[this.row600]:e<=this.row800?SnakeConst.Point_Range[this.row800]:SnakeConst.Point_Range[this.row1000],t=Math.floor(Math.random()*(n[1]-n[0]+1)+n[0])},n.prototype.getRobotNextRowColumn=function(){},n.prototype.calculateTheBestColumn=function(e,t,n,i){var a=-1;if(e.length<4)return-1;for(var o=[-5e3,-5e3,-5e3,-5e3,-5e3],s=this.robotThinkRange(t),r=this.calculateLeftAndRight(s,n),h=r[0],g=r[1],l="机器人行号: "+t+" .当前行障碍数组:  ",c=0;c<i.length;c++)l+=i[c]+" ";for(var p="下一行道具数组:  ",d=0;d<e.length;d++)p+=e[d]+" ";for(var u=0;n>u;u++)(1==i[u]||2==i[u])&&(h=u+1);for(var m=i.length-1;m>=n;m--)m==n?1==i[m]&&(g=m):1==i[m]?g=m:2==i[m]&&(g=m-1);for(var f=h;g>=f;f++)o[f]=e[f];for(var _=this.getMaxIndexesByArr(o),c=0;c<_.length;c++)if(_[c]==n&&Math.random()<=.8)return n;return h==g?h:a=_[Math.floor(Math.random()*_.length)]},n.prototype.robotThinkRange=function(t){var n=Math.random();null==this.gameFight&&(this.gameFight=e.PanelManager.getInstance().getPanel(e.EPanelID.GameFight));var i,a=100*Math.random(),o=e.LocalStorageUtils.getNumber("GameFightTimes");return void 0!=o&&5>=o&&(a=10),i=10>=a?SnakeConst.AI_Prob[10]:20>=a?SnakeConst.AI_Prob[20]:30>=a?SnakeConst.AI_Prob[30]:40>=a?SnakeConst.AI_Prob[40]:50>=a?SnakeConst.AI_Prob[50]:60>=a?SnakeConst.AI_Prob[60]:70>=a?SnakeConst.AI_Prob[70]:80>=a?SnakeConst.AI_Prob[80]:90>=a?SnakeConst.AI_Prob[90]:SnakeConst.AI_Prob[100],n<=i[0]?2:n<=i[1]?3:n<=i[2]?4:5},n.prototype.getMaxIndexesByArr=function(e){for(var t=[],n=-1e4,i=0;i<e.length;++i)e[i]==n?t.push(i):e[i]>n&&(t=[],t.push(i),n=e[i]);return t},n.prototype.calculateLeftAndRight=function(e,t){var n=[-1,-1];switch(e){case 2:if(0==t)n[0]=0,n[1]=1;else if(4==t)n[0]=3,n[1]=4;else{var i=Math.random();i>=.5?(n[0]=t-1,n[1]=t):(n[0]=t,n[1]=t+1)}break;case 3:if(0==t)n[0]=0,n[1]=2;else if(1==t){var i=Math.random();i>=.5?(n[0]=t-1,n[1]=t+1):(n[0]=t,n[1]=t+2)}else if(2==t){var i=Math.random();.33>=i?(n[0]=t-2,n[1]=t):.66>=i?(n[0]=t-1,n[1]=t+1):(n[0]=t,n[1]=t+2)}else if(3==t){var i=Math.random();i>=.5?(n[0]=t-2,n[1]=t):(n[0]=t-1,n[1]=t+1)}else 4==t&&(n[0]=2,n[1]=4);break;case 4:if(0==t)n[0]=0,n[1]=3;else if(4==t)n[0]=1,n[1]=4;else{var i=Math.random();i>=.5?(n[0]=0,n[1]=3):(n[0]=1,n[1]=4)}break;case 5:n[0]=0,n[1]=4}return n},n}(e.Singleton);e.RobotMgr=t,__reflect(t.prototype,"game.RobotMgr")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.NATIVE_GOOGLE="native_google",e.NATIVE_GOOGLE_SIGNIN="native_google_signIn",e.NATIVE_GOOGLE_SIGNOUT="native_google_signOut",e.NATIVE_GOOGLE_START_BILLING="native_google_billing_start",e.NATIVE_GOOGLE_QUERY_INVENTORY="native_google_query_inventory",e.NATIVE_GOOGLE_CONSUME_PRODUCT="native_google_consume_product",e.EGRET_GOOGLE_TOKEN_ID="egret_requestGoogleIDToken",e.EGRET_GOOGLE_BILLING_CONSUME="egret_requestBillingConsume",e.signinCallback=null,e.init(),e}return __extends(n,t),n.prototype.init=function(){var e=this;egret.ExternalInterface.addCallback(this.EGRET_GOOGLE_TOKEN_ID,function(t){console.log("egret_requestIDToken",t),e.getGoogleUserinfo(t)}),egret.ExternalInterface.addCallback(this.EGRET_GOOGLE_BILLING_CONSUME,function(t){console.log("egret_requestBillingConsume",t),e.consumePurchaseGet(t)})},n.prototype.googleSignIn=function(){core.PlatUtils.isAndroid&&(console.log("google signin"),egret.ExternalInterface.call(this.NATIVE_GOOGLE,this.NATIVE_GOOGLE_SIGNIN))},n.prototype.googleSignOut=function(){core.PlatUtils.isAndroid&&(console.log("google signin"),egret.ExternalInterface.call(this.NATIVE_GOOGLE,this.NATIVE_GOOGLE_SIGNOUT))},n.prototype.googleStartBilling=function(e){core.PlatUtils.isAndroid&&(console.log("google signin"),egret.ExternalInterface.call(this.NATIVE_GOOGLE_START_BILLING,e))},n.prototype.initComplete=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,100];case 1:return e.sent(),core.PlatUtils.isAndroid&&(console.log("query inventory"),egret.ExternalInterface.call(this.NATIVE_GOOGLE_QUERY_INVENTORY,"")),[2]}})})},n.prototype.getGoogleUserinfo=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return"error"!=t?e.GetHttpData.getInstance().googleLogin(ELoginCode.SUCCESS,t):e.GetHttpData.getInstance().googleLogin(ELoginCode.ERROR,t),[2]})})},n.prototype.consumePurchaseGet=function(t){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(i){return console.log("-----------请求消耗----------"),n=t.split("|"),e.GetHttpData.getInstance().PaymentData(btoa(n[1]),btoa(n[0])),[2]})})},n.prototype.native_google_consume_product=function(e){core.PlatUtils.isAndroid&&(console.log("query inventory"),egret.ExternalInterface.call(this.NATIVE_GOOGLE_CONSUME_PRODUCT,e))},n.prototype.post=function(e,t,n){},n.prototype.paramForString=function(e){var t="";for(var n in e)t=t+n+"="+e[n]+"&";return t=t.substring(0,t.length-1)},n.prototype.unInit=function(){},n}(e.Singleton);e.GoogleSDKMgr=t,__reflect(t.prototype,"game.GoogleSDKMgr")}(game||(game={}));var SnakeEnemy=function(e){function t(t,n,i,a){var o=e.call(this,t,n,i,a)||this;o.robotNextPos=-1,o.robotMoveSpeed=12;var s=game.StageUtils.getInstance().stageWidth;return o.x=3*s/5+s/5/2,o.countLabel.textColor=16719647,o}return __extends(t,e),Object.defineProperty(t.prototype,"currentBeanCount",{get:function(){return GameLogic.getInstance().currEnemyBeanCount},set:function(e){GameLogic.getInstance().currEnemyBeanCount=e,this.updateCount(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentScore",{get:function(){return GameLogic.getInstance().currEnemyScore},set:function(e){GameLogic.getInstance().currEnemyScore=e},enumerable:!0,configurable:!0}),t.prototype.leftRightMove=function(e){e>0&&this.mouceTouchStageX<=720&&(this.mouceTouchStageX-=e),0>e&&this.mouceTouchStageX>=0&&(this.mouceTouchStageX-=e)},t.prototype.robotAutoMove=function(e){var t=game.StageUtils.getInstance().stageWidth,n=Math.floor(this.x/(t/5));if(n!=e){var i=e*(t/5)+t/5/2,a=20*Math.random();Math.random()>.5?i+=a:i-=a;var o=120+50*Math.random(),s=1;switch(s){case 0:egret.Tween.get(this).to({x:i},o);break;case 1:egret.Tween.get(this).to({x:i},o);break;case 2:egret.Tween.get(this).to({x:i},o,egret.Ease.cubicOut)}}},t}(SnakeBase);__reflect(SnakeEnemy.prototype,"SnakeEnemy");var SnakePlayer=function(e){function t(t,n,i,a){var o=e.call(this,t,n,i,a)||this,s=game.StageUtils.getInstance().stageWidth;return o.x=2*s/5+s/5/2,o.countLabel.textColor=37082,o}return __extends(t,e),Object.defineProperty(t.prototype,"currentBeanCount",{get:function(){return GameLogic.getInstance().currPlayerBeanCount},set:function(e){GameLogic.getInstance().currPlayerBeanCount=e,this.updateCount(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentScore",{get:function(){return GameLogic.getInstance().currPlayerScore},set:function(e){GameLogic.getInstance().currPlayerScore=e},enumerable:!0,configurable:!0}),t}(SnakeBase);__reflect(SnakePlayer.prototype,"SnakePlayer");var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.YD_CHANGE="ydChange",e.SHOW_AD="showVideoAd",e.adId="2019052715312225313850",e}return __extends(n,t),n.prototype.init=function(){window.nativeCallback=function(e,t){var n=window[e],i=n(t);return i}},n.prototype.showVideo=function(){if(GameConst.platform==PlatformConst.H5){console.log("load ad"),window.myAd167427=window.Vijs.setAD({unitid:167427,loadedCallback:function(){console.log("load success"),clearTimeout(t),e.PanelManager.getInstance().close(e.EPanelID.ConnectLoadingPanel),window.myAd167427.show()},rewardedCallback:function(e,t){var n=t;console.log(n),window.showVideoAd(n)}}),e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel);var t=setTimeout(function(){e.PanelManager.getInstance().close(e.EPanelID.ConnectLoadingPanel)},3e3)}else if(GameConst.platform==PlatformConst.H5noad)if(GameConst.isAndroid){e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel),window.hclw.invokeNative("showVideoAd","{}","showVideoAd");var t=setTimeout(function(){e.PanelManager.getInstance().close(e.EPanelID.ConnectLoadingPanel)},300)}else{e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel);var t=setTimeout(function(){e.PanelManager.getInstance().close(e.EPanelID.ConnectLoadingPanel),window.showVideoAd(!0)},500)}else nativeInterface.showVideoAd(this.adId,this.SHOW_AD)},n}(e.Singleton);e.H5externalAndroid=t,__reflect(t.prototype,"game.H5externalAndroid")}(game||(game={}));var game;!function(e){var t=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return __extends(n,t),n.prototype.init=function(){e.ResourceManager.createInstance(),e.PanelManager.createInstance(),e.TipsManager.createInstance(),e.SoundManager.createInstance(),this.h5Init()},n.prototype.unInit=function(){e.ResourceManager.destroyInstance(),e.PanelManager.destroyInstance(),e.TipsManager.destroyInstance(),e.SoundManager.destroyInstance()},n.prototype.h5Init=function(){GameConst.platform==PlatformConst.DAYU&&e.H5externalAndroid.createInstance()},n}(e.Singleton);e.GameFramework=t,__reflect(t.prototype,"game.GameFramework")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.panelList=[],e}return __extends(n,t),n.prototype.init=function(){this.panelLayer=new eui.UILayer,this.panelLayer.percentWidth=100,this.panelLayer.percentHeight=100,this.panelLayer.touchEnabled=!1,console.log(e.EUILayer.Panel),e.StageUtils.getInstance().stage.addChildAt(this.panelLayer,e.EUILayer.Panel)},n.prototype.open=function(t,n){void 0===n&&(n=null);var i=this.panelList[t];if(null==i){var a=e.PanelType.panel[e.EPanelID[t]];i=new a,this.panelList[t]=i}i.data=n,i.percentWidth=this.panelLayer.percentWidth,i.percentHeight=this.panelLayer.percentHeight,i.anchorOffsetX=e.StageUtils.getInstance().stageWidth/2,i.anchorOffsetY=e.StageUtils.getInstance().stageHeight/2,i.x=e.StageUtils.getInstance().stageWidth/2,i.y=e.StageUtils.getInstance().stageHeight/2,this.panelLayer.addChild(i)},n.prototype.close=function(e,t){void 0===t&&(t=!1);var n=this.panelList[e];n&&n.parent&&n.parent==this.panelLayer&&(this.panelLayer.removeChild(n),t&&(this.panelList[e]=null))},n.prototype.getPanel=function(e){return this.panelList[e]},n.prototype.delectPanel=function(e){this.panelList[e]=null},n.prototype.delectAllPanel=function(){for(var e=0;e<this.panelList.length;e++){var t=this.panelList[e];
t&&t.parent&&t.parent==this.panelLayer&&(this.panelLayer.removeChild(t),this.panelList[e]=null)}},n.prototype.unInit=function(){e.StageUtils.getInstance().stage.removeChild(this.panelLayer)},n}(e.Singleton);e.PanelManager=t,__reflect(t.prototype,"game.PanelManager")}(game||(game={}));var PlatformManager=function(){function e(){}return e.changeUI=function(e,t){var n=!1;n=GameConst.platform==PlatformConst.DAYU?!0:!1,e.visible=n,t.visible=!n},e.changeUIs=function(e,t){var n=!1;n=GameConst.platform==PlatformConst.DAYU?!0:!1;for(var i=0;i<e.length;i++)e[i].visible=n;for(var i=0;i<t.length;i++)t[i].visible=!n},e}();__reflect(PlatformManager.prototype,"PlatformManager");var game;!function(e){var t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.countGroupError=0,e}return __extends(n,t),n.prototype.init=function(){this.groupList=new Array,this.configList=new Array,this.errorList=new Array,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceLoadProgress,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.itemloaderror,this)},n.prototype.loadResource=function(t){return __awaiter(this,void 0,void 0,function(){var n,i;return __generator(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),n=new ConnectLoadingPanel,e.StageUtils.getInstance().stage.addChild(n),[4,RES.loadGroup(t)];case 1:return a.sent(),e.StageUtils.getInstance().stage.removeChild(n),[3,3];case 2:return i=a.sent(),console.error(i),[3,3];case 3:return[2]}})})},n.prototype.loadGroups=function(t){return __awaiter(this,void 0,void 0,function(){var n,i,a;return __generator(this,function(o){switch(o.label){case 0:o.trys.push([0,5,,6]),n=new ConnectLoadingPanel,e.StageUtils.getInstance().stage.addChild(n),i=0,o.label=1;case 1:return i<t.length?[4,RES.loadGroup(t[i])]:[3,4];case 2:o.sent(),o.label=3;case 3:return i++,[3,1];case 4:return e.StageUtils.getInstance().stage.removeChild(n),[3,6];case 5:return a=o.sent(),[3,6];case 6:return[2]}})})},n.prototype.loadGroupCallback=function(e,t,n,i,a){void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===a&&(a=1);var o=this.combGroupName(e);this.groupList[o]=[n,i,t],RES.loadGroup(o)},n.prototype.loadGroup=function(e,t,n,i,a){void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null),void 0===a&&(a=1);var o=this.combGroupName(e);this.groupList[o]=[n,i,t],this.loadGroupQuiet(e,a)},n.prototype.loadGroupQuiet=function(e,t){void 0===t&&(t=1);var n=this.combGroupName(e);RES.loadGroup(n,t)},n.prototype.combGroupName=function(e){var t="";if("string"==typeof e)t=e;else{for(var n=e.length,i=0;n>i;i++)t+=e[i];RES.createGroup(t,e)}return t},n.prototype.onResourceLoadComplete=function(e){var t=e.groupName;if(this.errorList[t]&&(this.errorList[t]=0),this.groupList[t]){var n=this.groupList[t][0],i=this.groupList[t][2];null!=n&&n.call(i),this.deleteCallBack(t)}},n.prototype.onResourceLoadProgress=function(e){var t=e.groupName;if(this.groupList[t]){var n=this.groupList[t][1],i=this.groupList[t][2];null!=n&&n.call(i,e)}},n.prototype.onResourceLoadError=function(t){console.log("无网络");var n={group:["common","login","loading","mp3"],panelName:e.EPanelID.LoginType,name:"资源加载"};e.PanelManager.getInstance().open(e.EPanelID.ConnectLoadingPanel,n)},n.prototype.itemloaderror=function(e){console.error("一项资源加载失败",e);var t=new egret.ImageLoader;t.crossOrigin="anonymous",t.load(""+e.resItem.url)},n.prototype.deleteCallBack=function(e){console.log("取消加载资源组回调:"+e),this.groupList[e]=null,delete this.groupList[e]},n.prototype.deleteAllCallBack=function(){for(var e in this.groupList)this.deleteCallBack(e)},n}(e.Singleton);e.ResourceManager=t,__reflect(t.prototype,"game.ResourceManager")}(game||(game={}));var HclwAndroidNotify=function(){function e(){}return e.VIDEO_GAIN_DAIMOND="VIDEO_GAIN_DAIMOND",e.VIDEO_GAIN_SKIN="VIDEO_GAIN_SKIN",e.VIDEO_DOUBLE_SCORE="VIDEO_DOUBLE_SCORE",e.VIDEO_RELIVE="VIDEO_RELIVE",e.VIDEO_LOTTERY_REWARD="VIDEO_LOTTERY_REWARD",e.VIDEO_SIGNIN="VIDEO_SIGNIN",e.VIDEO_TASK="VIDEO_TASK",e.VIDEO_REPLAY="VIDEO_REPLAY",e.BUTTON_BACK="BUTTON_BACK",e}();__reflect(HclwAndroidNotify.prototype,"HclwAndroidNotify");var HclwAndroidUtil=function(e){function t(){var t=e.call(this)||this;return t.isCanRequestVideo=!0,t.isVideoPlaying=!1,t}return __extends(t,e),t.prototype.showVideoAd=function(e,t){if(this.isCanRequestVideo){if(this.isCanRequestVideo=!1,!this.isVideoPlaying){var n={};n.posId="2020032015153091632702",n.event=e,this.preCallBack&&(game.EventManager.getInstance().removeListener(this.preEvent,this.preCallBack,this),this.preEvent="",this.preCallBack=null),game.EventManager.getInstance().addListener(e,t,this),this.preEvent=e,this.preCallBack=t,hclw.invokeNative("showVideoAd",JSON.stringify(n),"android_cb_showVideoAd")}}else t=null,game.TipsManager.getInstance().show(game.ETipsID.TipsBox,{title:"视频加载中,请稍候...",type:TipsStyle.wordType})},t.prototype.saveData=function(e,t){hclw.saveData(e,t)},t.prototype.getData=function(e){return hclw.getData(e)},t.prototype.saveCache=function(e,t){hclw.saveCache(e,t)},t.prototype.getCache=function(e){return hclw.getCache(e)},t.prototype.exitApp=function(){hclw.invokeNative("exitApp")},t.prototype.reloadApp=function(){hclw.saveCache("reload","yes"),hclw.invokeNative("reload")},t}(game.Singleton);__reflect(HclwAndroidUtil.prototype,"HclwAndroidUtil");var SnakeConst=function(){function e(){}return e.getColorType=function(t,n,i){void 0===i&&(i=0);var a;if(0==i)if(1==n)a=5>=t?e.Type_Violet:10>=t?e.Type_Green:15>=t?e.Type_Orange:20>=t?e.Type_Yellow:30>=t?e.Type_Blue:40>=t?e.Type_Pink:e.Type_Red;else if(2==n||3==n)a=1>=t?e.Type_Violet:2>=t?e.Type_Green:3>=t?e.Type_Orange:4>=t?e.Type_Yellow:5>=t?e.Type_Blue:6>=t?e.Type_Pink:e.Type_Red;else{var o=[this.Type_Blue,this.Type_Green,this.Type_Orange,this.Type_Pink,this.Type_Red,this.Type_Violet,this.Type_Yellow],s=Math.ceil(100*Math.random());a=o[s%o.length]}else 1==i&&(a="normal");return a},e.getRandomLine=function(){var e=Math.ceil(10*Math.random())%5;return e},e.getRandomNum=function(e){var t=Math.ceil(200*Math.random())%e;return t},e.getRandomNumRange=function(e,t){for(var n=Math.ceil(1e3*Math.random())%t;e>n;)n=Math.ceil(1e3*Math.random())%t;return n},e.getRandomBool=function(){var e=Math.round(10*Math.random());return e>2?!0:!1},e.MAX_BODY_LENGTH=9,e.INIT_BODY_LENGTH=5,e.RELIFE_BODY_LENGTH=50,e.Type_Blue="blue",e.Type_Green="green",e.Type_Orange="orange",e.Type_Pink="pink",e.Type_Red="red",e.Type_Violet="violet",e.Type_Yellow="yellow",e.Prop_Magnet=1e3,e.Prop_Bomb=1500,e.Prop_Rocket=2e3,e.Prop_Wall=-3e3,e.AI_Prob={10:[.1,.35,.65,1],20:[.1,.35,.65,1],30:[.1,.35,.65,1],40:[.1,.35,.65,1],50:[.05,.3,.6,1],60:[0,.3,.6,1],70:[0,.25,.6,1],80:[0,.2,.55,1],90:[0,.15,.55,1],100:[0,.1,.5,1]},e.Add_Speed={60:.1,120:.1,180:.2,240:.2},e.Prop_Prob={60:[.2,.1,.02,.03],120:[.2,.15,.03,.05],180:[.3,.1,.03,.1],240:[.4,.1,.01,.1],300:[.5,.1,.01,.1]},e.Obstacle_Range={60:[1,5],120:[5,15],180:[13,29],240:[17,39],300:[21,49]},e.Point_Range={60:[1,3],120:[1,5],180:[1,5],240:[1,5],300:[1,5]},e}();__reflect(SnakeConst.prototype,"SnakeConst");var game;!function(e){var t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.soundList={},e._allowPlayEffect=!0,e._effectVolume=1,e.NATIVE_EGRET_SOUND="native_egret_sound",e.CLICK="click",e.EAT="eat",e.EFFECT="effect",e.HIT="hit",e.EXPLODE="explode",e.FROZEN="frozen",e.WIN="win",e.LOSE="lose",e.RELIVE="relive",e.GAME="game",e.GAME_STOP="game_stop",e.MUTE_FALSE="mute_false",e.MUTE_TRUE="mute_true",e}return __extends(n,t),n.prototype.init=function(){if(GameConst.isAndroid){var t=this;window.systemStateChange=function(e){t.PlayEffectStatus&&("onPause"==e?t.bgmChannel&&0!=t.bgmChannel.position&&(this.volume=t.bgmChannel.volume||0,t.bgmChannel.volume=0):"onResume"==e&&this.volume&&0!=t.bgmChannel.position&&(console.log(t.bgmChannel),t.bgmChannel.volume=this.volume))}}var i=e.LocalStorageUtils.getBoolean(n.STORAGE_SOUND);null==i?this.allowPlayEffect=!0:this.allowPlayEffect=i},n.prototype.playBGM=function(e){var t=this;if(this.PlayEffectStatus)if(GameConst.platform!=PlatformConst.OVERSEAS){var i=this.soundList[e];null==i&&(i=RES.getRes(e),i.type=egret.Sound.MUSIC,null!=i?this.soundList[e]=i:RES.getResAsync(e,function(n,i){t.soundList[e]=n,n&&(t.bgmChannel=n.play(0,0),t.bgmChannel.volume=t._effectVolume)},this)),i&&(i.type=egret.Sound.MUSIC,this.bgmChannel=i.play(0,0),this.bgmChannel.volume=this._effectVolume)}else switch(e){case n.game:this.bgm()}},n.prototype.stopBGM=function(){return GameConst.platform==PlatformConst.OVERSEAS?void this.bgmStop():void(null!=this.bgmChannel&&this.bgmChannel.stop())},n.prototype.playEffect=function(e,t,i){var a=this;if(void 0===t&&(t=0),void 0===i&&(i=1),this.PlayEffectStatus)if(GameConst.platform!=PlatformConst.OVERSEAS){var o=this.soundList[e];if(null==o&&(o=RES.getRes(e),o.type=egret.Sound.EFFECT,null!=o?this.soundList[e]=o:RES.getResAsync(e,function(n,o){a.soundList[e]=n,n&&n.play(t,i)},this)),o){o.type=egret.Sound.EFFECT;var s=o.play(t,i);s.volume=this._effectVolume}}else switch(e){case n.click:this.click();break;case n.eating:this.eat();break;case n.hit:this.hit();break;case n.effect:this.effect();break;case n.explode:this.explode();break;case n.frozen:this.frozen();break;case n.win:this.win();break;case n.lose:this.lose();break;case n.relive:this.relive()}},n.prototype.click=function(){GameConst.platform==PlatformConst.OVERSEAS&&egret.ExternalInterface.call(this.NATIVE_EGRET_SOUND,this.CLICK)},n.prototype.eat=function(){GameConst.platform==PlatformConst.OVERSEAS&&egret.ExternalInterface.call(this.NATIVE_EGRET_SOUND,this.EAT)},n.prototype.effect=function(){GameConst.platform==PlatformConst.OVERSEAS&&egret.ExternalInterface.call(this.NATIVE_EGRET_SOUND,this.EFFECT)},n.prototype.hit=function(){GameConst.platform==PlatformConst.OVERSEAS&&egret.ExternalInterface.call(this.NATIVE_EGRET_SOUND,this.HIT)},n.prototype.explode=function(){GameConst.platform==PlatformConst.OVERSEAS&&egret.ExternalInterface.call(this.NATIVE_EGRET_SOUND,this.EXPLODE)},n.prototype.frozen=function(){GameConst.platform==PlatformConst.OVERSEAS&&egret.ExternalInterface.call(this.NATIVE_EGRET_SOUND,this.FROZEN)},n.prototype.win=function(){GameConst.platform==PlatformConst.OVERSEAS&&egret.ExternalInterface.call(this.NATIVE_EGRET_SOUND,this.WIN)},n.prototype.lose=function(){GameConst.platform==PlatformConst.OVERSEAS&&egret.ExternalInterface.call(this.NATIVE_EGRET_SOUND,this.LOSE)},n.prototype.relive=function(){GameConst.platform==PlatformConst.OVERSEAS&&egret.ExternalInterface.call(this.NATIVE_EGRET_SOUND,this.RELIVE)},n.prototype.bgm=function(){GameConst.platform==PlatformConst.OVERSEAS&&egret.ExternalInterface.call(this.NATIVE_EGRET_SOUND,this.GAME)},n.prototype.bgmStop=function(){GameConst.platform==PlatformConst.OVERSEAS&&egret.ExternalInterface.call(this.NATIVE_EGRET_SOUND,this.GAME_STOP)},Object.defineProperty(n.prototype,"effectVolume",{set:function(e){this._effectVolume=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"allowPlayEffect",{set:function(t){this._allowPlayEffect=t,GameConst.platform==PlatformConst.OVERSEAS&&(t?egret.ExternalInterface.call(this.NATIVE_EGRET_SOUND,this.MUTE_FALSE):egret.ExternalInterface.call(this.NATIVE_EGRET_SOUND,this.MUTE_TRUE)),e.LocalStorageUtils.saveBoolean(n.STORAGE_SOUND,t)},enumerable:!0,configurable:!0}),n.prototype.checkPlayEffect=function(){this.allowPlayEffect=!this._allowPlayEffect},Object.defineProperty(n.prototype,"PlayEffectStatus",{get:function(){return this._allowPlayEffect},enumerable:!0,configurable:!0}),n.STORAGE_SOUND="storage_sound",n.hit="hit_mp3",n.click="click_mp3",n.eating="eat_mp3",n.effect="effect_mp3",n.explode="explode_mp3",n.frozen="frozen_mp3",n.lose="lose_mp3",n.win="win_mp3",n.relive="relive_mp3",n.game="game_mp3",n}(e.Singleton);e.SoundManager=t,__reflect(t.prototype,"game.SoundManager")}(game||(game={}));var game;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"stage",{get:function(){return egret.MainContext.instance.stage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stageWidth",{get:function(){return this.stage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stageHeight",{get:function(){return this.stage.stageHeight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"halfStageWidth",{get:function(){return this.stage.stageWidth/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"halfStageHeight",{get:function(){return this.stage.stageHeight/2},enumerable:!0,configurable:!0}),t.prototype.runBrowserAdapt=function(){this.stage.addEventListener(egret.StageOrientationEvent.ORIENTATION_CHANGE,this.changeScaleMode,this)},t.prototype.changeScaleMode=function(){egret.Capabilities.boundingClientWidth/egret.Capabilities.boundingClientHeight>16/9?this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL:this.stage.scaleMode=egret.StageScaleMode.FIXED_WIDTH,console.log("当前适配模式:",this.stage.scaleMode)},t.prototype.startFullscreenAdaptation=function(e,t,n){this.designWidth=e,this.designHeight=t,this.resizeCallback=n,this.stageOnResize()},t.prototype.stageOnResize=function(){this.stage.removeEventListener(egret.Event.RESIZE,this.stageOnResize,this);var e=this.designWidth,t=this.designHeight,n=window.innerWidth,i=window.innerHeight,a=n/i,o=e/t,s=a/o;if(a>o){var r=s,h=s;e=Math.floor(e*r),t=Math.floor(t*h)}this.stage.setContentSize(e,t),this.resizeCallback&&this.resizeCallback(),this.stage.addEventListener(egret.Event.RESIZE,this.stageOnResize,this)},t}(e.Singleton);e.StageUtils=t,__reflect(t.prototype,"game.StageUtils")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.tipsList=[],e.isPlaying=!1,e.tipsUIList=[],e}return __extends(n,t),n.prototype.init=function(){this.tipsLayer=new eui.UILayer,this.tipsLayer.percentWidth=100,this.tipsLayer.percentHeight=100,this.tipsLayer.touchEnabled=!1,e.StageUtils.getInstance().stage.addChildAt(this.tipsLayer,e.EUILayer.Tips)},n.prototype.show=function(e,t){void 0===t&&(t=null),this.tipsList.push({id:e,data:t}),this.play()},n.prototype.play=function(){var t=this;if(!this.isPlaying&&this.tipsList&&this.tipsList.length>0){this.isPlaying=!0;var n=this.tipsList.pop();switch(n.id){case e.ETipsID.TipsBox:var i;if(i=this.tipsUIList[e.ETipsID.TipsBox],i||(this.tipsUIList[e.ETipsID.TipsBox]=new TipsBox,i=this.tipsUIList[e.ETipsID.TipsBox]),i.percentWidth=this.tipsLayer.percentWidth,i.percentHeight=this.tipsLayer.percentHeight,i.anchorOffsetX=e.StageUtils.getInstance().stageWidth/2,i.anchorOffsetY=e.StageUtils.getInstance().stageHeight/2,i.x=e.StageUtils.getInstance().stageWidth/2,i.y=e.StageUtils.getInstance().stageHeight/2,i.tips_group.alpha=1,i.lottery_group.visible=!1,i.tips_group.visible=!0,n.data.type==TipsStyle.wordType?(i.getskin_group.visible=!1,i.title_label.visible=!0,i.getDiamond_group.visible=!1,i.title_label.text=n.data.title):n.data.type==TipsStyle.imgTextType?(i.getDiamond_group.visible=!1,i.getskin_group.visible=!0,i.title_label.visible=!1,i.tiptitle_label.text=n.data.title,i.skin_img.source=n.data.img):n.data.type==TipsStyle.getDiamond?(i.getDiamond_group.visible=!0,i.getskin_group.visible=!1,i.title_label.visible=!1,i.diamond_label.text=n.data.title):n.data.type==TipsStyle.getSKin&&(i.tips_group.visible=!1,i.lottery_group.visible=!0,i.skinImg.source=n.data.img),this.tipsLayer.addChild(i),n.data.hasOwnProperty("isclick"))return i.isclick=!0,i.tipsLayer=this.tipsLayer,i.tipsUIList=this.tipsUIList,void(this.isPlaying=!1);egret.Tween.get(i.tips_group).wait(1300).call(function(){t.tipsLayer.removeChild(i),t.isPlaying=!1}),setTimeout(function(){t.removeTips(i)},1500);break;case e.ETipsID.TipsDemond:var a;a=this.tipsUIList[e.ETipsID.TipsDemond],a||(this.tipsUIList[e.ETipsID.TipsDemond]=new TipsDemond,a=this.tipsUIList[e.ETipsID.TipsDemond]),a.demond_group.alpha=1,a.number_label.text=n.data.title;var o=e.StageUtils.getInstance().stageHeight/2-a.demond_group.height-100;a.demond_group.y=o;var s=o-150;this.tipsLayer.addChild(a),egret.Tween.get(a.demond_group).wait(800).to({y:s,alpha:0},500).call(function(){t.tipsLayer.removeChild(a),t.isPlaying=!1});break;case e.ETipsID.TipsToutiao:var r;r=this.tipsUIList[e.ETipsID.TipsToutiao],r||(this.tipsUIList[e.ETipsID.TipsToutiao]=new TipsTouTiao,r=this.tipsUIList[e.ETipsID.TipsToutiao]),r.group_toutiao.alpha=1,r.lab_toutiao_text.text=n.data.title,this.tipsLayer.addChild(r),egret.Tween.get(r.group_toutiao).wait(700).to({alpha:0},200).call(function(){t.tipsLayer.removeChild(r),t.isPlaying=!1}),setTimeout(function(){t.removeTips(r)},1e3)}}},n.prototype.unInit=function(){e.StageUtils.getInstance().stage.removeChild(this.tipsLayer)},n.prototype.removeTips=function(e){this.isPlaying&&(this.isPlaying=!1,this.tipsLayer.removeChild(e))},n}(e.Singleton);e.TipsManager=t,__reflect(t.prototype,"game.TipsManager")}(game||(game={}));var LoginTypestaus;!function(e){e[e.facebookLogin=0]="facebookLogin",e[e.googleLogin=1]="googleLogin",e[e.touristLogin=2]="touristLogin"}(LoginTypestaus||(LoginTypestaus={}));var TipsStyle;!function(e){e[e.wordType=0]="wordType",e[e.imgTextType=1]="imgTextType",e[e.getDiamond=2]="getDiamond",e[e.getSKin=3]="getSKin"}(TipsStyle||(TipsStyle={}));var UserInfo=function(){function e(){}return e.curSid=0,e.SkinPosition=0,e.DiamondNumber=200,e.reliveTime=0,e.GameId="",e.isQAD=!1,e.AnimStatus={StopShareAnim:!1,StopFoxAnim:!1},e.gameBoxType=0,e.Logintype=LoginTypestaus.touristLogin,e.userID="",e.Nick="",e.enemyNick="",e.isGame=!1,e.isPveGame=!1,e.isNew=!0,e.isAutogoogleLogin=!1,e.lotterySkin=[],e.RankType=1,e.buryName={Seven_Day_click:"Seven_Day_Sign_In_Click",freeClick:"Main_Free_Ad_Click",Classic_click:"Classic_Without_Ad_Start",Classic_Rev_Ad_click:"Classic_Rev_Ad_Click",Classic_Rev_diamond_click:"Classic_Rev_Diamond_Click",Classic_Ad_click:"Classic_Ad_Start",Pve_click:"Pve_Without_Ad_Start",Pve_Rev_Ad_click:"Pve_Rev_Ad_Click",Pve_diamond_click:"Pve_Rev_Diamond_Click",Pve_Ad_click:"Pve_Ad_Start",pveGame_Ad_Play_click:"pveGame_Ad_Play_Click",Lottery_click:"Lottery_Icon_Click",Lottery_Ad_click:"Lottery_Ad_Click",Lottery_diamond_click:"Lottery_Diamond_Click",Rank_click:"Rank_List_Click",Task_click:"Main_Task_Click",Task_Ad_click:"Task_Ad_Play_Any_Model",Limited_Skin_Click:"Limited_Skin_Click",Invite_Button_Click:"Invite_Button_Click"},e.h5Msg="",e.ttPveUsableShareTimes=0,e.ttPveShareGetDiamondNum=0,e.ttClassicUsableShareTimes=0,e.ttClassicShareGetDiamondNum=0,e.pveGetDiamod={left:0,reward:0},e}();__reflect(UserInfo.prototype,"UserInfo");var ELoginCode;!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.ERROR=1]="ERROR"}(ELoginCode||(ELoginCode={}));var WXConst=function(){function e(){}return Object.defineProperty(e,"resFolderUrl",{get:function(){var e="";switch(GameConst.platform){case PlatformConst.WEIXIN:e="https://dogcdn.hclw.online/snake/wx_publish/"+GameConst.wxResVersion+"/";break;case PlatformConst.TOUTIAO:e=GameConst.isRelease?"https://dogcdn.hclw.online/snake/toutiao/tt_publish/"+GameConst.ttResVersion+"/":"https://dogcdn.hclw.online/snake/toutiao/tt_test/"+GameConst.ttResVersion+"/"}return e},enumerable:!0,configurable:!0}),e.OTHERS_APP_INFO={ag:{icon:"icon_ig_png",name:"爱狗日记",id:"wxa4bcef2fdb4f5514",path:""},tc:{icon:"icon_tcs_png",name:"全民豆子贪吃蛇",id:"wxe1c6b52daf43fd9a",path:""},sc:{icon:"icon_ppc_png",name:"疯狂赛车碰碰碰",id:"wx1a06eaabbfc18f85",path:""},gw:{icon:"icon_xxl_png",name:"怪物消消乐",id:"wx7afa664f48b5a781",path:""},lx:{icon:"icon_lx_png",name:"蓝心资讯",id:"wx63d3684ba034b9f9",path:"pages/start/start?ch=snake"},yy:{icon:"icon_yy1_png",name:"娱阅资讯",id:"wx433569f90b9588ba",path:"pages/start/start?ch=snake"},lhjl:{icon:"icon_lhjl_png",name:"灵魂交流",id:"wx9771be5876b4872a",path:"pages/index/index?ch=snake"}},e.giftPackage=!0,e.mainshare=!0,e.showWXJumpMiniProgramBtn=!1,e.wxConfigUrl=e.resFolderUrl+"snakeconfig.txt",e.shareImageFolderUrl=e.resFolderUrl+"assets/images/share/",e.shareDescDefault=["吃到撑死的贪吃蛇，你有没见过？","贪吃蛇大乱斗，期待你来超神!"],e.shareDescRelive=["好友@你，贪吃蛇吃鸡模式，正式开战，你敢挑战吗？","令人上瘾的吃豆子游戏，你能成为最长的蛇吗？"],e}();__reflect(WXConst.prototype,"WXConst");var RankingUI=function(e){function t(t,n){var i=e.call(this)||this;return i.page=1,i.pageMaxNum=5,i.ownPage=1,i.refreshCanvasFunc=function(e){return egret.WebGLUtils.deleteWebGLTexture(i.sharedCanvasBitmap.webGLTexture),i.sharedCanvasBitmap.webGLTexture=null,!1},i.width=t,i.height=n,i.init(),i}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,i,a;return __generator(this,function(o){return this.rankingListMask=new egret.Shape,this.rankingListMask.graphics.beginFill(0,1),this.rankingListMask.graphics.drawRect(0,0,this.width,this.height),this.rankingListMask.graphics.endFill(),this.rankingListMask.touchEnabled=!0,this.addChild(this.rankingListMask),e=new eui.Image,e.source="RankList_json.rankbg",this.addChild(e),e.width=this.width,e.height=this.height,this.group=new eui.Group,this.addChild(this.group),this.group.width=this.width,this.group.height=667*this.width/375,this.group.anchorOffsetY=this.group.height/2,this.group.y=this.height/2,window.sharedCanvas.width=this.group.width,window.sharedCanvas.height=this.group.height,this.sharedCanvasBitmap=new egret.BitmapData(window.sharedCanvas),this.sharedCanvasBitmap.$deleteSource=!1,t=new egret.Texture,t._setBitmapData(this.sharedCanvasBitmap),n=new egret.Bitmap(t),n.x=0,n.y=0,n.width=this.group.width,n.height=this.group.height,this.group.addChild(n),egret.startTick(this.refreshCanvasFunc,this),i=new eui.Image,i.source="but_back_png",this.group.addChild(i),i.x=21*this.group.width/375,i.y=46*this.group.height/667,i.width=36*this.group.width/375,i.height=36*this.group.height/667,i.addEventListener(egret.TouchEvent.TOUCH_END,this.closeRankUI,this),this.showButton(),a={command:"friend",openid:RoleInfo.getInstance().openId,page:0},WXProxy.instance.postMessage(a),[2]})})},t.prototype.showButton=function(){var e=new eui.Image;e.source="button_own_png",this.group.addChild(e),e.x=21*this.group.width/375,e.y=572*this.group.height/667,e.width=86*this.group.width/375,e.height=36*this.group.height/667,e.addEventListener(egret.TouchEvent.TOUCH_END,this.ownPageClick,this);var t=new eui.Image;t.source="button_pre_png",this.group.addChild(t),t.x=164*this.group.width/375,t.y=572*this.group.height/667,t.width=86*this.group.width/375,t.height=36*this.group.height/667,t.addEventListener(egret.TouchEvent.TOUCH_END,this.prePageClick,this);var n=new eui.Image;n.source="button_next_png",this.group.addChild(n),n.x=268*this.group.width/375,n.y=572*this.group.height/667,n.width=86*this.group.width/375,n.height=36*this.group.height/667,n.addEventListener(egret.TouchEvent.TOUCH_END,this.nextPageClick,this)},t.prototype.ownPageClick=function(e){var t={command:"paging",page:0};WXProxy.instance.postMessage(t)},t.prototype.prePageClick=function(e){var t={command:"paging",page:-1};WXProxy.instance.postMessage(t)},t.prototype.nextPageClick=function(e){var t={command:"paging",page:1};WXProxy.instance.postMessage(t)},t.prototype.closeRankUI=function(e){this.parent&&this.parent.removeChild(this)},t}(eui.Component);__reflect(RankingUI.prototype,"RankingUI");var LineType=function(){function e(e,t,n,i,a){this.row1=-1,this.row2=-1,this.row3=-1,this.row4=-1,this.row5=-1,this.row1=e,this.row2=t,this.row3=n,this.row4=i,this.row5=a}return e.OBSTACLE=1,e.POINT=2,e.LINE=3,e.MAGENT=4,e.ROCKET=5,e.BOMB=6,e.NON=-1,e}();__reflect(LineType.prototype,"LineType");var RoleInfo=function(){function e(){}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e}();__reflect(RoleInfo.prototype,"RoleInfo");var HttpManager;!function(e){function t(e,t,n,a){var o=new egret.HttpRequest;o.responseType=egret.HttpResponseType.TEXT,o.addEventListener(egret.Event.COMPLETE,t,a),o.addEventListener(egret.Event.COMPLETE,i,this),o.addEventListener(egret.IOErrorEvent.IO_ERROR,n,a),o.open(e,egret.URLRequestMethod.GET),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),console.log("GET url__:"+e),o.send()}function n(e,t,n,a,o){var s=new egret.HttpRequest;s.responseType=egret.HttpResponseType.TEXT,s.addEventListener(egret.Event.COMPLETE,n,o),s.addEventListener(egret.Event.COMPLETE,i,this),s.addEventListener(egret.IOErrorEvent.IO_ERROR,a,o),s.open(e,egret.URLRequestMethod.POST),s.setRequestHeader("Content-Type","application/json"),console.log("Post url__:"+e+" data:"+JSON.stringify(t)),s.send(t)}function i(e){e&&e.target&&e.target.response&&console.log("result___:"+JSON.stringify(e.target.response))}e.httpGET=t,e.httpPOST=n}(HttpManager||(HttpManager={}));var WXProxy=function(){function e(){this.appId="wxe1c6b52daf43fd9a",this.interAdId="adunit-a35b3442d9663ffc",this.homeAdId="adunit-361d77e923bdb386",this.endAdId="adunit-361d77e923bdb386",this.bannerId="adunit-941835e2bf96fe28",this.closeListener=null,this.errorListener=null;var e=wx.getSystemInfoSync();if(e.SDKVersion>="1.9.92"){var t=wx.getUpdateManager();t.onCheckForUpdate(function(e){e.hasUpdate&&t.onUpdateReady(function(){t.applyUpdate()})})}}return Object.defineProperty(e,"instance",{get:function(){return void 0==this._instance&&(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.prototype.getLaunchOptions=function(){var e=wx.getLaunchOptionsSync();e.query&&e.query.invite&&(RoleInfo.getInstance().inviteUid=e.query.invite)},e.prototype.onShow=function(e,t){wx.onShow(function(n){console.log(t),e.call(t,n)})},e.prototype.loginPlatform=function(e){return new Promise(function(e,t){wx.showLoading({title:"正在登录...",mask:!0}),wx.login({success:function(t){e(t)},fail:function(){wx.showLoading({title:"登录失败",mask:!0}),t()},complete:function(){wx.hideLoading()}})})},e.prototype.getUserInfo=function(e,t,n){this.getPlatformAuthInfo().then(function(e){e?wx.getUserInfo({withCredentials:!0,success:function(e){var i=e.userInfo;t.call(n,i)},fail:function(e){wx.showModal({title:"友情提醒",content:"请允许微信获得授权!",confirmText:"授权",showCancel:!1,success:function(e){t.call(n,null)}})}}):t.call(n,null)})},e.prototype.share=function(e){var t=(RoleInfo.getInstance(),Math.ceil(2*Math.random())),n="",i="";e?(n="reshare"+t+".png",i=WXConst.shareDescRelive[t-1]):(n="share"+t+".png",i=WXConst.shareDescDefault[t-1]),wx.shareAppMessage({title:i,imageUrl:WXConst.shareImageFolderUrl+n,query:"invite="+UserInfo.userID})},e.prototype.createInterstitialAd=function(e,t){var n=this.interAdId,i=null;wx.createInterstitialAd&&(i=wx.createInterstitialAd({adUnitId:n})),i&&i.show()["catch"](function(e){console.error(e+"..da..")})},e.prototype.createVideoAd=function(e,t,n){var i=this,a=this,o="HOME"==e?this.homeAdId:this.endAdId;(null==this.videoAd||void 0==this.videoAd)&&(console.log("创建广告组件"),this.videoAd=wx.createRewardedVideoAd({adUnitId:o})),this.videoAd.load().then(function(e){a.videoAd.show()},function(e){console.log("播放错误")}),this.closeListener=function(e){a.videoAd.offClose(i.closeListener),e&&e.isEnded||void 0===e?(console.log("正常播放结束，可以下发游戏奖励"),t.call(n,{playResult:!0,finishResult:!0})):(console.log("播放中途退出，不下发游戏奖励"),t.call(n,{playResult:!0,finishResult:!1}))},this.videoAd.onClose(this.closeListener),this.errorListener=function(e){a.videoAd.offError(i.errorListener),console.log("视频广告加载错误",e),t.call(n,{playResult:!1,finishResult:!0})},this.videoAd.onError(this.errorListener)},e.prototype.createBannerAd=function(){var e=this;try{this.bannerAd&&this.bannerAd.destroy()}catch(t){t.message&&console.log(t.message)}var n=wx.getSystemInfoSync(),i=n.windowWidth,a=n.windowHeight/15,o=n.windowHeight-a,s=this.bannerId;this.bannerAd=wx.createBannerAd({adUnitId:s,style:{left:0,top:o,width:i,height:40}}),this.bannerAd.onError(function(e){console.log("banner广告加载错误",e)}),this.bannerAd.show(),this.bannerAd.onResize(function(t){e.bannerAd.style.top=n.windowHeight-e.bannerAd.style.realHeight})},e.prototype.hideBannerAd=function(){this.bannerAd&&this.bannerAd.hide()},e.prototype.updateScore=function(e){var t={command:"updateScore",score:e};console.log("往开放域发送数据："+t),this.postMessage(t)},e.prototype.postMessage=function(e){wx.getOpenDataContext&&wx.getOpenDataContext().postMessage(e)},e.prototype.navigateToMiniProgram=function(e,t,n,i){wx.navigateToMiniProgram({appId:e,path:t,envVersion:"release",success:function(e){console.log("跳转成功",e),n.call(i,!0)},fail:function(e){console.log("跳转失败",e),n.call(i,!1)},complete:function(e){console.log("跳转完成",e)}})},e.prototype.showFeedback=function(e){var t=wx.getSystemInfoSync();if(t.SDKVersion>="2.1.2"){if(void 0===this.feedBackButton){var n=t.screenWidth,i=t.screenHeight;this.feedBackButton=wx.createFeedbackButton({type:"text",text:"",style:{left:n*e.xPercent,top:i*e.yPercent,width:n*e.wPercent,height:i*e.hPercent}})}this.feedBackButton.show()}},e.prototype.hideFeedback=function(){var e=wx.getSystemInfoSync();void 0!=this.feedBackButton&&e.SDKVersion>="2.1.2"&&this.feedBackButton.hide()},e.prototype.setStorage=function(e,t){wx.setStorage({key:e,data:t})},e.prototype.getStorage=function(e){var t=wx.getStorageSync(e);return t},e.prototype.showLoading=function(e,t){wx.showLoading({title:e}),setTimeout(function(){wx.hideLoading()},t)},e.prototype.getPlatformAuthInfo=function(){return new Promise(function(e,t){wx.getSetting({success:function(t){var n=t.authSetting["scope.userInfo"]?t.authSetting["scope.userInfo"]:!1;e(n)},fail:function(t){e(!1)}})})},e.prototype.authorization=function(){return new Promise(function(e,t){wx.getSetting({success:function(t){t.authSetting["scope.userInfo"]||wx.authorize({scope:"scope.userInfo",success:function(){e(!0)}})}})})},e}();__reflect(WXProxy.prototype,"WXProxy");